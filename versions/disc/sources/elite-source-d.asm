BeebDisStartAddr = $11E3

TWFL = &18EE
QQ23 = &4619
L3EB4 = &3EB4
SFX = &3E90

L0000   = $0000
L0001   = $0001
L0002   = $0002
L0003   = $0003
L0006   = $0006
L0007   = $0007
L0008   = $0008
L0009   = $0009
L000A   = $000A
L000B   = $000B
L000C   = $000C
L000D   = $000D
L000E   = $000E
L000F   = $000F
L0010   = $0010
L0013   = $0013
L0014   = $0014
L0015   = $0015
L0016   = $0016
L0017   = $0017
L0018   = $0018
L001B   = $001B
L001C   = $001C
L001D   = $001D
L001E   = $001E
L001F   = $001F
L0020   = $0020
L0021   = $0021
L0022   = $0022
L0023   = $0023
L0024   = $0024
L0025   = $0025
L0026   = $0026
L0027   = $0027
L0028   = $0028
L0029   = $0029
L002A   = $002A
L002B   = $002B
L002C   = $002C
L002D   = $002D
L002E   = $002E
L002F   = $002F
L0030   = $0030
L0031   = $0031
L0032   = $0032
L0033   = $0033
L0034   = $0034
L0035   = $0035
L0036   = $0036
L0037   = $0037
L0038   = $0038
L0039   = $0039
L003A   = $003A
L003B   = $003B
L003C   = $003C
L003D   = $003D
L003E   = $003E
L003F   = $003F
L0040   = $0040
L0041   = $0041
L0042   = $0042
L0043   = $0043
L0044   = $0044
L0045   = $0045
L0046   = $0046
L0047   = $0047
L0048   = $0048
L0049   = $0049
L004A   = $004A
L004B   = $004B
L004C   = $004C
L004D   = $004D
L004E   = $004E
L004F   = $004F
L0050   = $0050
L0052   = $0052
L0054   = $0054
L0055   = $0055
L0056   = $0056
L0058   = $0058
L005A   = $005A
L005B   = $005B
L005C   = $005C
L005E   = $005E
L0060   = $0060
L0061   = $0061
L0062   = $0062
L0063   = $0063
L0064   = $0064
L0065   = $0065
L0066   = $0066
L0067   = $0067
L0068   = $0068
L0069   = $0069
L006A   = $006A
L006B   = $006B
L006C   = $006C
L006D   = $006D
L006E   = $006E
L006F   = $006F
L0070   = $0070
L0071   = $0071
L0072   = $0072
L0073   = $0073
L0074   = $0074
L0075   = $0075
L0076   = $0076
L0077   = $0077
L0078   = $0078
L0079   = $0079
L007A   = $007A
L007B   = $007B
L007C   = $007C
L007D   = $007D
L007E   = $007E
L007F   = $007F
L0080   = $0080
L0081   = $0081
L0082   = $0082
L0083   = $0083
L0084   = $0084
L0085   = $0085
L0086   = $0086
L0087   = $0087
L0088   = $0088
L0089   = $0089
L008A   = $008A
L008B   = $008B
L008C   = $008C
L008D   = $008D
L008E   = $008E
L008F   = $008F
L0090   = $0090
L0091   = $0091
L0092   = $0092
L0093   = $0093
L0094   = $0094
L0095   = $0095
L0096   = $0096
L0097   = $0097
L0099   = $0099
L009A   = $009A
L009B   = $009B
L009C   = $009C
L009D   = $009D
L009E   = $009E
L00D1   = $00D1
L00D2   = $00D2
L00D3   = $00D3
L00D4   = $00D4
L00D5   = $00D5
L00D6   = $00D6
L00D7   = $00D7
L00D8   = $00D8
L00D9   = $00D9
L00DA   = $00DA
L00DB   = $00DB
L00DC   = $00DC
L00E0   = $00E0
L00E1   = $00E1
L00F9   = $00F9
L0100   = $0100
L0101   = $0101
L0102   = $0102
L0103   = $0103
USERV   = $0200
BRKV    = $0202
IRQ1V   = $0204
IRQ2V   = $0206
CLIV    = $0208
BYTEV   = $020A
WORDV   = $020C
WRCHV   = $020E
RDCHV   = $0210
FILEV   = $0212
ARGSV   = $0214
BGETV   = $0216
BPUTV   = $0218
GBPBV   = $021A
FINDV   = $021C
FSCV    = $021E
EVENTV  = $0220
UPTV    = $0222
NETV    = $0224
VDUV    = $0226
KEYV    = $0228
INSV    = $022A
REMV    = $022C
CNPV    = $022E
INDV1   = $0230
INDV2   = $0232
INDV3   = $0234
L0300   = $0300
L0301   = $0301
L0302   = $0302
L0303   = $0303
L0304   = $0304
L0305   = $0305
L0306   = $0306
L0307   = $0307
L0308   = $0308
L0309   = $0309
L030A   = $030A
L030B   = $030B
L030C   = $030C
L030D   = $030D
L030E   = $030E
L030F   = $030F
L0310   = $0310
L0311   = $0311
L0312   = $0312
L0313   = $0313
L0315   = $0315
L031E   = $031E
L0320   = $0320
L0328   = $0328
L032E   = $032E
L033B   = $033B
L033D   = $033D
L033E   = $033E
L033F   = $033F
L0340   = $0340
L0341   = $0341
L0342   = $0342
L0343   = $0343
L0344   = $0344
L0345   = $0345
L0346   = $0346
L0347   = $0347
L0348   = $0348
L0349   = $0349
L034A   = $034A
L034B   = $034B
L034C   = $034C
L034D   = $034D
L034E   = $034E
L034F   = $034F
L0350   = $0350
L0358   = $0358
L0359   = $0359
L035A   = $035A
L035B   = $035B
L0361   = $0361
L0362   = $0362
L0363   = $0363
L0364   = $0364
L0365   = $0365
L0366   = $0366
L0367   = $0367
L0368   = $0368
L036E   = $036E
L036F   = $036F
L0372   = $0372
L0375   = $0375
L0379   = $0379
L0380   = $0380
L0381   = $0381
L0382   = $0382
L0383   = $0383
L0384   = $0384
L0385   = $0385
L0386   = $0386
L0387   = $0387
L038B   = $038B
L038C   = $038C
L038D   = $038D
L039D   = $039D
L039E   = $039E
L039F   = $039F
L03A0   = $03A0
L03A4   = $03A4
L03A5   = $03A5
L03A6   = $03A6
L03A7   = $03A7
L03A8   = $03A8
L03A9   = $03A9
L03AA   = $03AA
L03AB   = $03AB
L03AC   = $03AC
L03AD   = $03AD
L03AE   = $03AE
L03AF   = $03AF
L03B0   = $03B0
L03B1   = $03B1
L03B2   = $03B2
L03B8   = $03B8
L03B9   = $03B9
L03BA   = $03BA
L03BB   = $03BB
L03BD   = $03BD
L03BE   = $03BE
L03BF   = $03BF
L03C0   = $03C0
L03C1   = $03C1
L03C2   = $03C2
L03C3   = $03C3
L03C5   = $03C5
L03C6   = $03C6
L03C7   = $03C7
L03C8   = $03C8
L03C9   = $03C9
L03CA   = $03CA
L03CB   = $03CB
L03CC   = $03CC
L03CD   = $03CD
L03CE   = $03CE
L07C0   = $07C0
L07E0   = $07E0
L0880   = $0880
L0881   = $0881
L0900   = $0900
L0901   = $0901
L0902   = $0902
L0904   = $0904
L0905   = $0905
L0906   = $0906
L0907   = $0907
L0908   = $0908
L0925   = $0925
L0927   = $0927
L0929   = $0929
L092D   = $092D
L092F   = $092F
L0931   = $0931
L0933   = $0933
L0949   = $0949
L0D7A   = $0D7A
L0E00   = $0E00
L0EC0   = $0EC0
L0F0D   = $0F0D
L0F0E   = $0F0E
L0F5C   = $0F5C
L0F6F   = $0F6F
L0F82   = $0F82
L0F95   = $0F95
L0FA8   = $0FA8
L0FA9   = $0FA9
L0FBB   = $0FBB
L0FCE   = $0FCE
L0FCF   = $0FCF
L0FD1   = $0FD1
L0FD2   = $0FD2
L11D5   = $11D5
XX21    = $5600
L5607   = $5607
L563D   = $563D
E%      = $563E
L6CA9   = $6CA9
L6FA9   = $6FA9
LFE00   = $FE00
LFE01   = $FE01
LFE21   = $FE21
LFE40   = $FE40
LFE43   = $FE43
LFE4F   = $FE4F
OSWRSC  = $FFB3
OSRDSC  = $FFB9
OSEVEN  = $FFBF
GSINIT  = $FFC2
GSREAD  = $FFC5
NVRDCH  = $FFC8
NNWRCH  = $FFCB
OSFIND  = $FFCE
OSGBPB  = $FFD1
OSBPUT  = $FFD4
OSBGET  = $FFD7
OSARGS  = $FFDA
OSFILE  = $FFDD
OSRDCH  = $FFE0
OSASCI  = $FFE3
OSNEWL  = $FFE7
OSWRCH  = $FFEE
OSWORD  = $FFF1
OSBYTE  = $FFF4
OSCLI   = $FFF7
LFFFD   = $FFFD

        org     $11E3
.x11E3
        JMP     scramble

        JMP     scramble

        JMP     TT26

        EQUB    $4B,$11

.L11EE
        JMP     L11D5

.L11F1
        LDX     #$F8
        LDY     #$11
        JSR     OSCLI

.L11F8
        EQUS    "L.T.CODE"

        EQUB    $0D

.scramble
        LDY     #$00
        STY     L0007
        LDX     #$13
.L1207
        STX     L0008
        TYA
        EOR     (L0007),Y
        EOR     #$33
        STA     (L0007),Y
        DEY
        BNE     L1207

        INX
        CPX     #$56
        BNE     L1207

        JMP     RSHIPS

.DOENTRY
        LDA     #$52
        STA     L11F8
.DEATH2
        JSR     RES2

        JSR     L0D7A

        BNE     L11F1

.MPERC
        LDA     L0900
        STA     L0000
        LDX     L034C
        JSR     cntr

        JSR     cntr

        TXA
        EOR     #$80
        TAY
        AND     #$80
        STA     L0032
        STX     L034C
        EOR     #$80
        STA     L0033
        TYA
        BPL     L124D

        EOR     #$FF
        CLC
        ADC     #$01
.L124D
        LSR     A
        LSR     A
        CMP     #$08
        BCS     L1254

        LSR     A
.L1254
        STA     L0031
        ORA     L0032
        STA     L008D
        LDX     L034D
        JSR     cntr

        TXA
        EOR     #$80
        TAY
        AND     #$80
        STX     L034D
        STA     L007C
        EOR     #$80
        STA     L007B
        TYA
        BPL     L1274

        EOR     #$FF
.L1274
        ADC     #$04
        LSR     A
        LSR     A
        LSR     A
        LSR     A
        CMP     #$03
        BCS     L127F

        LSR     A
.L127F
        STA     L002B
        ORA     L007B
        STA     L002A
        LDA     L03CE
        BEQ     L129E

        LDX     #$03
        LDA     #$80
        JSR     OSBYTE

        TYA
        LSR     A
        LSR     A
        CMP     #$28
        BCC     L129A

        LDA     #$28
.L129A
        STA     L007D
        BNE     L12B6

.L129E
        LDA     L0302
        BEQ     L12AB

        LDA     L007D
        CMP     #$28
        BCS     L12AB

        INC     L007D
.L12AB
        LDA     L0301
        BEQ     L12B6

        DEC     L007D
        BNE     L12B6

        INC     L007D
.L12B6
        LDA     L030B
        AND     L038B
        BEQ     L12CD

        LDY     #$EE
        JSR     ABORT

        LDA     #$28
        JSR     NOISE

        LDA     #$00
        STA     L0344
.L12CD
        LDA     L0045
        BPL     L12E3

        LDA     L030A
        BEQ     L12E3

        LDX     L038B
        BEQ     L12E3

        STA     L0344
        LDY     #$E0
        JSR     MSBAR

.L12E3
        LDA     L030C
        BEQ     L12EF

        LDA     L0045
        BMI     L1326

        JSR     FRMIS

.L12EF
        LDA     L0308
        BEQ     L12F7

        ASL     L0382
.L12F7
        LDA     L0310
        BEQ     L1301

        LDA     #$00
        STA     L033F
.L1301
        LDA     L0309
        AND     L0386
        BEQ     L130C

        JMP     ESCAPE

.L130C
        LDA     L030E
        BEQ     L1314

        JSR     WARP

.L1314
        LDA     L030D
        AND     L0380
        BEQ     L1326

        LDA     L0030
        BNE     L1326

        DEC     L0340
        JSR     ECBLB2

.L1326
        LDA     L030F
        AND     L0384
        BEQ     L1331

        STA     L033F
.L1331
        LDA     #$00
        STA     L0044
        STA     L007E
        LDA     L007D
        LSR     A
        ROR     L007E
        LSR     A
        ROR     L007E
        STA     L007F
        LDA     L0346
        BNE     L1374

        LDA     L0307
        BEQ     L1374

        LDA     L0347
        CMP     #$F2
        BCS     L1374

        LDX     L0345
        LDA     L0368,X
        BEQ     L1374

        PHA
        AND     #$7F
        STA     L0044
        STA     L0343
        LDA     #$00
        JSR     NOISE

        JSR     LASLI

        PLA
        BPL     L136F

        LDA     #$00
.L136F
        AND     #$FA
        STA     L0346
.L1374
        LDX     #$00
.MAL1
        STX     L0084
        LDA     L0311,X
        BNE     L1380

        JMP     MA18

.L1380
        STA     L008C
        JSR     GINF

        LDY     #$24
.L1387
        LDA     (L0020),Y
        STA     L0046,Y
        DEY
        BPL     L1387

        LDA     L008C
        BMI     L13B6

        ASL     A
        TAY
        LDA     L55FE,Y
        STA     L001E
        LDA     L55FF,Y
        STA     L001F
        LDA     L0382
        BPL     L13B6

        CPY     #$04
        BEQ     L13B6

        LDA     L0065
        AND     #$20
        BNE     L13B6

        ASL     L0065
        SEC
        ROR     L0065
        JSR     EXNO2

.L13B6
        JSR     MVEIT

        LDY     #$24
.L13BB
        LDA     L0046,Y
        STA     (L0020),Y
        DEY
        BPL     L13BB

        LDA     L0065
        AND     #$A0
        JSR     MAS4

        BNE     L141D

        LDA     L0046
        ORA     L0049
        ORA     L004C
        BMI     L141D

        LDX     L008C
        BMI     L141D

        CPX     #$02
        BEQ     L1420

        AND     #$C0
        BNE     L141D

        CPX     #$01
        BEQ     L141D

        LDA     L0381
        AND     L004B
        BPL     MA58

        CPX     #$05
        BEQ     L13FD

        LDY     #$00
        LDA     (L001E),Y
        LSR     A
        LSR     A
        LSR     A
        LSR     A
        BEQ     MA58

        ADC     #$01
        BNE     L1402

.L13FD
        JSR     DORND

        AND     #$07
.L1402
        JSR     tnpr

        LDY     #$4E
        BCS     MA59

        LDY     L03AD
        ADC     L036F,Y
        STA     L036F,Y
        TYA
        ADC     #$D0
        JSR     MESS

        ASL     L006A
        SEC
        ROR     L006A
.L141D
        JMP     MA26

.L1420
        LDA     L0949
        AND     #$04
        BNE     L1449

        LDA     L0054
        CMP     #$D6
        BCC     L1449

        JSR     SPS1

        LDA     L0036
        CMP     #$56
        BCC     L1449

        LDA     L0056
        AND     #$7F
        CMP     #$50
        BCC     L1449

.GOIN
        JSR     RES2

        LDA     #$08
        JSR     HFS2

        JMP     DOENTRY

.L1449
        LDA     L007D
        CMP     #$05
        BCC     L145C

        JMP     DEATH

.MA59
        JSR     EXNO3

        ASL     L0065
        SEC
        ROR     L0065
        BNE     MA26

.L145C
        LDA     #$01
        STA     L007D
        LDA     #$05
        BNE     L146D

.MA58
        ASL     L0065
        SEC
        ROR     L0065
        LDA     L0069
        SEC
        ROR     A
.L146D
        JSR     OOPS

        JSR     EXNO3

.MA26
        LDA     L006A
        BPL     L147A

        JSR     SCAN

.L147A
        LDA     L0087
        BNE     L14F0

        LDX     L0345
        BEQ     L1486

        JSR     PU1

.L1486
        JSR     L24C7

        BCC     L14ED

        LDA     L0344
        BEQ     L149A

        JSR     BEEP

        LDX     L0084
        LDY     #$0E
        JSR     ABORT2

.L149A
        LDA     L0044
        BEQ     L14ED

        LDX     #$0F
        JSR     EXNO

        LDA     L008C
        CMP     #$02
        BEQ     L14E8

        CMP     #$1F
        BNE     L14B7

        LDA     L0044
        CMP     #$17
        BNE     L14ED

        LSR     L0044
        LSR     L0044
.L14B7
        LDA     L0069
        SEC
        SBC     L0044
        BCS     L14E6

        ASL     L0065
        SEC
        ROR     L0065
        LDA     L008C
        CMP     #$07
        BNE     L14D9

        LDA     L0044
        CMP     #$32
        BNE     L14D9

        JSR     DORND

        LDX     #$08
        AND     #$03
        JSR     SPIN2

.L14D9
        LDY     #$04
        JSR     SPIN

        LDY     #$05
        JSR     SPIN

        JSR     EXNO2

.L14E6
        STA     L0069
.L14E8
        LDA     L008C
        JSR     ANGRY

.L14ED
        JSR     LL9

.L14F0
        LDY     #$23
        LDA     L0069
        STA     (L0020),Y
        LDA     L006A
        BMI     L1527

        LDA     L0065
        BPL     L152A

        AND     #$20
        BEQ     L152A

        LDA     L006A
        AND     #$40
        ORA     L038C
        STA     L038C
        LDA     L034A
        ORA     L0341
        BNE     L1527

        LDY     #$0A
        LDA     (L001E),Y
        BEQ     L1527

        TAX
        INY
        LDA     (L001E),Y
        TAY
        JSR     MCASH

        LDA     #$00
        JSR     MESS

.L1527
        JMP     L3D7F

.L152A
        LDA     L008C
        BMI     L1533

        JSR     FAROF

        BCC     L1527

.L1533
        LDY     #$1F
        LDA     L0065
        STA     (L0020),Y
        LDX     L0084
        INX
        JMP     MAL1

.MA18
        LDA     L0382
        BPL     L154F

        ASL     L0382
        JSR     WSCAN

        LDA     #$30
        STA     LFE21
.L154F
        LDA     L008A
        AND     #$07
        BNE     L15C2

        LDX     L03A7
        BPL     L156C

        LDX     L03A6
        JSR     SHD

        STX     L03A6
        LDX     L03A5
        JSR     SHD

        STX     L03A5
.L156C
        SEC
        LDA     L0383
        ADC     L03A7
        BCS     L1578

        STA     L03A7
.L1578
        LDA     L0341
        BNE     L15BF

        LDA     L008A
        AND     #$1F
        BNE     L15CB

        LDA     L0320
        BNE     L15BF

        TAY
        JSR     MAS2

        BNE     L15BF

        LDX     #$1C
.L1590
        LDA     L0900,X
        STA     L0046,X
        DEX
        BPL     L1590

        INX
        LDY     #$09
        JSR     MAS1

        BNE     L15BF

        LDX     #$03
        LDY     #$0B
        JSR     MAS1

        BNE     L15BF

        LDX     #$06
        LDY     #$0D
        JSR     MAS1

        BNE     L15BF

        LDA     #$C0
        JSR     FAROF2

        BCC     L15BF

        JSR     WPLS

        JSR     NWSPS

.L15BF
        JMP     MA23

.L15C2
        LDA     L0341
        BNE     L15BF

        LDA     L008A
        AND     #$1F
.L15CB
        CMP     #$0A
        BNE     L15FD

        LDA     #$32
        CMP     L03A7
        BCC     L15DA

        ASL     A
        JSR     MESS

.L15DA
        LDY     #$FF
        STY     L0FD1
        INY
        JSR     m

        BNE     MA23

        JSR     MAS3

        BCS     MA23

        SBC     #$24
        BCC     L15FA

        STA     L0082
        JSR     LL5

        LDA     L0081
        STA     L0FD1
        BNE     MA23

.L15FA
        JMP     DEATH

.L15FD
        CMP     #$0F
        BNE     L160A

        LDA     L033F
        BEQ     MA23

        LDA     #$7B
        BNE     L1645

.L160A
        CMP     #$14
        BNE     MA23

        LDA     #$1E
        STA     L0342
        LDA     L0320
        BNE     MA23

        LDY     #$25
        JSR     MAS2

        BNE     MA23

        JSR     MAS3

        EOR     #$FF
        ADC     #$1E
        STA     L0342
        BCS     L15FA

        CMP     #$E0
        BCC     MA23

        LDA     L0381
        BEQ     MA23

        LDA     L007F
        LSR     A
        ADC     L0365
        CMP     #$46
        BCC     L1640

        LDA     #$46
.L1640
        STA     L0365
        LDA     #$A0
.L1645
        JSR     MESS

.MA23
        LDA     L0343
        BEQ     L165C

        LDA     L0346
        CMP     #$08
        BCS     L165C

        JSR     LASLI2

        LDA     #$00
        STA     L0343
.L165C
        LDA     L0340
        BEQ     L1666

        JSR     DENGY

        BEQ     L166E

.L1666
        LDA     L0030
        BEQ     L1671

        DEC     L0030
        BNE     L1671

.L166E
        JSR     ECMOF

.L1671
        LDA     L0087
        BNE     L1694

        JMP     STARS

.SPIN
        JSR     DORND

        BPL     L1694

        PHA
        TYA
        TAX
        PLA
        LDY     #$00
        AND     (L001E),Y
        AND     #$0F
.SPIN2
        STA     L0093
        BEQ     L1694

.L168B
        LDA     #$00
        JSR     SFS1

        DEC     L0093
        BNE     L168B

.L1694
        RTS

.L1695
        EQUB    $00

.L1696
        EQUB    $09,$25,$09,$4A,$09,$6F,$09,$94
        EQUB    $09,$B9,$09,$DE,$09,$03,$0A,$28
        EQUB    $0A,$4D,$0A,$72,$0A,$97,$0A,$BC
        EQUB    $0A

.L16AF
        EQUB    $80,$40,$20,$10,$08,$04,$02,$01

.L16B7
        EQUB    $C0,$60,$30,$18,$0C,$06,$03,$03

.L16BF
        EQUB    $88

.L16C0
        EQUB    $44,$22,$11,$88

.LOIN
        STY     L0085
        LDA     #$80
        STA     L0083
        ASL     A
        STA     L0090
        LDA     L0036
        SBC     L0034
        BCS     L16D8

        EOR     #$FF
        ADC     #$01
        SEC
.L16D8
        STA     L001B
        LDA     L0037
        SBC     L0035
        BCS     L16E4

        EOR     #$FF
        ADC     #$01
.L16E4
        STA     L0081
        CMP     L001B
        BCC     L16ED

        JMP     L1797

.L16ED
        LDX     L0034
        CPX     L0036
        BCC     L1704

        DEC     L0090
        LDA     L0036
        STA     L0034
        STX     L0036
        TAX
        LDA     L0037
        LDY     L0035
        STA     L0035
        STY     L0037
.L1704
        LDA     L0035
        LSR     A
        LSR     A
        LSR     A
        ORA     #$60
        STA     L0008
        LDA     L0035
        AND     #$07
        TAY
        TXA
        AND     #$F8
        STA     L0007
        TXA
        AND     #$07
        TAX
        LDA     L16AF,X
        STA     L0082
        LDA     L0081
        LDX     #$FE
        STX     L0081
.L1726
        ASL     A
        BCS     L172D

        CMP     L001B
        BCC     L1730

.L172D
        SBC     L001B
        SEC
.L1730
        ROL     L0081
        BCS     L1726

        LDX     L001B
        INX
        LDA     L0037
        SBC     L0035
        BCS     L1769

        LDA     L0090
        BNE     L1748

        DEX
.L1742
        LDA     L0082
        EOR     (L0007),Y
        STA     (L0007),Y
.L1748
        LSR     L0082
        BCC     L1754

        ROR     L0082
        LDA     L0007
        ADC     #$08
        STA     L0007
.L1754
        LDA     L0083
        ADC     L0081
        STA     L0083
        BCC     L1763

        DEY
        BPL     L1763

        DEC     L0008
        LDY     #$07
.L1763
        DEX
        BNE     L1742

        LDY     L0085
        RTS

.L1769
        LDA     L0090
        BEQ     L1774

        DEX
.L176E
        LDA     L0082
        EOR     (L0007),Y
        STA     (L0007),Y
.L1774
        LSR     L0082
        BCC     L1780

        ROR     L0082
        LDA     L0007
        ADC     #$08
        STA     L0007
.L1780
        LDA     L0083
        ADC     L0081
        STA     L0083
        BCC     L1791

        INY
        CPY     #$08
        BNE     L1791

        INC     L0008
        LDY     #$00
.L1791
        DEX
        BNE     L176E

        LDY     L0085
        RTS

.L1797
        LDY     L0035
        TYA
        LDX     L0034
        CPY     L0037
        BCS     L17B0

        DEC     L0090
        LDA     L0036
        STA     L0034
        STX     L0036
        TAX
        LDA     L0037
        STA     L0035
        STY     L0037
        TAY
.L17B0
        LSR     A
        LSR     A
        LSR     A
        ORA     #$60
        STA     L0008
        TXA
        AND     #$F8
        STA     L0007
        TXA
        AND     #$07
        TAX
        LDA     L16AF,X
        STA     L0082
        LDA     L0035
        AND     #$07
        TAY
        LDA     L001B
        LDX     #$01
        STX     L001B
.L17D0
        ASL     A
        BCS     L17D7

        CMP     L0081
        BCC     L17DA

.L17D7
        SBC     L0081
        SEC
.L17DA
        ROL     L001B
        BCC     L17D0

        LDX     L0081
        INX
        LDA     L0036
        SBC     L0034
        BCC     L1814

        CLC
        LDA     L0090
        BEQ     L17F3

        DEX
.L17ED
        LDA     L0082
        EOR     (L0007),Y
        STA     (L0007),Y
.L17F3
        DEY
        BPL     L17FA

        DEC     L0008
        LDY     #$07
.L17FA
        LDA     L0083
        ADC     L001B
        STA     L0083
        BCC     L180E

        LSR     L0082
        BCC     L180E

        ROR     L0082
        LDA     L0007
        ADC     #$08
        STA     L0007
.L180E
        DEX
        BNE     L17ED

        LDY     L0085
        RTS

.L1814
        LDA     L0090
        BEQ     L181F

        DEX
.L1819
        LDA     L0082
        EOR     (L0007),Y
        STA     (L0007),Y
.L181F
        DEY
        BPL     L1826

        DEC     L0008
        LDY     #$07
.L1826
        LDA     L0083
        ADC     L001B
        STA     L0083
        BCC     L183B

        ASL     L0082
        BCC     L183B

        ROL     L0082
        LDA     L0007
        SBC     #$07
        STA     L0007
        CLC
.L183B
        DEX
        BNE     L1819

        LDY     L0085
.L1840
        RTS

        LDA     #$0F
        TAX
        JMP     OSBYTE

.NLIN3
        JSR     L339A

.NLIN4
        LDA     #$13
        BNE     NLIN2

.NLIN
        LDA     #$17
        INC     L002D
.NLIN2
        STA     L0035
        LDX     #$02
        STX     L0034
        LDX     #$FE
        STX     L0036
        BNE     HLOIN

.HLOIN2
        JSR     EDGES

        STY     L0035
        LDA     #$00
        STA     L0E00,Y
.HLOIN
        STY     L0085
        LDX     L0034
        CPX     L0036
        BEQ     L1840

        BCC     L1879

        LDA     L0036
        STA     L0034
        STX     L0036
        TAX
.L1879
        DEC     L0036
        LDA     L0035
        LSR     A
        LSR     A
        LSR     A
        ORA     #$60
        STA     L0008
        LDA     L0035
        AND     #$07
        STA     L0007
        TXA
        AND     #$F8
        TAY
        TXA
        AND     #$F8
        STA     L00D1
        LDA     L0036
        AND     #$F8
        SEC
        SBC     L00D1
        BEQ     L18D3

        LSR     A
        LSR     A
        LSR     A
        STA     L0082
        LDA     L0034
        AND     #$07
        TAX
        LDA     L18F5,X
        EOR     (L0007),Y
        STA     (L0007),Y
        TYA
        ADC     #$08
        TAY
        LDX     L0082
        DEX
        BEQ     L18C4

        CLC
.L18B7
        LDA     #$FF
        EOR     (L0007),Y
        STA     (L0007),Y
        TYA
        ADC     #$08
        TAY
        DEX
        BNE     L18B7

.L18C4
        LDA     L0036
        AND     #$07
        TAX
        LDA     L18EE,X
        EOR     (L0007),Y
        STA     (L0007),Y
        LDY     L0085
        RTS

.L18D3
        LDA     L0034
        AND     #$07
        TAX
        LDA     L18F5,X
        STA     L00D1
        LDA     L0036
        AND     #$07
        TAX
        LDA     L18EE,X
        AND     L00D1
        EOR     (L0007),Y
        STA     (L0007),Y
        LDY     L0085
        RTS

.L18EE
        EQUB    $80,$C0,$E0,$F0,$F8,$FC,$FE

.L18F5
        EQUB    $FF,$7F,$3F,$1F,$0F,$07,$03,$01

.L18FD
        LDA     L16AF,X
        EOR     (L0007),Y
        STA     (L0007),Y
        LDY     L0006
        RTS

.PIX1
        JSR     ADD

        STA     L0027
        TXA
        STA     L0F95,Y
.PIXEL2
        LDA     L0034
        BPL     L1919

        EOR     #$7F
        CLC
        ADC     #$01
.L1919
        EOR     #$80
        TAX
        LDA     L0035
        AND     #$7F
        CMP     #$60
        BCS     L196A

        LDA     L0035
        BPL     L192C

        EOR     #$7F
        ADC     #$01
.L192C
        STA     L00D1
        LDA     #$61
        SBC     L00D1
.PIXEL
        STY     L0006
        TAY
        LSR     A
        LSR     A
        LSR     A
        ORA     #$60
        STA     L0008
        TXA
        AND     #$F8
        STA     L0007
        TYA
        AND     #$07
        TAY
        TXA
        AND     #$07
        TAX
        LDA     L0088
        CMP     #$90
        BCS     L18FD

        LDA     L16B7,X
        EOR     (L0007),Y
        STA     (L0007),Y
        LDA     L0088
        CMP     #$50
        BCS     L1968

        DEY
        BPL     L1961

        LDY     #$01
.L1961
        LDA     L16B7,X
        EOR     (L0007),Y
        STA     (L0007),Y
.L1968
        LDY     L0006
.L196A
        RTS

.BLINE
        TXA
        ADC     L00E0
        STA     L0078
        LDA     L00E1
        ADC     L00D1
        STA     L0079
        LDA     L0092
        BEQ     L198C

        INC     L0092
.L197C
        LDY     L006B
        LDA     #$FF
        CMP     L0F0D,Y
        BEQ     L19ED

        STA     L0F0E,Y
        INC     L006B
        BNE     L19ED

.L198C
        LDA     L0072
        STA     L0034
        LDA     L0073
        STA     L0035
        LDA     L0074
        STA     L0036
        LDA     L0075
        STA     L0037
        LDA     L0076
        STA     L0038
        LDA     L0077
        STA     L0039
        LDA     L0078
        STA     L003A
        LDA     L0079
        STA     L003B
        JSR     LL145

        BCS     L197C

        LDA     L0090
        BEQ     L19C5

        LDA     L0034
        LDY     L0036
        STA     L0036
        STY     L0034
        LDA     L0035
        LDY     L0037
        STA     L0037
        STY     L0035
.L19C5
        LDY     L006B
        LDA     L0F0D,Y
        CMP     #$FF
        BNE     L19D9

        LDA     L0034
        STA     L0EC0,Y
        LDA     L0035
        STA     L0F0E,Y
        INY
.L19D9
        LDA     L0036
        STA     L0EC0,Y
        LDA     L0037
        STA     L0F0E,Y
        INY
        STY     L006B
        JSR     LOIN

        LDA     L0089
        BNE     L197C

.L19ED
        LDA     L0076
        STA     L0072
        LDA     L0077
        STA     L0073
        LDA     L0078
        STA     L0074
        LDA     L0079
        STA     L0075
        LDA     L0093
        CLC
        ADC     L0095
        STA     L0093
        RTS

.FLIP
        LDY     L03C3
.L1A08
        LDX     L0F82,Y
        LDA     L0F5C,Y
        STA     L0035
        STA     L0F82,Y
        TXA
        STA     L0034
        STA     L0F5C,Y
        LDA     L0FA8,Y
        STA     L0088
        JSR     PIXEL2

        DEY
        BNE     L1A08

        RTS

.STARS
        LDX     L0345
        BEQ     L1A33

        DEX
        BNE     L1A30

        JMP     STARS6

.L1A30
        JMP     STARS2

.L1A33
        LDY     L03C3
.STL1
        JSR     DV42

        LDA     L0082
        LSR     L001B
        ROR     A
        LSR     L001B
        ROR     A
        ORA     #$01
        STA     L0081
        LDA     L0FBB,Y
        SBC     L007E
        STA     L0FBB,Y
        LDA     L0FA8,Y
        STA     L0088
        SBC     L007F
        STA     L0FA8,Y
        JSR     L2817

        STA     L0027
        LDA     L001B
        ADC     L0F95,Y
        STA     L0026
        STA     L0082
        LDA     L0035
        ADC     L0027
        STA     L0027
        STA     L0083
        LDA     L0F5C,Y
        STA     L0034
        JSR     MLU2

        STA     L0025
        LDA     L001B
        ADC     L0F6F,Y
        STA     L0024
        LDA     L0034
        ADC     L0025
        STA     L0025
        EOR     L0033
        JSR     MLS1

        JSR     ADD

        STA     L0027
        STX     L0026
        EOR     L0032
        JSR     MLS2

        JSR     ADD

        STA     L0025
        STX     L0024
        LDX     L002B
        LDA     L0027
        EOR     L007C
        JSR     L27C8

        STA     L0081
        JSR     MUT2

        ASL     L001B
        ROL     A
        STA     L00D1
        LDA     #$00
        ROR     A
        ORA     L00D1
        JSR     ADD

        STA     L0025
        TXA
        STA     L0F6F,Y
        LDA     L0026
        STA     L0082
        LDA     L0027
        STA     L0083
        LDA     #$00
        STA     L001B
        LDA     L002A
        EOR     #$80
        JSR     PIX1

        LDA     L0025
        STA     L0034
        STA     L0F5C,Y
        AND     #$7F
        CMP     #$78
        BCS     L1AFD

        LDA     L0027
        STA     L0F82,Y
        STA     L0035
        AND     #$7F
        CMP     #$78
        BCS     L1AFD

        LDA     L0FA8,Y
        CMP     #$10
        BCC     L1AFD

        STA     L0088
.STC1
        JSR     PIXEL2

        DEY
        BEQ     L1AFC

        JMP     STL1

.L1AFC
        RTS

.L1AFD
        JSR     DORND

        ORA     #$04
        STA     L0035
        STA     L0F82,Y
        JSR     DORND

        ORA     #$08
        STA     L0034
        STA     L0F5C,Y
        JSR     DORND

        ORA     #$90
        STA     L0FA8,Y
        STA     L0088
        LDA     L0035
        JMP     STC1

.STARS6
        LDY     L03C3
.STL6
        JSR     DV42

        LDA     L0082
        LSR     L001B
        ROR     A
        LSR     L001B
        ROR     A
        ORA     #$01
        STA     L0081
        LDA     L0F5C,Y
        STA     L0034
        JSR     MLU2

        STA     L0025
        LDA     L0F6F,Y
        SBC     L001B
        STA     L0024
        LDA     L0034
        SBC     L0025
        STA     L0025
        JSR     L2817

        STA     L0027
        LDA     L0F95,Y
        SBC     L001B
        STA     L0026
        STA     L0082
        LDA     L0035
        SBC     L0027
        STA     L0027
        STA     L0083
        LDA     L0FBB,Y
        ADC     L007E
        STA     L0FBB,Y
        LDA     L0FA8,Y
        STA     L0088
        ADC     L007F
        STA     L0FA8,Y
        LDA     L0025
        EOR     L0032
        JSR     MLS1

        JSR     ADD

        STA     L0027
        STX     L0026
        EOR     L0033
        JSR     MLS2

        JSR     ADD

        STA     L0025
        STX     L0024
        LDA     L0027
        EOR     L007C
        LDX     L002B
        JSR     L27C8

        STA     L0081
        LDA     L0025
        STA     L0083
        EOR     #$80
        JSR     L28A2

        ASL     L001B
        ROL     A
        STA     L00D1
        LDA     #$00
        ROR     A
        ORA     L00D1
        JSR     ADD

        STA     L0025
        TXA
        STA     L0F6F,Y
        LDA     L0026
        STA     L0082
        LDA     L0027
        STA     L0083
        LDA     #$00
        STA     L001B
        LDA     L002A
        JSR     PIX1

        LDA     L0025
        STA     L0034
        STA     L0F5C,Y
        LDA     L0027
        STA     L0F82,Y
        STA     L0035
        AND     #$7F
        CMP     #$6E
        BCS     L1BEA

        LDA     L0FA8,Y
        CMP     #$A0
        BCS     L1BEA

        STA     L0088
.STC6
        JSR     PIXEL2

        DEY
        BEQ     L1BE9

        JMP     STL6

.L1BE9
        RTS

.L1BEA
        JSR     DORND

        AND     #$7F
        ADC     #$0A
        STA     L0FA8,Y
        STA     L0088
        LSR     A
        BCS     L1C0D

        LSR     A
        LDA     #$FC
        ROR     A
        STA     L0034
        STA     L0F5C,Y
        JSR     DORND

        STA     L0035
        STA     L0F82,Y
        JMP     STC6

.L1C0D
        JSR     DORND

        STA     L0034
        STA     L0F5C,Y
        LSR     A
        LDA     #$E6
        ROR     A
        STA     L0035
        STA     L0F82,Y
        BNE     STC6

.MAS1
        LDA     L0046,Y
        ASL     A
        STA     L0041
        LDA     L0047,Y
        ROL     A
        STA     L0042
        LDA     #$00
        ROR     A
        STA     L0043
        JSR     MVT3

        STA     L0048,X
        LDY     L0041
        STY     L0046,X
        LDY     L0042
        STY     L0047,X
        AND     #$7F
        RTS

.m
        LDA     #$00
.MAS2
        ORA     L0902,Y
        ORA     L0905,Y
        ORA     L0908,Y
        AND     #$7F
        RTS

.MAS3
        LDA     L0901,Y
        JSR     SQUA2

        STA     L0082
        LDA     L0904,Y
        JSR     SQUA2

        ADC     L0082
        BCS     L1C6D

        STA     L0082
        LDA     L0907,Y
        JSR     SQUA2

        ADC     L0082
        BCC     L1C6F

.L1C6D
        LDA     #$FF
.L1C6F
        RTS

.L1C70
        LDX     #$09
        CMP     #$19
        BCS     L1CCF

        DEX
        CMP     #$0A
        BCS     L1CCF

        DEX
        CMP     #$02
        BCS     L1CCF

        DEX
        BNE     L1CCF

.STATUS
        LDA     #$08
        JSR     TT66

        JSR     TT111

        LDA     #$07
        STA     L002C
        LDA     #$7E
        JSR     NLIN3

        LDA     #$E6
        LDY     L033E
        LDX     L0313,Y
        BEQ     L1CA5

        LDY     L03A7
        CPY     #$80
        ADC     #$01
.L1CA5
        JSR     plf

        LDA     #$7D
        JSR     spc

        LDA     #$13
        LDY     L038C
        BEQ     L1CB8

        CPY     #$32
        ADC     #$01
.L1CB8
        JSR     plf

        LDA     #$10
        JSR     spc

        LDA     L03A0
        BNE     L1C70

        TAX
        LDA     L039F
        LSR     A
        LSR     A
.L1CCB
        INX
        LSR     A
        BNE     L1CCB

.L1CCF
        TXA
        CLC
        ADC     #$15
        JSR     plf

        LDA     #$12
        JSR     plf2

        LDA     L036E
        CMP     #$1A
        BCC     L1CE7

        LDA     #$6B
        JSR     plf2

.L1CE7
        LDA     L0381
        BEQ     L1CF1

        LDA     #$6F
        JSR     plf2

.L1CF1
        LDA     L0380
        BEQ     L1CFB

        LDA     #$6C
        JSR     plf2

.L1CFB
        LDA     #$71
        STA     L0096
.L1CFF
        TAY
        LDX     L0311,Y
        BEQ     L1D08

        JSR     plf2

.L1D08
        INC     L0096
        LDA     L0096
        CMP     #$75
        BCC     L1CFF

        LDX     #$00
.L1D12
        STX     L0093
        LDY     L0368,X
        BEQ     L1D3C

        TXA
        CLC
        ADC     #$60
        JSR     spc

        LDA     #$67
        LDX     L0093
        LDY     L0368,X
        CPY     #$8F
        BNE     L1D2D

        LDA     #$68
.L1D2D
        CPY     #$97
        BNE     L1D33

        LDA     #$75
.L1D33
        CPY     #$32
        BNE     L1D39

        LDA     #$76
.L1D39
        JSR     plf2

.L1D3C
        LDX     L0093
        INX
        CPX     #$04
        BCC     L1D12

        RTS

.plf2
        JSR     plf

        LDX     #$06
        STX     L002C
        RTS

.MVT3
        LDA     L0043
        STA     L0083
        AND     #$80
        STA     L00D1
        EOR     L0048,X
        BMI     L1D70

        LDA     L0041
        CLC
        ADC     L0046,X
        STA     L0041
        LDA     L0042
        ADC     L0047,X
        STA     L0042
        LDA     L0043
        ADC     L0048,X
        AND     #$7F
        ORA     L00D1
        STA     L0043
        RTS

.L1D70
        LDA     L0083
        AND     #$7F
        STA     L0083
        LDA     L0046,X
        SEC
        SBC     L0041
        STA     L0041
        LDA     L0047,X
        SBC     L0042
        STA     L0042
        LDA     L0048,X
        AND     #$7F
        SBC     L0083
        ORA     #$80
        EOR     L00D1
        STA     L0043
        BCS     L1DA7

        LDA     #$01
        SBC     L0041
        STA     L0041
        LDA     #$00
        SBC     L0042
        STA     L0042
        LDA     #$00
        SBC     L0043
        AND     #$7F
        ORA     L00D1
        STA     L0043
.L1DA7
        RTS

.MVS5
        LDA     L0047,X
        AND     #$7F
        LSR     A
        STA     L00D1
        LDA     L0046,X
        SEC
        SBC     L00D1
        STA     L0082
        LDA     L0047,X
        SBC     #$00
        STA     L0083
        LDA     L0046,Y
        STA     L001B
        LDA     L0047,Y
        AND     #$80
        STA     L00D1
        LDA     L0047,Y
        AND     #$7F
        LSR     A
        ROR     L001B
        LSR     A
        ROR     L001B
        LSR     A
        ROR     L001B
        LSR     A
        ROR     L001B
        ORA     L00D1
        EOR     L009A
        STX     L0081
        JSR     ADD

        STA     L0041
        STX     L0040
        LDX     L0081
        LDA     L0047,Y
        AND     #$7F
        LSR     A
        STA     L00D1
        LDA     L0046,Y
        SEC
        SBC     L00D1
        STA     L0082
        LDA     L0047,Y
        SBC     #$00
        STA     L0083
        LDA     L0046,X
        STA     L001B
        LDA     L0047,X
        AND     #$80
        STA     L00D1
        LDA     L0047,X
        AND     #$7F
        LSR     A
        ROR     L001B
        LSR     A
        ROR     L001B
        LSR     A
        ROR     L001B
        LSR     A
        ROR     L001B
        ORA     L00D1
        EOR     #$80
        EOR     L009A
        STX     L0081
        JSR     ADD

        STA     L0047,Y
        STX     L0046,Y
        LDX     L0081
        LDA     L0040
        STA     L0046,X
        LDA     L0041
        STA     L0047,X
        RTS

.L1E34
        EQUB    $48,$76,$E8,$00

.pr2
        LDA     #$03
.L1E3A
        LDY     #$00
.TT11
        STA     L0080
        LDA     #$00
        STA     L0040
        STA     L0041
        STY     L0042
        STX     L0043
.BPRNT
        LDX     #$0B
        STX     L00D1
        PHP
        BCC     L1E53

        DEC     L00D1
        DEC     L0080
.L1E53
        LDA     #$0B
        SEC
        STA     L0086
        SBC     L0080
        STA     L0080
        INC     L0080
        LDY     #$00
        STY     L0083
        JMP     TT36

.TT35
        ASL     L0043
        ROL     L0042
        ROL     L0041
        ROL     L0040
        ROL     L0083
        LDX     #$03
.L1E71
        LDA     L0040,X
        STA     L0034,X
        DEX
        BPL     L1E71

        LDA     L0083
        STA     L0038
        ASL     L0043
        ROL     L0042
        ROL     L0041
        ROL     L0040
        ROL     L0083
        ASL     L0043
        ROL     L0042
        ROL     L0041
        ROL     L0040
        ROL     L0083
        CLC
        LDX     #$03
.L1E93
        LDA     L0040,X
        ADC     L0034,X
        STA     L0040,X
        DEX
        BPL     L1E93

        LDA     L0038
        ADC     L0083
        STA     L0083
        LDY     #$00
.TT36
        LDX     #$03
        SEC
.L1EA7
        LDA     L0040,X
        SBC     L1E34,X
        STA     L0034,X
        DEX
        BPL     L1EA7

        LDA     L0083
        SBC     #$17
        STA     L0038
        BCC     L1ECA

        LDX     #$03
.L1EBB
        LDA     L0034,X
        STA     L0040,X
        DEX
        BPL     L1EBB

        LDA     L0038
        STA     L0083
        INY
        JMP     TT36

.L1ECA
        TYA
        BNE     L1ED9

        LDA     L00D1
        BEQ     L1ED9

        DEC     L0080
        BPL     L1EE3

        LDA     #$20
        BNE     L1EE0

.L1ED9
        LDY     #$00
        STY     L00D1
        CLC
        ADC     #$30
.L1EE0
        JSR     TT26

.L1EE3
        DEC     L00D1
        BPL     L1EE9

        INC     L00D1
.L1EE9
        DEC     L0086
        BMI     L1F5B

        BNE     L1EF7

        PLP
        BCC     L1EF7

        LDA     #$2E
        JSR     TT26

.L1EF7
        JMP     TT35

.BELL
        LDA     #$07
.TT26
        STA     L00D2
        STY     L034F
        STX     L034E
        LDY     L0072
        CPY     #$FF
        BEQ     RR4

        CMP     #$07
        BEQ     L1F5C

        CMP     #$20
        BCS     L1F1E

        CMP     #$0A
        BEQ     L1F1A

        LDX     #$01
        STX     L002C
.L1F1A
        INC     L002D
        BNE     RR4

.L1F1E
        LDX     #$BF
        ASL     A
        ASL     A
        BCC     L1F26

        LDX     #$C1
.L1F26
        ASL     A
        BCC     L1F2A

        INX
.L1F2A
        STA     L001C
        STX     L001D
        LDA     L002C
        ASL     A
        ASL     A
        ASL     A
        STA     L0007
        INC     L002C
        LDA     L002D
        CMP     #$18
        BCC     L1F43

        JSR     TT66

        JMP     RR4

.L1F43
        ORA     #$60
.RREN
        STA     L0008
        LDY     #$07
.L1F49
        LDA     (L001C),Y
        EOR     (L0007),Y
        STA     (L0007),Y
        DEY
        BPL     L1F49

.RR4
        LDY     L034F
        LDX     L034E
        LDA     L00D2
        CLC
.L1F5B
        RTS

.L1F5C
        JSR     BEEP

        JMP     RR4

.DIALS
        LDA     #$D0
        STA     L0007
        LDA     #$78
        STA     L0008
        JSR     PZW

        STX     L0041
        STA     L0040
        LDA     #$0E
        STA     L0006
        LDA     L007D
        JSR     L2039

        LDA     #$00
        STA     L0082
        STA     L001B
        LDA     #$08
        STA     L0083
        LDA     L0031
        LSR     A
        LSR     A
        ORA     L0032
        EOR     #$80
        JSR     ADD

        JSR     DIL2

        LDA     L002A
        LDX     L002B
        BEQ     L1F9A

        SBC     #$01
.L1F9A
        JSR     ADD

        JSR     DIL2

        LDA     L008A
        AND     #$03
        BNE     L1F5B

        LDY     #$00
.L1FA8
        JSR     PZW

L1FA9 = L1FA8+1
        STX     L0040
        STA     L0041
        LDX     #$03
        STX     L0006
.L1FB3
        STY     L003A,X
        DEX
        BPL     L1FB3

        LDX     #$03
        LDA     L03A7
        LSR     A
        LSR     A
        STA     L0081
.L1FC1
        SEC
        SBC     #$10
        BCC     L1FD3

        STA     L0081
        LDA     #$10
        STA     L003A,X
        LDA     L0081
        DEX
        BPL     L1FC1

        BMI     L1FD7

.L1FD3
        LDA     L0081
        STA     L003A,X
.L1FD7
        LDA     L003A,Y
        STY     L001B
        JSR     DIL

        LDY     L001B
        INY
        CPY     #$04
        BNE     L1FD7

        LDA     #$78
        STA     L0008
        LDA     #$10
        STA     L0007
        LDA     L03A5
        JSR     DILX

        LDA     L03A6
        JSR     DILX

        LDA     L0365
        JSR     L2038

        JSR     PZW

        STX     L0041
        STA     L0040
        LDX     #$0B
        STX     L0006
        LDA     L0342
        JSR     DILX

        LDA     L0347
        JSR     DILX

        LDA     #$F0
        STA     L0006
        STA     L0041
        LDA     L0FD1
        JSR     DILX

        JMP     COMPAS

.PZW
        LDX     #$F0
        LDA     L008A
        AND     #$08
        AND     L03CA
        BEQ     L2033

        TXA
.L2032
        BIT     L0FA9
L2033 = L2032+1
        RTS

.DILX
        LSR     A
        LSR     A
.L2038
        LSR     A
.L2039
        LSR     A
.DIL
        STA     L0081
        LDX     #$FF
        STX     L0082
        CMP     L0006
        BCS     L2048

        LDA     L0041
        BNE     L204A

.L2048
        LDA     L0040
.L204A
        STA     L0091
        LDY     #$02
        LDX     #$03
.L2050
        LDA     L0081
        CMP     #$04
        BCC     L2070

        SBC     #$04
        STA     L0081
        LDA     L0082
.DL5
        AND     L0091
        STA     (L0007),Y
        INY
        STA     (L0007),Y
        INY
        STA     (L0007),Y
        TYA
        CLC
        ADC     #$06
        TAY
        DEX
        BMI     L208A

        BPL     L2050

.L2070
        EOR     #$03
        STA     L0081
        LDA     L0082
.L2076
        ASL     A
        AND     #$EF
        DEC     L0081
        BPL     L2076

        PHA
        LDA     #$00
        STA     L0082
        LDA     #$63
        STA     L0081
        PLA
        JMP     DL5

.L208A
        INC     L0008
        RTS

.DIL2
        LDY     #$01
        STA     L0081
.L2091
        SEC
        LDA     L0081
        SBC     #$04
        BCS     L20A6

        LDA     #$FF
        LDX     L0081
        STA     L0081
        LDA     L16BF,X
        AND     #$F0
        JMP     DLL12

.L20A6
        STA     L0081
        LDA     #$00
.DLL12
        STA     (L0007),Y
        INY
        STA     (L0007),Y
        INY
        STA     (L0007),Y
        INY
        STA     (L0007),Y
        TYA
        CLC
        ADC     #$05
        TAY
        CPY     #$1E
        BCC     L2091

        INC     L0008
        RTS

.ESCAPE
        JSR     RES2

        LDX     #$0B
        STX     L008C
        JSR     FRS1

        BCS     L20D2

        LDX     #$18
        JSR     FRS1

.L20D2
        LDA     #$08
        STA     L0061
        LDA     #$C2
        STA     L0064
        LSR     A
        STA     L0066
.L20DD
        JSR     MVEIT

        JSR     LL9

        DEC     L0066
        BNE     L20DD

        JSR     SCAN

        LDA     #$00
        LDX     #$10
.L20EE
        STA     L036F,X
        DEX
        BPL     L20EE

        STA     L038C
        STA     L0386
        LDA     #$46
        STA     L0365
        JMP     GOIN

.L2102
        LDA     #$00
        JSR     MAS4

        BEQ     L210C

        JMP     TA21

.L210C
        JSR     L2160

        JSR     EXNO3

        LDA     #$FA
        JMP     OOPS

.L2117
        LDA     L0030
        BNE     L2150

        LDA     L0066
        ASL     A
        BMI     L2102

        LSR     A
        TAX
        LDA     L1695,X
        STA     L0022
        LDA     L1696,X
        JSR     VCSUB

        LDA     L00D4
        ORA     L00D7
        ORA     L00DA
        AND     #$7F
        ORA     L00D3
        ORA     L00D6
        ORA     L00D9
        BNE     L2166

        LDA     L0066
        CMP     #$82
        BEQ     L2150

        LDY     #$1F
        LDA     (L0022),Y
        BIT     L216E
        BNE     L2150

        ORA     #$80
        STA     (L0022),Y
.L2150
        LDA     L0046
        ORA     L0049
        ORA     L004C
        BNE     TA87

        LDA     #$50
        JSR     OOPS

.TA87
        JSR     EXNO2

.L2160
        ASL     L0065
        SEC
        ROR     L0065
.L2165
        RTS

.L2166
        JSR     DORND

        CMP     #$10
        BCS     L2174

.M32
        LDY     #$20
L216E = M32+1
        LDA     (L0022),Y
        LSR     A
        BCS     L2177

.L2174
        JMP     TA19

.L2177
        JMP     ECBLB2

.TACTICS
        LDY     #$03
        STY     L0099
        INY
        STY     L009A
        LDA     #$16
        STA     L0094
        CPX     #$01
        BEQ     L2117

        CPX     #$02
        BNE     L21BB

        LDA     L006A
        AND     #$04
        BNE     L21A6

        LDA     L0328
        BNE     L2165

        JSR     DORND

        CMP     #$FD
        BCC     L2165

        AND     #$01
        ADC     #$08
        TAX
        BNE     TN6

.L21A6
        JSR     DORND

        CMP     #$F0
        BCC     L2165

        LDA     L032E
        CMP     #$04
        BCS     L21D4

        LDX     #$10
.TN6
        LDA     #$F1
        JMP     SFS1

.L21BB
        LDY     #$0E
        LDA     L0069
        CMP     (L001E),Y
        BCS     TA21

        INC     L0069
.TA21
        CPX     #$1E
        BNE     L21D5

        LDA     L033B
        BNE     L21D5

        LSR     L0066
        ASL     L0066
        LSR     L0061
.L21D4
        RTS

.L21D5
        JSR     DORND

        LDA     L006A
        LSR     A
        BCC     L21E1

        CPX     #$64
        BCS     L21D4

.L21E1
        LSR     A
        BCC     L21F3

        LDX     L038C
        CPX     #$28
        BCC     L21F3

        LDA     L006A
        ORA     #$04
        STA     L006A
        LSR     A
        LSR     A
.L21F3
        LSR     A
        BCS     L2203

        LSR     A
        LSR     A
        BCC     GOPL

        JMP     DOCKIT

.GOPL
        JSR     SPS1

        JMP     TA151

.L2203
        LSR     A
        BCC     L2211

        LDA     L0320
        BEQ     L2211

        LDA     L0066
        AND     #$81
        STA     L0066
.L2211
        LDX     #$08
.L2213
        LDA     L0046,X
        STA     L00D2,X
        DEX
        BPL     L2213

.TA19
        JSR     TAS2

        JSR     L28DE

        STA     L0093
        LDA     L008C
        CMP     #$01
        BNE     L222B

        JMP     TA20

.L222B
        CMP     #$0E
        BNE     L223B

        JSR     DORND

        CMP     #$C8
        BCC     L223B

        LDX     #$17
        JMP     TN6

.L223B
        JSR     DORND

        CMP     #$FA
        BCC     L2249

        JSR     DORND

        ORA     #$68
        STA     L0063
.L2249
        LDY     #$0E
        LDA     (L001E),Y
        LSR     A
        CMP     L0069
        BCC     L2294

        LSR     A
        LSR     A
        CMP     L0069
        BCC     L226D

        JSR     DORND

        CMP     #$E6
        BCC     L226D

        LDX     L008C
        LDA     L563D,X
        BPL     L226D

        LDA     #$00
        STA     L0066
        JMP     SESCP

.L226D
        LDA     L0065
        AND     #$07
        BEQ     L2294

        STA     L00D1
        JSR     DORND

        AND     #$1F
        CMP     L00D1
        BCS     L2294

        LDA     L0030
        BNE     L2294

        DEC     L0065
        LDA     L008C
        CMP     #$1D
        BNE     L2291

        LDX     #$1E
        LDA     L0066
        JMP     SFS1

.L2291
        JMP     SFRMIS

.L2294
        LDA     #$00
        JSR     MAS4

        AND     #$E0
        BNE     L22C6

        LDX     L0093
        CPX     #$A0
        BCC     L22C6

        LDY     #$13
        LDA     (L001E),Y
        AND     #$F8
        BEQ     L22C6

        LDA     L0065
        ORA     #$40
        STA     L0065
        CPX     #$A3
        BCC     L22C6

        LDA     (L001E),Y
        LSR     A
        JSR     OOPS

        DEC     L0062
        LDA     L0030
        BNE     L2311

        LDA     #$08
        JMP     NOISE

.L22C6
        LDA     L004D
        CMP     #$03
        BCS     L22D4

        LDA     L0047
        ORA     L004A
        AND     #$FE
        BEQ     L22E6

.L22D4
        JSR     DORND

        ORA     #$80
        CMP     L0066
        BCS     L22E6

.TA20
        JSR     TAS6

        LDA     L0093
        EOR     #$80
.TA152
        STA     L0093
.L22E6
        LDY     #$10
        JSR     TAS3

        TAX
        JSR     nroll

        STA     L0064
        LDA     L0063
        ASL     A
        CMP     #$20
        BCS     L2305

        LDY     #$16
        JSR     TAS3

        TAX
        EOR     L0064
        JSR     nroll

        STA     L0063
.L2305
        LDA     L0093
        BMI     L2312

        CMP     L0094
        BCC     L2312

        LDA     #$03
        STA     L0062
.L2311
        RTS

.L2312
        AND     #$7F
        CMP     #$12
        BCC     L2323

        LDA     #$FF
        LDX     L008C
        CPX     #$01
        BNE     L2321

        ASL     A
.L2321
        STA     L0062
.L2323
        RTS

.TA151
        JSR     L28DE

        CMP     #$98
        BCC     L232F

        LDX     #$00
        STX     L009A
.L232F
        JMP     TA152

.nroll
        EOR     #$80
        AND     #$80
        STA     L00D1
        TXA
        ASL     A
        CMP     L009A
        BCC     L2343

        LDA     L0099
        ORA     L00D1
        RTS

.L2343
        LDA     L00D1
        RTS

.DOCKIT
        LDA     #$06
        STA     L009A
        LSR     A
        STA     L0099
        LDA     #$1D
        STA     L0094
        LDA     L0320
        BNE     L2359

.L2356
        JMP     GOPL

.L2359
        JSR     VCSU1

        LDA     L00D4
        ORA     L00D7
        ORA     L00DA
        AND     #$7F
        BNE     L2356

        JSR     TA2

        LDA     L0081
        STA     L0040
        JSR     TAS2

        LDY     #$0A
        JSR     TAS4

        BMI     L239A

        CMP     #$23
        BCC     L239A

        JSR     L28DE

        CMP     #$A2
        BCS     L23B4

        LDA     L0040
        CMP     #$9D
        BCC     L238C

        LDA     L008C
        BMI     L23B4

.L238C
        JSR     TAS6

        JSR     TA151

.PH22
        LDX     #$00
        STX     L0062
        INX
        STX     L0061
        RTS

.L239A
        JSR     VCSU1

        JSR     DCS1

        JSR     DCS1

        JSR     TAS2

        JSR     TAS6

        JMP     TA151

.L23AC
        INC     L0062
        LDA     #$7F
        STA     L0063
        BNE     L23F9

.L23B4
        LDX     #$00
        STX     L009A
        STX     L0064
        LDA     L008C
        BPL     L23DE

        EOR     L0034
        EOR     L0035
        ASL     A
        LDA     #$02
        ROR     A
        STA     L0063
        LDA     L0034
        ASL     A
        CMP     #$0C
        BCS     PH22

        LDA     L0035
        ASL     A
        LDA     #$02
        ROR     A
        STA     L0064
        LDA     L0035
        ASL     A
        CMP     #$0C
        BCS     PH22

.L23DE
        STX     L0063
        LDA     L005C
        STA     L0034
        LDA     L005E
        STA     L0035
        LDA     L0060
        STA     L0036
        LDY     #$10
        JSR     TAS4

        ASL     A
        CMP     #$42
        BCS     L23AC

        JSR     PH22

.L23F9
        LDA     L00DC
        BNE     L2402

        ASL     L006A
        SEC
        ROR     L006A
.L2402
        RTS

.VCSU1
        LDA     #$25
        STA     L0022
        LDA     #$09
.VCSUB
        STA     L0023
        LDY     #$02
        JSR     TAS1

        LDY     #$05
        JSR     TAS1

        LDY     #$08
.TAS1
        LDA     (L0022),Y
        EOR     #$80
        STA     L0043
        DEY
        LDA     (L0022),Y
        STA     L0042
        DEY
        LDA     (L0022),Y
        STA     L0041
        STY     L0080
        LDX     L0080
        JSR     MVT3

        LDY     L0080
        STA     L00D4,X
        LDA     L0042
        STA     L00D3,X
        LDA     L0041
        STA     L00D2,X
        RTS

.TAS4
        LDX     L0925,Y
        STX     L0081
        LDA     L0034
        JSR     MULT12

        LDX     L0927,Y
        STX     L0081
        LDA     L0035
        JSR     MAD

        STA     L0083
        STX     L0082
        LDX     L0929,Y
        STX     L0081
        LDA     L0036
        JMP     MAD

.TAS6
        LDA     L0034
        EOR     #$80
        STA     L0034
        LDA     L0035
        EOR     #$80
        STA     L0035
        LDA     L0036
        EOR     #$80
        STA     L0036
        RTS

.DCS1
        JSR     L2473

.L2473
        LDA     L092F
        LDX     #$00
        JSR     TAS7

        LDA     L0931
        LDX     #$03
        JSR     TAS7

        LDA     L0933
        LDX     #$06
.TAS7
        ASL     A
        STA     L0082
        LDA     #$00
        ROR     A
        EOR     #$80
        EOR     L00D4,X
        BMI     L249F

        LDA     L0082
        ADC     L00D2,X
        STA     L00D2,X
        BCC     TS72

        INC     L00D3,X
.TS72
        RTS

.L249F
        LDA     L00D2,X
        SEC
        SBC     L0082
        STA     L00D2,X
        LDA     L00D3,X
        SBC     #$00
        STA     L00D3,X
        BCS     TS72

        LDA     L00D2,X
        EOR     #$FF
        ADC     #$01
        STA     L00D2,X
        LDA     L00D3,X
        EOR     #$FF
        ADC     #$00
        STA     L00D3,X
        LDA     L00D4,X
        EOR     #$80
        STA     L00D4,X
        JMP     TS72

.L24C7
        CLC
        LDA     L004E
        BNE     L2505

        LDA     L008C
        BMI     L2505

        LDA     L0065
        AND     #$20
        ORA     L0047
        ORA     L004A
        BNE     L2505

        LDA     L0046
        JSR     SQUA2

        STA     L0083
        LDA     L001B
        STA     L0082
        LDA     L0049
        JSR     SQUA2

        TAX
        LDA     L001B
        ADC     L0082
        STA     L0082
        TXA
        ADC     L0083
        BCS     L2506

        STA     L0083
        LDY     #$02
        LDA     (L001E),Y
        CMP     L0083
        BNE     L2505

        DEY
        LDA     (L001E),Y
        CMP     L0082
.L2505
        RTS

.L2506
        CLC
        RTS

.FRS1
        JSR     ZINF

        LDA     #$1C
        STA     L0049
        LSR     A
        STA     L004C
        LDA     #$80
        STA     L004B
        LDA     L0045
        ASL     A
        ORA     #$80
        STA     L0066
.fq1
        LDA     #$60
        STA     L0054
        ORA     #$80
        STA     L005C
        LDA     L007D
        ROL     A
        STA     L0061
        TXA
        JMP     NWSHP

.FRMIS
        LDX     #$01
        JSR     FRS1

        BCC     L2589

        LDX     L0045
        JSR     GINF

        LDA     L0311,X
        JSR     ANGRY

        LDY     #$00
        JSR     ABORT

        DEC     L038B
        LDA     #$30
        JMP     NOISE

.ANGRY
        CMP     #$02
        BEQ     AN2

        LDY     #$24
        LDA     (L0020),Y
        AND     #$20
        BEQ     L255C

        JSR     AN2

.L255C
        LDY     #$20
        LDA     (L0020),Y
        BEQ     L2505

        ORA     #$80
        STA     (L0020),Y
        LDY     #$1C
        LDA     #$02
        STA     (L0020),Y
        ASL     A
        LDY     #$1E
        STA     (L0020),Y
        LDA     L008C
        CMP     #$0B
        BCC     L257F

        LDY     #$24
        LDA     (L0020),Y
        ORA     #$04
        STA     (L0020),Y
.L257F
        RTS

.AN2
        LDA     L0949
        ORA     #$04
        STA     L0949
        RTS

.L2589
        LDA     #$C9
        JMP     MESS

.SESCP
        LDX     #$03
.L2590
        LDA     #$FE
.SFS1
        STA     L0006
        TXA
        PHA
        LDA     L001E
        PHA
        LDA     L001F
        PHA
        LDA     L0020
        PHA
        LDA     L0021
        PHA
        LDY     #$24
.L25A4
        LDA     L0046,Y
        STA     L0100,Y
        LDA     (L0020),Y
        STA     L0046,Y
        DEY
        BPL     L25A4

        LDA     L006A
        AND     #$1C
        STA     L006A
        LDA     L008C
        CMP     #$02
        BNE     L25DB

        TXA
        PHA
        LDA     #$20
        STA     L0061
        LDX     #$00
        LDA     L0050
        JSR     SFS2

        LDX     #$03
        LDA     L0052
        JSR     SFS2

        LDX     #$06
        LDA     L0054
        JSR     SFS2

        PLA
        TAX
.L25DB
        LDA     L0006
        STA     L0066
        LSR     L0063
        ASL     L0063
        TXA
        CMP     #$09
        BCS     L25FE

        CMP     #$04
        BCC     L25FE

        PHA
        JSR     DORND

        ASL     A
        STA     L0064
        TXA
        AND     #$0F
        STA     L0061
        LDA     #$FF
        ROR     A
        STA     L0063
        PLA
.L25FE
        JSR     NWSHP

        PLA
        STA     L0021
        PLA
        STA     L0020
        LDX     #$24
.L2609
        LDA     L0100,X
        STA     L0046,X
        DEX
        BPL     L2609

        PLA
        STA     L001F
        PLA
        STA     L001E
        PLA
        TAX
        RTS

.SFS2
        ASL     A
        STA     L0082
        LDA     #$00
        ROR     A
        JMP     MVT1

.LL164
        LDA     #$38
        JSR     NOISE

        LDA     #$01
        STA     L0348
        LDA     #$04
        JSR     HFS2

        DEC     L0348
        RTS

.LAUN
        LDA     #$30
        JSR     NOISE

        LDA     #$08
.HFS2
        STA     L0095
        JSR     TTX66

.L2642
        LDX     #$80
        STX     L00D2
        LDX     #$60
        STX     L00E0
        LDX     #$00
        STX     L0096
        STX     L00D3
        STX     L00E1
.L2652
        JSR     HFL1

        INC     L0096
        LDX     L0096
        CPX     #$08
        BNE     L2652

        RTS

.HFL1
        LDA     L0096
        AND     #$07
        CLC
        ADC     #$08
        STA     L0040
.L2667
        LDA     #$01
        STA     L006B
        JSR     CIRCLE2

        ASL     L0040
        BCS     L2678

        LDA     L0040
        CMP     #$A0
        BCC     L2667

.L2678
        RTS

.STARS2
        LDA     #$00
        CPX     #$02
        ROR     A
        STA     L0099
        EOR     #$80
        STA     L009A
        JSR     ST2

        LDY     L03C3
.STL2
        LDA     L0FA8,Y
        STA     L0088
        LSR     A
        LSR     A
        LSR     A
        JSR     DV41

        LDA     L001B
        EOR     L009A
        STA     L0083
        LDA     L0F6F,Y
        STA     L001B
        LDA     L0F5C,Y
        STA     L0034
        JSR     ADD

        STA     L0083
        STX     L0082
        LDA     L0F82,Y
        STA     L0035
        EOR     L007B
        LDX     L002B
        JSR     L27C8

        JSR     ADD

        STX     L0024
        STA     L0025
        LDX     L0F95,Y
        STX     L0082
        LDX     L0035
        STX     L0083
        LDX     L002B
        EOR     L007C
        JSR     L27C8

        JSR     ADD

        STX     L0026
        STA     L0027
        LDX     L0031
        EOR     L0032
        JSR     L27C8

        STA     L0081
        LDA     L0024
        STA     L0082
        LDA     L0025
        STA     L0083
        EOR     #$80
        JSR     MAD

        STA     L0025
        TXA
        STA     L0F6F,Y
        LDA     L0026
        STA     L0082
        LDA     L0027
        STA     L0083
        JSR     MAD

        STA     L0083
        STX     L0082
        LDA     #$00
        STA     L001B
        LDA     L008D
        JSR     PIX1

        LDA     L0025
        STA     L0F5C,Y
        STA     L0034
        AND     #$7F
        CMP     #$74
        BCS     L2748

        LDA     L0027
        STA     L0F82,Y
        STA     L0035
        AND     #$7F
        CMP     #$74
        BCS     L275B

.L2724
        JSR     PIXEL2

        DEY
        BEQ     ST2

        JMP     STL2

.ST2
        LDA     L008D
        EOR     L0099
        STA     L008D
        LDA     L0032
        EOR     L0099
        STA     L0032
        EOR     #$80
        STA     L0033
        LDA     L007B
        EOR     L0099
        STA     L007B
        EOR     #$80
        STA     L007C
        RTS

.L2748
        JSR     DORND

        STA     L0035
        STA     L0F82,Y
        LDA     #$73
        ORA     L0099
        STA     L0034
        STA     L0F5C,Y
        BNE     L276C

.L275B
        JSR     DORND

        STA     L0034
        STA     L0F5C,Y
        LDA     #$6E
        ORA     L0033
        STA     L0035
        STA     L0F82,Y
.L276C
        JSR     DORND

        ORA     #$08
        STA     L0088
        STA     L0FA8,Y
        BNE     L2724

.L2778
        STA     L0040
        STA     L0041
        STA     L0042
        STA     L0043
        CLC
        RTS

.MULT3
        STA     L0082
        AND     #$7F
        STA     L0042
        LDA     L0081
        AND     #$7F
        BEQ     L2778

        SEC
        SBC     #$01
        STA     L00D1
        LDA     L001C
        LSR     L0042
        ROR     A
        STA     L0041
        LDA     L001B
        ROR     A
        STA     L0040
        LDA     #$00
        LDX     #$18
.L27A3
        BCC     L27A7

        ADC     L00D1
.L27A7
        ROR     A
        ROR     L0042
        ROR     L0041
        ROR     L0040
        DEX
        BNE     L27A3

        STA     L00D1
        LDA     L0082
        EOR     L0081
        AND     #$80
        ORA     L00D1
        STA     L0043
        RTS

.MLS2
        LDX     L0024
        STX     L0082
        LDX     L0025
        STX     L0083
.MLS1
        LDX     L0031
.L27C8
        STX     L001B
        TAX
        AND     #$80
        STA     L00D1
        TXA
        AND     #$7F
        BEQ     L2838

        TAX
        DEX
        STX     L0006
        LDA     #$00
        LSR     L001B
        BCC     L27E0

        ADC     L0006
.L27E0
        ROR     A
        ROR     L001B
        BCC     L27E7

        ADC     L0006
.L27E7
        ROR     A
        ROR     L001B
        BCC     L27EE

        ADC     L0006
.L27EE
        ROR     A
        ROR     L001B
        BCC     L27F5

        ADC     L0006
.L27F5
        ROR     A
        ROR     L001B
        BCC     L27FC

        ADC     L0006
.L27FC
        ROR     A
        ROR     L001B
        LSR     A
        ROR     L001B
        LSR     A
        ROR     L001B
        LSR     A
        ROR     L001B
        ORA     L00D1
        RTS

.SQUA
        AND     #$7F
.SQUA2
        STA     L001B
        TAX
        BNE     L2824

.L2812
        CLC
        STX     L001B
        TXA
        RTS

.L2817
        LDA     L0F82,Y
        STA     L0035
.MLU2
        AND     #$7F
        STA     L001B
.MULTU
        LDX     L0081
        BEQ     L2812

.L2824
        DEX
        STX     L00D1
        LDA     #$00
        LDX     #$08
        LSR     L001B
.L282D
        BCC     L2831

        ADC     L00D1
.L2831
        ROR     A
        ROR     L001B
        DEX
        BNE     L282D

        RTS

.L2838
        STA     L001C
        STA     L001B
        RTS

.FMLTU2
        AND     #$1F
        TAX
        LDA     L07C0,X
        STA     L0081
        LDA     L0040
.FMLTU
        EOR     #$FF
        SEC
        ROR     A
        STA     L001B
        LDA     #$00
.L284F
        BCS     L2859

        ADC     L0081
        ROR     A
        LSR     L001B
        BNE     L284F

        RTS

.L2859
        LSR     A
        LSR     L001B
        BNE     L284F

        RTS

        LDX     L0081
        BEQ     L2812

        DEX
        STX     L00D1
        LDA     #$00
        LDX     #$08
        LSR     L001B
.L286C
        BCC     L2870

        ADC     L00D1
.L2870
        ROR     A
        ROR     L001B
        DEX
        BNE     L286C

        RTS

.L2877
        STX     L0081
.MLTU2
        EOR     #$FF
        LSR     A
        STA     L001C
        LDA     #$00
        LDX     #$10
        ROR     L001B
.L2884
        BCS     L2891

        ADC     L0081
        ROR     A
        ROR     L001C
        ROR     L001B
        DEX
        BNE     L2884

        RTS

.L2891
        LSR     A
        ROR     L001C
        ROR     L001B
        DEX
        BNE     L2884

        RTS

        LDX     L0031
        STX     L001B
.MUT2
        LDX     L0025
        STX     L0083
.L28A2
        LDX     L0024
        STX     L0082
.MULT1
        TAX
        AND     #$7F
        LSR     A
        STA     L001B
        TXA
        EOR     L0081
        AND     #$80
        STA     L00D1
        LDA     L0081
        AND     #$7F
        BEQ     L28D1

        TAX
        DEX
        STX     L0006
        LDA     #$00
        LDX     #$07
.L28C1
        BCC     L28C5

        ADC     L0006
.L28C5
        ROR     A
        ROR     L001B
        DEX
        BNE     L28C1

        LSR     A
        ROR     L001B
        ORA     L00D1
        RTS

.L28D1
        STA     L001B
        RTS

.MULT12
        JSR     MULT1

        STA     L0083
        LDA     L001B
        STA     L0082
        RTS

.L28DE
        LDY     #$0A
.TAS3
        LDX     L0046,Y
        STX     L0081
        LDA     L0034
        JSR     MULT12

        LDX     L0048,Y
        STX     L0081
        LDA     L0035
        JSR     MAD

        STA     L0083
        STX     L0082
        LDX     L004A,Y
        STX     L0081
        LDA     L0036
.MAD
        JSR     MULT1

.ADD
        STA     L0006
        AND     #$80
        STA     L00D1
        EOR     L0083
        BMI     L2916

        LDA     L0082
        CLC
        ADC     L001B
        TAX
        LDA     L0083
        ADC     L0006
        ORA     L00D1
        RTS

.L2916
        LDA     L0083
        AND     #$7F
        STA     L0080
        LDA     L001B
        SEC
        SBC     L0082
        TAX
        LDA     L0006
        AND     #$7F
        SBC     L0080
        BCS     L2938

        STA     L0080
        TXA
        EOR     #$FF
        ADC     #$01
        TAX
        LDA     #$00
        SBC     L0080
        ORA     #$80
.L2938
        EOR     L00D1
        RTS

.TIS1
        STX     L0081
        EOR     #$80
        JSR     MAD

        TAX
        AND     #$80
        STA     L00D1
        TXA
        AND     #$7F
        LDX     #$FE
        STX     L0006
.L294E
        ASL     A
        CMP     #$60
        BCC     L2955

        SBC     #$60
.L2955
        ROL     L0006
        BCS     L294E

        LDA     L0006
        ORA     L00D1
        RTS

.DV42
        LDA     L0FA8,Y
.DV41
        STA     L0081
        LDA     L007D
.DVID4
        LDX     #$08
        ASL     A
        STA     L001B
        LDA     #$00
.L296C
        ROL     A
        BCS     L2973

        CMP     L0081
        BCC     L2976

.L2973
        SBC     L0081
        SEC
.L2976
        ROL     L001B
        DEX
        BNE     L296C

        JMP     L47F3

.DVID3B2
        STA     L001D
        LDA     L004C
        STA     L0081
        LDA     L004D
        STA     L0082
        LDA     L004E
        STA     L0083
        LDA     L001B
        ORA     #$01
        STA     L001B
        LDA     L001D
        EOR     L0083
        AND     #$80
        STA     L00D1
        LDY     #$00
        LDA     L001D
        AND     #$7F
.L29A0
        CMP     #$40
        BCS     L29AC

        ASL     L001B
        ROL     L001C
        ROL     A
        INY
        BNE     L29A0

.L29AC
        STA     L001D
        LDA     L0083
        AND     #$7F
        BMI     L29BC

.L29B4
        DEY
        ASL     L0081
        ROL     L0082
        ROL     A
        BPL     L29B4

.L29BC
        STA     L0081
        LDA     #$FE
        STA     L0082
        LDA     L001D
        JSR     L47F7

        LDA     #$00
        STA     L0041
        STA     L0042
        STA     L0043
        TYA
        BPL     L29F0

        LDA     L0082
.L29D4
        ASL     A
        ROL     L0041
        ROL     L0042
        ROL     L0043
        INY
        BNE     L29D4

        STA     L0040
        LDA     L0043
        ORA     L00D1
        STA     L0043
        RTS

.L29E7
        LDA     L0082
        STA     L0040
        LDA     L00D1
        STA     L0043
        RTS

.L29F0
        BEQ     L29E7

        LDA     L0082
.L29F4
        LSR     A
        DEY
        BNE     L29F4

        STA     L0040
        LDA     L00D1
        STA     L0043
        RTS

.cntr
        LDA     L033F
        BNE     L2A09

        LDA     L03C7
        BNE     L2A15

.L2A09
        TXA
        BPL     L2A0F

        DEX
        BMI     L2A15

.L2A0F
        INX
        BNE     L2A15

        DEX
        BEQ     L2A0F

.L2A15
        RTS

.BUMP2
        STA     L00D1
        TXA
        CLC
        ADC     L00D1
        TAX
        BCC     L2A21

        LDX     #$FF
.L2A21
        BPL     L2A33

.L2A23
        LDA     L00D1
        RTS

.REDU2
        STA     L00D1
        TXA
        SEC
        SBC     L00D1
        TAX
        BCS     L2A31

        LDX     #$01
.L2A31
        BPL     L2A23

.L2A33
        LDA     L03C8
        BNE     L2A23

        LDX     #$80
        BMI     L2A23

.ARCTAN
        LDA     L001B
        EOR     L0081
        STA     L0006
        LDA     L0081
        BEQ     L2A6B

        ASL     A
        STA     L0081
        LDA     L001B
        ASL     A
        CMP     L0081
        BCS     L2A59

        JSR     ARS1

        SEC
.L2A54
        LDX     L0006
        BMI     L2A6E

        RTS

.L2A59
        LDX     L0081
        STA     L0081
        STX     L001B
        TXA
        JSR     ARS1

        STA     L00D1
        LDA     #$40
        SBC     L00D1
        BCS     L2A54

.L2A6B
        LDA     #$3F
        RTS

.L2A6E
        STA     L00D1
        LDA     #$80
        SBC     L00D1
        RTS

.ARS1
        JSR     LL28

        LDA     L0082
        LSR     A
        LSR     A
        LSR     A
        TAX
        LDA     L07E0,X
.L2A81
        RTS

.LASLI
        JSR     DORND

        AND     #$07
        ADC     #$5C
        STA     L0FCF
        JSR     DORND

        AND     #$07
        ADC     #$7C
        STA     L0FCE
        LDA     L0347
        ADC     #$08
        STA     L0347
        JSR     DENGY

.LASLI2
        LDA     L0087
        BNE     L2A81

        LDA     #$20
        LDY     #$E0
        JSR     L2AB0

        LDA     #$30
        LDY     #$D0
.L2AB0
        STA     L0036
        LDA     L0FCE
        STA     L0034
        LDA     L0FCF
        STA     L0035
        LDA     #$BF
        STA     L0037
        JSR     LOIN

        LDA     L0FCE
        STA     L0034
        LDA     L0FCF
        STA     L0035
        STY     L0036
        LDA     #$BF
        STA     L0037
        JMP     LOIN

        EQUB    $8C,$E7,$8D,$ED,$8A,$E6,$C1,$C8
        EQUB    $C8,$8B,$E0,$8A,$E6,$D6,$C5,$C6
        EQUB    $C1,$CA,$95,$9D,$9C,$97

.tnpr
        STA     L03AD
        LDA     #$01
        PHA
        LDX     #$0C
        CPX     L03AD
        BCC     L2B04

.L2AF9
        ADC     L036F,X
        DEX
        BPL     L2AF9

        CMP     L036E
        PLA
        RTS

.L2B04
        LDY     L03AD
        LDA     L036F,Y
        CMP     #$C8
        PLA
        RTS

.TT20
        JSR     L2B11

.L2B11
        JSR     TT54

.TT54
        LDA     L006C
        CLC
        ADC     L006E
        TAX
        LDA     L006D
        ADC     L006F
        TAY
        LDA     L006E
        STA     L006C
        LDA     L006F
        STA     L006D
        LDA     L0071
        STA     L006F
        LDA     L0070
        STA     L006E
        CLC
        TXA
        ADC     L006E
        STA     L0070
        TYA
        ADC     L006F
        STA     L0071
        RTS

.TT146
        LDA     L03BF
        ORA     L03C0
        BNE     L2B46

        INC     L002D
        RTS

.L2B46
        LDA     #$BF
        JSR     TT68

        LDX     L03BF
        LDY     L03C0
        SEC
        JSR     pr5

        LDA     #$C3
.TT60
        JSR     L339A

.TTX69
        INC     L002D
.TT69
        LDA     #$80
        STA     L0072
.TT67
        LDA     #$0C
        JMP     L339A

.L2B65
        LDA     #$AD
        JSR     L339A

        JMP     TT72

.spc
        JSR     L339A

        JMP     TT162

.TT25
        LDA     #$01
        JSR     TT66

        LDA     #$09
        STA     L002C
        LDA     #$A3
        JSR     L339A

        JSR     NLIN

        JSR     TTX69

        INC     L002D
        JSR     TT146

        LDA     #$C2
        JSR     TT68

        LDA     L03B8
        CLC
        ADC     #$01
        LSR     A
        CMP     #$02
        BEQ     L2B65

        LDA     L03B8
        BCC     L2BA4

        SBC     #$05
        CLC
.L2BA4
        ADC     #$AA
        JSR     L339A

.TT72
        LDA     L03B8
        LSR     A
        LSR     A
        CLC
        ADC     #$A8
        JSR     TT60

        LDA     #$A2
        JSR     TT68

        LDA     L03B9
        CLC
        ADC     #$B1
        JSR     TT60

        LDA     #$C4
        JSR     TT68

        LDX     L03BA
        INX
        CLC
        JSR     pr2

        JSR     TTX69

        LDA     #$C0
        JSR     TT68

        SEC
        LDX     L03BB
        JSR     pr2

        LDA     #$C6
        JSR     TT60

        LDA     #$28
        JSR     L339A

        LDA     L0070
        BMI     L2BF4

        LDA     #$BC
        JSR     L339A

        JMP     TT76

.L2BF4
        LDA     L0071
        LSR     A
        LSR     A
        PHA
        AND     #$07
        CMP     #$03
        BCS     L2C04

        ADC     #$E3
        JSR     spc

.L2C04
        PLA
        LSR     A
        LSR     A
        LSR     A
        CMP     #$06
        BCS     L2C11

        ADC     #$E6
        JSR     spc

.L2C11
        LDA     L006F
        EOR     L006D
        AND     #$07
        STA     L0073
        CMP     #$06
        BCS     L2C22

        ADC     #$EC
        JSR     spc

.L2C22
        LDA     L0071
        AND     #$03
        CLC
        ADC     L0073
        AND     #$07
        ADC     #$F2
        JSR     L339A

.TT76
        LDA     #$53
        JSR     L339A

        LDA     #$29
        JSR     TT60

        LDA     #$C1
        JSR     TT68

        LDX     L03BD
        LDY     L03BE
        JSR     pr6

        JSR     TT162

        LDA     #$00
        STA     L0072
        LDA     #$4D
        JSR     L339A

        LDA     #$E2
        JSR     TT60

        LDA     #$FA
        JSR     TT68

        LDA     L0071
        LDX     L006F
        AND     #$0F
        CLC
        ADC     #$0B
        TAY
        JSR     pr5

        JSR     TT162

        LDA     #$6B
        JSR     TT26

        LDA     #$6D
        JMP     TT26

.TT24
        LDA     L006D
        AND     #$07
        STA     L03B8
        LDA     L006E
        LSR     A
        LSR     A
        LSR     A
        AND     #$07
        STA     L03B9
        LSR     A
        BNE     L2C94

        LDA     L03B8
        ORA     #$02
        STA     L03B8
.L2C94
        LDA     L03B8
        EOR     #$07
        CLC
        STA     L03BA
        LDA     L006F
        AND     #$03
        ADC     L03BA
        STA     L03BA
        LDA     L03B9
        LSR     A
        ADC     L03BA
        STA     L03BA
        ASL     A
        ASL     A
        ADC     L03B8
        ADC     L03B9
        ADC     #$01
        STA     L03BB
        LDA     L03B8
        EOR     #$07
        ADC     #$03
        STA     L001B
        LDA     L03B9
        ADC     #$04
        STA     L0081
        JSR     MULTU

        LDA     L03BB
        STA     L0081
        JSR     MULTU

        ASL     L001B
        ROL     A
        ASL     L001B
        ROL     A
        ASL     L001B
        ROL     A
        STA     L03BE
        LDA     L001B
        STA     L03BD
        RTS

.TT22
        LDA     #$40
        JSR     TT66

        LDA     #$07
        STA     L002C
        JSR     TT81

        LDA     #$C7
        JSR     L339A

        JSR     NLIN

        LDA     #$98
        JSR     NLIN2

        JSR     TT14

        LDX     #$00
.L2D09
        STX     L0084
        LDX     L006F
        LDY     L0070
        TYA
        ORA     #$50
        STA     L0088
        LDA     L006D
        LSR     A
        CLC
        ADC     #$18
        STA     L0035
        JSR     PIXEL

        JSR     TT20

        LDX     L0084
        INX
        BNE     L2D09

        LDA     L03C1
        STA     L0073
        LDA     L03C2
        LSR     A
        STA     L0074
        LDA     #$04
        STA     L0075
.TT15
        LDA     #$18
        LDX     L0087
        BPL     L2D3E

        LDA     #$00
.L2D3E
        STA     L0078
        LDA     L0073
        SEC
        SBC     L0075
        BCS     L2D49

        LDA     #$00
.L2D49
        STA     L0034
        LDA     L0073
        CLC
        ADC     L0075
        BCC     L2D54

        LDA     #$FF
.L2D54
        STA     L0036
        LDA     L0074
        CLC
        ADC     L0078
        STA     L0035
        JSR     HLOIN

        LDA     L0074
        SEC
        SBC     L0075
        BCS     L2D69

        LDA     #$00
.L2D69
        CLC
        ADC     L0078
        STA     L0035
        LDA     L0074
        CLC
        ADC     L0075
        ADC     L0078
        CMP     #$98
        BCC     L2D7F

        LDX     L0087
        BMI     L2D7F

        LDA     #$97
.L2D7F
        STA     L0037
        LDA     L0073
        STA     L0034
        STA     L0036
        JMP     LOIN

.L2D8A
        LDA     #$68
        STA     L0073
        LDA     #$5A
        STA     L0074
        LDA     #$10
        STA     L0075
        JSR     TT15

        LDA     L0365
        STA     L0040
        JMP     TT128

.TT14
        LDA     L0087
        BMI     L2D8A

        LDA     L0365
        LSR     A
        LSR     A
        STA     L0040
        LDA     L0359
        STA     L0073
        LDA     L035A
        LSR     A
        STA     L0074
        LDA     #$07
        STA     L0075
        JSR     TT15

        LDA     L0074
        CLC
        ADC     #$18
        STA     L0074
.TT128
        LDA     L0073
        STA     L00D2
        LDA     L0074
        STA     L00E0
        LDX     #$00
        STX     L00E1
        STX     L00D3
        INX
        STX     L006B
        LDX     #$02
        STX     L0095
        JSR     CIRCLE2

        RTS

.TT210
        LDY     #$00
.L2DE0
        STY     L03AD
        LDX     L036F,Y
        BEQ     L2E0C

        TYA
        ASL     A
        ASL     A
        TAY
        LDA     L461A,Y
        STA     L0074
        TXA
        PHA
        JSR     TT69

        CLC
        LDA     L03AD
        ADC     #$D0
        JSR     L339A

        LDA     #$0E
        STA     L002C
        PLA
        TAX
        CLC
        JSR     pr2

        JSR     TT152

.L2E0C
        LDY     L03AD
        INY
        CPY     #$11
        BCC     L2DE0

        RTS

.TT213
        LDA     #$08
        JSR     TT66

        LDA     #$0B
        STA     L002C
        LDA     #$A4
        JSR     TT60

        JSR     NLIN4

        JSR     L3366

        LDA     L036E
        CMP     #$1A
        BCC     L2E35

        LDA     #$6B
        JSR     L339A

.L2E35
        JMP     TT210

.TT16
        TXA
        PHA
        DEY
        TYA
        EOR     #$FF
        PHA
        JSR     WSCAN

        JSR     TT103

        PLA
        STA     L0076
        LDA     L03C2
        JSR     TT123

        LDA     L0077
        STA     L03C2
        STA     L0074
        PLA
        STA     L0076
        LDA     L03C1
        JSR     TT123

        LDA     L0077
        STA     L03C1
        STA     L0073
.TT103
        LDA     L0087
        BMI     L2E8C

        LDA     L03C1
        STA     L0073
        LDA     L03C2
        LSR     A
        STA     L0074
        LDA     #$04
        STA     L0075
        JMP     TT15

.TT123
        STA     L0077
        CLC
        ADC     L0076
        LDX     L0076
        BMI     L2E87

        BCC     L2E89

        RTS

.L2E87
        BCC     L2E8B

.L2E89
        STA     L0077
.L2E8B
        RTS

.L2E8C
        LDA     L03C1
        SEC
        SBC     L0359
        CMP     #$26
        BCC     L2E9B

        CMP     #$E6
        BCC     L2E8B

.L2E9B
        ASL     A
        ASL     A
        CLC
        ADC     #$68
        STA     L0073
        LDA     L03C2
        SEC
        SBC     L035A
        CMP     #$26
        BCC     L2EB1

        CMP     #$DC
        BCC     L2E8B

.L2EB1
        ASL     A
        CLC
        ADC     #$5A
        STA     L0074
        LDA     #$08
        STA     L0075
        JMP     TT15

.TT23
        LDA     #$80
        JSR     TT66

        LDA     #$07
        STA     L002C
        LDA     #$BE
        JSR     NLIN3

        JSR     TT14

        JSR     TT103

        JSR     TT81

        LDA     #$00
        STA     L0097
        LDX     #$18
.L2EDB
        STA     L0046,X
        DEX
        BPL     L2EDB

.TT182
        LDA     L006F
        SEC
        SBC     L0359
        BCS     L2EEC

        EOR     #$FF
        ADC     #$01
.L2EEC
        CMP     #$14
        BCS     L2F60

        LDA     L006D
        SEC
        SBC     L035A
        BCS     L2EFC

        EOR     #$FF
        ADC     #$01
.L2EFC
        CMP     #$26
        BCS     L2F60

        LDA     L006F
        SEC
        SBC     L0359
        ASL     A
        ASL     A
        ADC     #$68
        STA     L003A
        LSR     A
        LSR     A
        LSR     A
        STA     L002C
        INC     L002C
        LDA     L006D
        SEC
        SBC     L035A
        ASL     A
        ADC     #$5A
        STA     L00E0
        LSR     A
        LSR     A
        LSR     A
        TAY
        LDX     L0046,Y
        BEQ     L2F31

        INY
        LDX     L0046,Y
        BEQ     L2F31

        DEY
        DEY
        LDX     L0046,Y
        BNE     L2F43

.L2F31
        STY     L002D
        CPY     #$03
        BCC     L2F60

        LDA     #$FF
        STA     L0046,Y
        LDA     #$80
        STA     L0072
        JSR     cpl

.L2F43
        LDA     #$00
        STA     L00D3
        STA     L00E1
        STA     L0041
        LDA     L003A
        STA     L00D2
        LDA     L0071
        AND     #$01
        ADC     #$02
        STA     L0040
        JSR     FLFLLS

        JSR     SUN

        JSR     FLFLLS

.L2F60
        JSR     TT20

        INC     L0097
        BEQ     L2F74

        JMP     TT182

.TT81
        LDX     #$05
.L2F6C
        LDA     L035B,X
        STA     L006C,X
        DEX
        BPL     L2F6C

.L2F74
        RTS

.TT111
        JSR     TT81

        LDY     #$7F
        STY     L00D1
        LDA     #$00
        STA     L0080
.L2F80
        LDA     L006F
        SEC
        SBC     L03C1
        BCS     L2F8C

        EOR     #$FF
        ADC     #$01
.L2F8C
        LSR     A
        STA     L0083
        LDA     L006D
        SEC
        SBC     L03C2
        BCS     L2F9B

        EOR     #$FF
        ADC     #$01
.L2F9B
        LSR     A
        CLC
        ADC     L0083
        CMP     L00D1
        BCS     L2FAE

        STA     L00D1
        LDX     #$05
.L2FA7
        LDA     L006C,X
        STA     L0073,X
        DEX
        BPL     L2FA7

.L2FAE
        JSR     TT20

        INC     L0080
        BNE     L2F80

        LDX     #$05
.L2FB7
        LDA     L0073,X
        STA     L006C,X
        DEX
        BPL     L2FB7

        LDA     L006D
        STA     L03C2
        LDA     L006F
        STA     L03C1
        SEC
        SBC     L0359
        BCS     L2FD2

        EOR     #$FF
        ADC     #$01
.L2FD2
        JSR     SQUA2

        STA     L0041
        LDA     L001B
        STA     L0040
        LDA     L03C2
        SEC
        SBC     L035A
        BCS     L2FE8

        EOR     #$FF
        ADC     #$01
.L2FE8
        LSR     A
        JSR     SQUA2

        PHA
        LDA     L001B
        CLC
        ADC     L0040
        STA     L0081
        PLA
        ADC     L0041
        STA     L0082
        JSR     LL5

        LDA     L0081
        ASL     A
        LDX     #$00
        STX     L03C0
        ROL     L03C0
        ASL     A
        ROL     L03C0
        STA     L03BF
        JMP     TT24

.hyp
        LDA     L002F
        ORA     L008E
        BNE     L3085

        JSR     CTRL

        BMI     L305E

        LDA     L0087
        BNE     L3023

        JMP     TTH111

.L3023
        JSR     hm

.TTX111
        LDA     L03BF
        ORA     L03C0
        BEQ     L3085

        LDA     #$07
        STA     L002C
        LDA     #$17
        STA     L002D
        LDA     #$00
        STA     L0072
        LDA     #$BD
        JSR     L339A

        LDA     L03C0
        BNE     L30B9

        LDA     L0365
        CMP     L03BF
        BCC     L30B9

        LDA     #$2D
        JSR     L339A

        JSR     cpl

.wW
        LDA     #$0F
        STA     L002F
        STA     L002E
        TAX
        JMP     ee3

.L305E
        LDX     L0385
        BEQ     L3085

        INX
        STX     L0385
        STX     L038C
        JSR     wW

        LDX     #$05
        INC     L0367
        LDA     L0367
        AND     #$07
        STA     L0367
.L307A
        LDA     L035B,X
        ASL     A
        ROL     L035B,X
        DEX
        BPL     L307A

.L3084
        LDA     #$60
L3085 = L3084+1
        STA     L03C1
        STA     L03C2
        JSR     TT110

        JSR     TT111

        LDX     #$00
        STX     L03BF
        STX     L03C0
        LDA     #$74
        JSR     MESS

.jmp
        LDA     L03C1
        STA     L0359
        LDA     L03C2
        STA     L035A
        RTS

.ee3
        LDY     #$01
        STY     L002C
        STY     L002D
        DEY
.pr6
        CLC
.pr5
        LDA     #$05
        JMP     TT11

.L30B9
        LDA     #$CA
        JSR     L339A

        LDA     #$3F
        JMP     L339A

.TTH111
        JSR     TT111

        JMP     TTX111

.TT151
        PHA
        STA     L0077
        ASL     A
        ASL     A
        STA     L0073
        LDA     #$01
        STA     L002C
        PLA
        ADC     #$D0
        JSR     L339A

        LDA     #$0E
        STA     L002C
        LDX     L0073
        LDA     L461A,X
        STA     L0074
        LDA     L039E
        AND     L461C,X
        CLC
        ADC     L4619,X
        STA     L03AA
        JSR     TT152

        JSR     var

        LDA     L0074
        BMI     L3104

        LDA     L03AA
        ADC     L0076
        JMP     TT156

.L3104
        LDA     L03AA
        SEC
        SBC     L0076
.TT156
        STA     L03AA
        STA     L001B
        LDA     #$00
        JSR     GC2

        SEC
        JSR     pr5

        LDY     L0077
        LDA     #$05
        LDX     L038D,Y
        STX     L03AB
        CLC
        BEQ     L312B

        JSR     L1E3A

        JMP     TT152

.L312B
        LDA     L002C
        ADC     #$04
        STA     L002C
        LDA     #$2D
        BNE     L3144

.TT152
        LDA     L0074
        AND     #$60
        BEQ     L3147

        CMP     #$20
        BEQ     L314E

        JSR     TT16a

.TT162
        LDA     #$20
.L3144
        JMP     L339A

.L3147
        LDA     #$74
        JSR     TT26

        BCC     TT162

.L314E
        LDA     #$6B
        JSR     TT26

.TT16a
        LDA     #$67
        JMP     TT26

.TT163
        LDA     #$11
        STA     L002C
        LDA     #$FF
        BNE     L3144

.TT167
        LDA     #$10
        JSR     TT66

        LDA     #$05
        STA     L002C
        LDA     #$A7
        JSR     NLIN3

        LDA     #$03
        STA     L002D
        JSR     TT163

        LDA     #$00
        STA     L03AD
.L317A
        LDX     #$80
        STX     L0072
        JSR     TT151

        INC     L002D
        INC     L03AD
        LDA     L03AD
        CMP     #$11
        BCC     L317A

        RTS

.var
        LDA     L0074
        AND     #$1F
        LDY     L03AC
        STA     L0075
        CLC
        LDA     #$00
        STA     L039D
.TT153
        DEY
        BMI     L31A5

        ADC     L0075
        JMP     TT153

.L31A5
        STA     L0076
        RTS

        JSR     TT111

.L31AB
        JSR     jmp

        LDX     #$05
.L31B0
        LDA     L006C,X
        STA     L03B2,X
        DEX
        BPL     L31B0

        INX
        STX     L0349
        LDA     L03B8
        STA     L03AC
        LDA     L03BA
        STA     L03AF
        LDA     L03B9
        STA     L03AE
        JSR     DORND

        STA     L039E
        LDX     #$00
        STX     L0096
.L31D8
        LDA     L461A,X
        STA     L0074
        JSR     var

        LDA     L461C,X
        AND     L039E
        CLC
        ADC     L461B,X
        LDY     L0074
        BMI     L31F4

        SEC
        SBC     L0076
        JMP     TT158

.L31F4
        CLC
        ADC     L0076
.TT158
        BPL     L31FB

        LDA     #$00
.L31FB
        LDY     L0096
        AND     #$3F
        STA     L038D,Y
        INY
        TYA
        STA     L0096
        ASL     A
        ASL     A
        TAX
        CMP     #$3F
        BCC     L31D8

        RTS

.GTHG
        JSR     Ze

        LDA     #$FF
        STA     L0066
        LDA     #$1D
        JSR     NWSHP

        LDA     #$1E
        JMP     NWSHP

.L321F
        LSR     L0366
        SEC
        ROL     L0366
.L3226
        LDA     #$03
        JSR     SHIPinA

        LDA     #$03
        JSR     TT66

        JSR     LL164

        JSR     RES2

        STY     L0341
.L3239
        JSR     GTHG

        LDA     #$03
        CMP     L033B
        BCS     L3239

        STA     L03C3
        LDX     #$00
        JSR     LOOK1

        LDA     L035A
        EOR     #$1F
        STA     L035A
        RTS

.TT18
        LDA     L0365
        SEC
        SBC     L03BF
        STA     L0365
        LDA     L0087
        BNE     L3268

        JSR     TT66

        JSR     LL164

.L3268
        JSR     CTRL

        AND     L03C9
        BMI     L321F

        JSR     DORND

        CMP     #$FD
        BCS     L3226

        JSR     L31AB

        JSR     RES2

        JSR     SOLAR

        JSR     LSHIPS

        LDA     L0087
        AND     #$3F
        BNE     L32F0

        JSR     TTX66

        LDA     L0087
        BNE     L32C8

        INC     L0087
.TT110
        LDX     L008E
        BEQ     L32C1

        JSR     LAUN

        JSR     RES2

        JSR     TT111

        INC     L004E
        JSR     SOS1

        LDA     #$80
        STA     L004E
        INC     L004D
        JSR     NWSPS

        LDA     #$0C
        STA     L007D
        JSR     BAD

        ORA     L038C
        STA     L038C
        LDA     #$FF
        STA     L0087
        JSR     L2642

.L32C1
        LDX     #$00
        STX     L008E
        JMP     LOOK1

.L32C8
        BMI     L32CD

        JMP     TT22

.L32CD
        JMP     TT23

.MCASH
        TXA
        CLC
        ADC     L0364
        STA     L0364
        TYA
        ADC     L0363
        STA     L0363
        LDA     L0362
        ADC     #$00
        STA     L0362
        LDA     L0361
        ADC     #$00
        STA     L0361
        CLC
.L32F0
        RTS

        JSR     MULTU

.GC2
        ASL     L001B
        ROL     A
        ASL     L001B
        ROL     A
        TAY
        LDX     L001B
        RTS

.hm
        JSR     TT103

        JSR     TT111

        JSR     TT103

        JMP     CLYNS

.cpl
        LDX     #$05
.L330C
        LDA     L006C,X
        STA     L0073,X
        DEX
        BPL     L330C

        LDY     #$03
        BIT     L006C
        BVS     L331A

        DEY
.L331A
        STY     L00D1
.L331C
        LDA     L0071
        AND     #$1F
        BEQ     L3327

        ORA     #$80
        JSR     L339A

.L3327
        JSR     TT54

        DEC     L00D1
        BPL     L331C

        LDX     #$05
.L3330
        LDA     L0073,X
        STA     L006C,X
        DEX
        BPL     L3330

        RTS

.L3338
        LDY     #$00
.L333A
        LDA     L0350,Y
        CMP     #$0D
        BEQ     L3347

        JSR     TT26

        INY
        BNE     L333A

.L3347
        RTS

.L3348
        JSR     TT62

        JSR     cpl

.TT62
        LDX     #$05
.L3350
        LDA     L006C,X
        LDY     L03B2,X
        STA     L03B2,X
        STY     L006C,X
        DEX
        BPL     L3350

        RTS

.L335E
        CLC
        LDX     L0367
        INX
        JMP     pr2

.L3366
        LDA     #$69
        JSR     TT68

        LDX     L0365
        SEC
        JSR     pr2

        LDA     #$C3
        JSR     plf

        LDA     #$77
        BNE     L339A

.L337B
        LDX     #$03
.L337D
        LDA     L0361,X
        STA     L0040,X
        DEX
        BPL     L337D

        LDA     #$09
        STA     L0080
        SEC
        JSR     BPRNT

        LDA     #$E2
.plf
        JSR     L339A

        JMP     TT67

.TT68
        JSR     L339A

.L3398
        LDA     #$3A
.L339A
        TAX
        BEQ     L337B

        BMI     L3413

        DEX
        BEQ     L335E

        DEX
        BEQ     L3348

        DEX
        BNE     L33AB

        JMP     cpl

.L33AB
        DEX
        BEQ     L3338

        DEX
        BEQ     L3366

        DEX
        BNE     L33B9

        LDA     #$80
        STA     L0072
        RTS

.L33B9
        DEX
        DEX
        BNE     L33C0

        STX     L0072
        RTS

.L33C0
        DEX
        BEQ     L33FB

        CMP     #$60
        BCS     ex

        CMP     #$0E
        BCC     L33CF

        CMP     #$20
        BCC     L33F7

.L33CF
        LDX     L0072
        BEQ     L3410

        BMI     L33E6

        BIT     L0072
        BVS     L3409

.L33D9
        CMP     #$41
        BCC     L33E3

        CMP     #$5B
        BCS     L33E3

        ADC     #$20
.L33E3
        JMP     TT26

.L33E6
        BIT     L0072
        BVS     L3401

        CMP     #$41
        BCC     L3410

        PHA
        TXA
        ORA     #$40
        STA     L0072
        PLA
        BNE     L33E3

.L33F7
        ADC     #$72
        BNE     ex

.L33FB
        LDA     #$15
        STA     L002C
        BNE     L3398

.L3401
        CPX     #$FF
        BEQ     L3468

        CMP     #$41
        BCS     L33D9

.L3409
        PHA
        TXA
        AND     #$BF
        STA     L0072
        PLA
.L3410
        JMP     TT26

.L3413
        CMP     #$A0
        BCS     L342B

        AND     #$7F
        ASL     A
        TAY
        LDA     L0880,Y
        JSR     L339A

        LDA     L0881,Y
        CMP     #$3F
        BEQ     L3468

        JMP     L339A

.L342B
        SBC     #$A0
.ex
        TAX
        LDA     #$00
        STA     L0022
        LDA     #$04
        STA     L0023
        LDY     #$00
        TXA
        BEQ     L344E

.L343B
        LDA     (L0022),Y
        BEQ     L3446

        INY
        BNE     L343B

        INC     L0023
        BNE     L343B

.L3446
        INY
        BNE     L344B

        INC     L0023
.L344B
        DEX
        BNE     L343B

.L344E
        TYA
        PHA
        LDA     L0023
        PHA
        LDA     (L0022),Y
        EOR     #$23
        JSR     L339A

        PLA
        STA     L0023
        PLA
        TAY
        INY
        BNE     L3464

        INC     L0023
.L3464
        LDA     (L0022),Y
        BNE     L344E

.L3468
        RTS

.L3469
        LDA     L0065
        ORA     #$A0
        STA     L0065
        RTS

.DOEXP
        LDA     L0065
        AND     #$40
        BEQ     L3479

        JSR     PTCLS

.L3479
        LDA     L004C
        STA     L00D1
        LDA     L004D
        CMP     #$20
        BCC     L3487

        LDA     #$FE
        BNE     L348F

.L3487
        ASL     L00D1
        ROL     A
        ASL     L00D1
        ROL     A
        SEC
        ROL     A
.L348F
        STA     L0081
        LDY     #$01
        LDA     (L0067),Y
        ADC     #$04
        BCS     L3469

        STA     (L0067),Y
        JSR     DVID4

        LDA     L001B
        CMP     #$1C
        BCC     L34A8

        LDA     #$FE
        BNE     L34B1

.L34A8
        ASL     L0082
        ROL     A
        ASL     L0082
        ROL     A
        ASL     L0082
        ROL     A
.L34B1
        DEY
        STA     (L0067),Y
        LDA     L0065
        AND     #$BF
        STA     L0065
        AND     #$08
        BEQ     L3468

        LDY     #$02
        LDA     (L0067),Y
        TAY
.L34C3
        LDA     L00F9,Y
        STA     (L0067),Y
        DEY
        CPY     #$06
        BNE     L34C3

        LDA     L0065
        ORA     #$40
        STA     L0065
.PTCLS
        LDY     #$00
        LDA     (L0067),Y
        STA     L0081
        INY
        LDA     (L0067),Y
        BPL     L34E0

        EOR     #$FF
.L34E0
        LSR     A
        LSR     A
        LSR     A
        ORA     #$01
        STA     L0080
        INY
        LDA     (L0067),Y
        STA     L008F
        LDA     L0001
        PHA
        LDY     #$06
.L34F1
        LDX     #$03
.L34F3
        INY
        LDA     (L0067),Y
        STA     L00D2,X
        DEX
        BPL     L34F3

        STY     L0093
        LDY     #$02
.L34FF
        INY
        LDA     (L0067),Y
        EOR     L0093
        STA     LFFFD,Y
        CPY     #$06
        BNE     L34FF

        LDY     L0080
.L350D
        JSR     DORND2

        STA     L0088
        LDA     L00D3
        STA     L0082
        LDA     L00D2
        JSR     EXS1

        BNE     L3545

        CPX     #$BF
        BCS     L3545

        STX     L0035
        LDA     L00D5
        STA     L0082
        LDA     L00D4
        JSR     EXS1

        BNE     EX4

        LDA     L0035
        JSR     PIXEL

.EX4
        DEY
        BPL     L350D

        LDY     L0093
        CPY     L008F
        BCC     L34F1

        PLA
        STA     L0001
        LDA     L0906
        STA     L0003
        RTS

.L3545
        JSR     DORND2

        JMP     EX4

.EXS1
        STA     L0083
        JSR     DORND2

        ROL     A
        BCS     L355E

        JSR     FMLTU

        ADC     L0082
        TAX
        LDA     L0083
        ADC     #$00
        RTS

.L355E
        JSR     FMLTU

        STA     L00D1
        LDA     L0082
        SBC     L00D1
        TAX
        LDA     L0083
        SBC     #$00
        RTS

.SOS1
        JSR     msblob

        LDA     #$7F
        STA     L0063
        STA     L0064
        LDA     L03AF
        AND     #$02
        ORA     #$80
        JMP     NWSHP

.SOLAR
        LSR     L038C
        JSR     ZINF

        LDA     L006D
        AND     #$03
        ADC     #$03
        STA     L004E
        ROR     A
        STA     L0048
        STA     L004B
        JSR     SOS1

        LDA     L006F
        AND     #$07
        ORA     #$81
        STA     L004E
        LDA     L0071
        AND     #$03
        STA     L0048
        STA     L0047
        LDA     #$00
        STA     L0063
        STA     L0064
        LDA     #$81
        JSR     NWSHP

.NWSTARS
        LDA     L0087
        BNE     WPSHPS

.nWq
        LDY     L03C3
.L35B8
        JSR     DORND

        ORA     #$08
        STA     L0FA8,Y
        STA     L0088
        JSR     DORND

        STA     L0F5C,Y
        STA     L0034
        JSR     DORND

        STA     L0F82,Y
        STA     L0035
        JSR     PIXEL2

        DEY
        BNE     L35B8

.WPSHPS
        LDX     #$00
.L35DA
        LDA     L0311,X
        BEQ     L3602

        BMI     L35FF

        STA     L008C
        JSR     GINF

        LDY     #$1F
.L35E8
        LDA     (L0020),Y
        STA     L0046,Y
        DEY
        BPL     L35E8

        STX     L0084
        JSR     SCAN

        LDX     L0084
        LDY     #$1F
        LDA     (L0020),Y
        AND     #$A7
        STA     (L0020),Y
.L35FF
        INX
        BNE     L35DA

.L3602
        LDX     #$FF
        STX     L0EC0
        STX     L0F0E
.FLFLLS
        LDY     #$BF
        LDA     #$00
.L360E
        STA     L0E00,Y
        DEY
        BNE     L360E

        DEY
        STY     L0E00
        RTS

.DET1
        LDA     #$06
        SEI
        STA     LFE00
        STX     LFE01
        CLI
        RTS

.L3624
        DEX
        RTS

.SHD
        INX
        BEQ     L3624

.DENGY
        DEC     L03A7
        PHP
        BNE     L3632

        INC     L03A7
.L3632
        PLP
        RTS

.COMPAS
        JSR     DOT

        LDA     L0320
        BNE     L366D

        JSR     SPS1

        JMP     SP2

.SPS2
        ASL     A
        TAX
        LDA     #$00
        ROR     A
        TAY
        LDA     #$14
        STA     L0081
        TXA
        JSR     DVID4

        LDX     L001B
        TYA
        BMI     L3658

        LDY     #$00
        RTS

.L3658
        LDY     #$FF
        TXA
        EOR     #$FF
        TAX
        INX
        RTS

.SPS4
        LDX     #$08
.L3662
        LDA     L0925,X
        STA     L00D2,X
        DEX
        BPL     L3662

        JMP     TAS2

.L366D
        JSR     SPS4

.SP2
        LDA     L0034
        JSR     SPS2

        TXA
        ADC     #$C3
        STA     L03A8
        LDA     L0035
        JSR     SPS2

        STX     L00D1
        LDA     #$CC
        SBC     L00D1
        STA     L03A9
        LDA     #$F0
        LDX     L0036
        BPL     L3691

        LDA     #$FF
.L3691
        STA     L03C5
.DOT
        LDA     L03A9
        STA     L0035
        LDA     L03A8
        STA     L0034
        LDA     L03C5
        STA     L0091
        CMP     #$F0
        BNE     CPIX2

.L36A7
        JSR     CPIX2

        DEC     L0035
.CPIX2
        LDA     L0035
        TAY
        LSR     A
        LSR     A
        LSR     A
        ORA     #$60
        STA     L0008
        LDA     L0034
        AND     #$F8
        STA     L0007
        TYA
        AND     #$07
        TAY
        LDA     L0034
        AND     #$06
        LSR     A
        TAX
        LDA     L16BF,X
        AND     L0091
        EOR     (L0007),Y
        STA     (L0007),Y
        LDA     L16C0,X
        BPL     L36DD

        LDA     L0007
        ADC     #$08
        STA     L0007
        LDA     L16C0,X
.L36DD
        AND     L0091
.L36DF
        EOR     (L0007),Y
TT27 = L36DF+1
        STA     (L0007),Y
        RTS

.OOPS
        STA     L00D1
        LDX     #$00
        LDY     #$08
        LDA     (L0020),Y
        BMI     L36FE

        LDA     L03A5
        SBC     L00D1
        BCC     L36F9

        STA     L03A5
        RTS

.L36F9
        STX     L03A5
        BCC     L370C

.L36FE
        LDA     L03A6
        SBC     L00D1
        BCC     L3709

        STA     L03A6
        RTS

.L3709
        STX     L03A6
.L370C
        ADC     L03A7
        STA     L03A7
        BEQ     L3716

        BCS     L3719

.L3716
        JMP     DEATH

.L3719
        JSR     EXNO3

        JMP     OUCH

.SPS3
        LDA     L0901,X
        STA     L00D2,X
        LDA     L0902,X
        TAY
        AND     #$7F
        STA     L00D3,X
        TYA
        AND     #$80
        STA     L00D4,X
        RTS

.GINF
        TXA
        ASL     A
        TAY
        LDA     L1695,Y
        STA     L0020
        LDA     L1696,Y
        STA     L0021
        RTS

.NWSPS
        JSR     SPBLB

        LDX     #$81
        STX     L0066
        LDX     #$00
        STX     L0064
        STX     L006A
        STX     L0312
        DEX
        STX     L0063
        LDX     #$0A
        JSR     NwS1

        JSR     NwS1

        JSR     NwS1

        LDA     #$00
        STA     L0067
        LDA     #$0E
        STA     L0068
        LDA     #$02
.NWSHP
        STA     L00D1
        LDX     #$00
.L376C
        LDA     L0311,X
        BEQ     L3778

        INX
        CPX     #$0C
        BCC     L376C

.L3776
        CLC
.L3777
        RTS

.L3778
        JSR     GINF

        LDA     L00D1
        BMI     L37D1

        ASL     A
        TAY
        LDA     L55FF,Y
        BEQ     L3776

        STA     L001F
        LDA     L55FE,Y
        STA     L001E
        CPY     #$04
        BEQ     L37C1

        LDY     #$05
        LDA     (L001E),Y
        STA     L0006
        LDA     L03B0
        SEC
        SBC     L0006
        STA     L0067
        LDA     L03B1
        SBC     #$00
        STA     L0068
        LDA     L0067
        SBC     L0020
        TAY
        LDA     L0068
        SBC     L0021
        BCC     L3777

        BNE     L37B7

        CPY     #$25
        BCC     L3777

.L37B7
        LDA     L0067
        STA     L03B0
        LDA     L0068
        STA     L03B1
.L37C1
        LDY     #$0E
        LDA     (L001E),Y
        STA     L0069
        LDY     #$13
        LDA     (L001E),Y
        AND     #$07
        STA     L0065
        LDA     L00D1
.L37D1
        STA     L0311,X
        TAX
        BMI     L37E5

        CPX     #$03
        BCC     L37E2

        CPX     #$0B
        BCS     L37E2

        INC     L033E
.L37E2
        INC     L031E,X
.L37E5
        LDY     L00D1
        LDA     L563D,Y
        AND     #$6F
        ORA     L006A
        STA     L006A
        LDY     #$24
.L37F2
        LDA     L0046,Y
        STA     (L0020),Y
        DEY
        BPL     L37F2

        SEC
        RTS

.NwS1
        LDA     L0046,X
        EOR     #$80
        STA     L0046,X
        INX
        INX
        RTS

.ABORT
        LDX     #$FF
.ABORT2
        STX     L0045
        LDX     L038B
        JSR     MSBAR

        STY     L0344
        RTS

.ECBLB2
        LDA     #$20
        STA     L0030
        ASL     A
        JSR     NOISE

.ECBLB
        LDA     #$38
        LDX     #$32
        BNE     L3825

.SPBLB
        LDA     #$C0
        LDX     #$35
.L3825
        LDY     #$38
        STA     L0007
        STX     L001C
        STY     L001D
        LDA     #$7D
        JMP     RREN

.L3832
        EQUB    $E0,$E0,$80

        EQUB    $E0,$E0,$80,$E0,$E0,$20,$E0,$E0

.MSBAR
        TXA
        ASL     A
        ASL     A
        ASL     A
        STA     L00D1
        LDA     #$31
        SBC     L00D1
        STA     L0007
        LDA     #$7E
        STA     L0008
        TYA
        LDY     #$05
.L3850
        STA     (L0007),Y
        DEY
        BNE     L3850

        RTS

.PROJ
        LDA     L0046
        STA     L001B
        LDA     L0047
        STA     L001C
        LDA     L0048
        JSR     PLS6

        BCS     L388D

        LDA     L0040
        ADC     #$80
        STA     L00D2
        TXA
        ADC     #$00
        STA     L00D3
        LDA     L0049
        STA     L001B
        LDA     L004A
        STA     L001C
        LDA     L004B
        EOR     #$80
        JSR     PLS6

        BCS     L388D

        LDA     L0040
        ADC     #$60
        STA     L00E0
        TXA
        ADC     #$00
        STA     L00E1
        CLC
.L388D
        RTS

.L388E
        LDA     L008C
        LSR     A
        BCS     L3896

        JMP     WPLS2

.L3896
        JMP     WPLS

.PLANET
        LDA     L004E
        BMI     L388E

        CMP     #$30
        BCS     L388E

        ORA     L004D
        BEQ     L388E

        JSR     PROJ

        BCS     L388E

        LDA     #$60
        STA     L001C
        LDA     #$00
        STA     L001B
        JSR     DVID3B2

        LDA     L0041
        BEQ     L38BD

        LDA     #$F8
        STA     L0040
.L38BD
        LDA     L008C
        LSR     A
        BCC     L38C5

        JMP     SUN

.L38C5
        JSR     WPLS2

        JSR     CIRCLE

        BCS     L38D1

        LDA     L0041
        BEQ     L38D2

.L38D1
        RTS

.L38D2
        LDA     L008C
        CMP     #$80
        BNE     L3914

        LDA     L0040
        CMP     #$06
        BCC     L38D1

        LDA     L0054
        EOR     #$80
        STA     L001B
        LDA     L005A
        JSR     PLS4

        LDX     #$09
        JSR     PLS1

        STA     L009B
        STY     L0009
        JSR     PLS1

        STA     L009C
        STY     L000A
        LDX     #$0F
        JSR     PLS5

        JSR     PLS2

        LDA     L0054
        EOR     #$80
        STA     L001B
        LDA     L0060
        JSR     PLS4

        LDX     #$15
        JSR     PLS5

        JMP     PLS2

.L3914
        LDA     L005A
        BMI     L38D1

        LDX     #$0F
        JSR     PLS3

        CLC
        ADC     L00D2
        STA     L00D2
        TYA
        ADC     L00D3
        STA     L00D3
        JSR     PLS3

        STA     L001B
        LDA     L00E0
        SEC
        SBC     L001B
        STA     L00E0
        STY     L001B
        LDA     L00E1
        SBC     L001B
        STA     L00E1
        LDX     #$09
        JSR     PLS1

        LSR     A
        STA     L009B
        STY     L0009
        JSR     PLS1

        LSR     A
        STA     L009C
        STY     L000A
        LDX     #$15
        JSR     PLS1

        LSR     A
        STA     L009D
        STY     L000B
        JSR     PLS1

        LSR     A
        STA     L009E
        STY     L000C
        LDA     #$40
        STA     L008F
        LDA     #$00
        STA     L0094
        BEQ     L398B

.PLS1
        LDA     L0046,X
        STA     L001B
        LDA     L0047,X
        AND     #$7F
        STA     L001C
        LDA     L0047,X
        AND     #$80
        JSR     DVID3B2

        LDA     L0040
        LDY     L0041
        BEQ     L3982

        LDA     #$FE
.L3982
        LDY     L0043
        INX
        INX
        RTS

.PLS2
        LDA     #$1F
        STA     L008F
.L398B
        LDX     #$00
        STX     L0093
        DEX
        STX     L0092
.PLL4
        LDA     L0094
        AND     #$1F
        TAX
        LDA     L07C0,X
        STA     L0081
        LDA     L009D
        JSR     FMLTU

        STA     L0082
        LDA     L009E
        JSR     FMLTU

        STA     L0040
        LDX     L0094
        CPX     #$21
        LDA     #$00
        ROR     A
        STA     L000E
        LDA     L0094
        CLC
        ADC     #$10
        AND     #$1F
        TAX
        LDA     L07C0,X
        STA     L0081
        LDA     L009C
        JSR     FMLTU

        STA     L0042
        LDA     L009B
        JSR     FMLTU

        STA     L001B
        LDA     L0094
        ADC     #$0F
        AND     #$3F
        CMP     #$21
        LDA     #$00
        ROR     A
        STA     L000D
        LDA     L000E
        EOR     L000B
        STA     L0083
        LDA     L000D
        EOR     L0009
        JSR     ADD

        STA     L00D1
        BPL     L39FB

        TXA
        EOR     #$FF
        CLC
        ADC     #$01
        TAX
        LDA     L00D1
        EOR     #$7F
        ADC     #$00
        STA     L00D1
.L39FB
        TXA
        ADC     L00D2
        STA     L0076
        LDA     L00D1
        ADC     L00D3
        STA     L0077
        LDA     L0040
        STA     L0082
        LDA     L000E
        EOR     L000C
        STA     L0083
        LDA     L0042
        STA     L001B
        LDA     L000D
        EOR     L000A
        JSR     ADD

        EOR     #$80
        STA     L00D1
        BPL     L3A30

        TXA
        EOR     #$FF
        CLC
        ADC     #$01
        TAX
        LDA     L00D1
        EOR     #$7F
        ADC     #$00
        STA     L00D1
.L3A30
        JSR     BLINE

        CMP     L008F
        BEQ     L3A39

        BCS     L3A45

.L3A39
        LDA     L0094
        CLC
        ADC     L0095
        AND     #$3F
        STA     L0094
        JMP     PLL4

.L3A45
        RTS

.L3A46
        JMP     WPLS

.L3A49
        TXA
        EOR     #$FF
        CLC
        ADC     #$01
        TAX
.L3A50
        LDA     #$FF
        BNE     L3A99

.SUN
        LDA     #$01
        STA     L0E00
        JSR     CHKON

        BCS     L3A46

        LDA     #$00
        LDX     L0040
        CPX     #$60
        ROL     A
        CPX     #$28
        ROL     A
        CPX     #$10
        ROL     A
        STA     L0093
        LDA     #$BF
        LDX     L001D
        BNE     L3A7D

        CMP     L001C
        BCC     L3A7D

        LDA     L001C
        BNE     L3A7D

        LDA     #$01
.L3A7D
        STA     L008F
        LDA     #$BF
        SEC
        SBC     L00E0
        TAX
        LDA     #$00
        SBC     L00E1
        BMI     L3A49

        BNE     L3A95

        INX
        DEX
        BEQ     L3A50

        CPX     L0040
        BCC     L3A99

.L3A95
        LDX     L0040
        LDA     #$00
.L3A99
        STX     L0022
        STA     L0023
        LDA     L0040
        JSR     SQUA2

        STA     L009C
        LDA     L001B
        STA     L009B
        LDY     #$BF
        LDA     L0028
        STA     L0026
        LDA     L0029
        STA     L0027
.L3AB2
        CPY     L008F
        BEQ     PLFL

        LDA     L0E00,Y
        BEQ     L3ABE

        JSR     HLOIN2

.L3ABE
        DEY
        BNE     L3AB2

.PLFL
        LDA     L0022
        JSR     SQUA2

        STA     L00D1
        LDA     L009B
        SEC
        SBC     L001B
        STA     L0081
        LDA     L009C
        SBC     L00D1
        STA     L0082
        STY     L0035
        JSR     LL5

        LDY     L0035
        JSR     DORND

        AND     L0093
        CLC
        ADC     L0081
        BCC     L3AE8

        LDA     #$FF
.L3AE8
        LDX     L0E00,Y
        STA     L0E00,Y
        BEQ     L3B3A

        LDA     L0028
        STA     L0026
        LDA     L0029
        STA     L0027
        TXA
        JSR     EDGES

        LDA     L0034
        STA     L0024
        LDA     L0036
        STA     L0025
        LDA     L00D2
        STA     L0026
        LDA     L00D3
        STA     L0027
        LDA     L0E00,Y
        JSR     EDGES

        BCS     L3B1F

        LDA     L0036
        LDX     L0024
        STX     L0036
        STA     L0024
        JSR     HLOIN

.L3B1F
        LDA     L0024
        STA     L0034
        LDA     L0025
        STA     L0036
.L3B27
        JSR     HLOIN

.L3B2A
        DEY
        BEQ     L3B6C

        LDA     L0023
        BNE     L3B4E

        DEC     L0022
        BNE     PLFL

        DEC     L0023
.L3B37
        JMP     PLFL

.L3B3A
        LDX     L00D2
        STX     L0026
        LDX     L00D3
        STX     L0027
        JSR     EDGES

        BCC     L3B27

        LDA     #$00
        STA     L0E00,Y
        BEQ     L3B2A

.L3B4E
        LDX     L0022
        INX
        STX     L0022
        CPX     L0040
        BCC     L3B37

        BEQ     L3B37

        LDA     L0028
        STA     L0026
        LDA     L0029
        STA     L0027
.L3B61
        LDA     L0E00,Y
        BEQ     L3B69

        JSR     HLOIN2

.L3B69
        DEY
        BNE     L3B61

.L3B6C
        CLC
        LDA     L00D2
        STA     L0028
        LDA     L00D3
        STA     L0029
.L3B75
        RTS

.CIRCLE
        JSR     CHKON

        BCS     L3B75

        LDA     #$00
        STA     L0EC0
        LDX     L0040
        LDA     #$08
        CPX     #$08
        BCC     L3B8E

        LSR     A
        CPX     #$3C
        BCC     L3B8E

        LSR     A
.L3B8E
        STA     L0095
.CIRCLE2
        LDX     #$FF
        STX     L0092
        INX
        STX     L0093
.PLL3
        LDA     L0093
        JSR     FMLTU2

        LDX     #$00
        STX     L00D1
        LDX     L0093
        CPX     #$21
        BCC     L3BB3

        EOR     #$FF
        ADC     #$00
        TAX
        LDA     #$FF
        ADC     #$00
        STA     L00D1
        TXA
        CLC
.L3BB3
        ADC     L00D2
        STA     L0076
        LDA     L00D3
        ADC     L00D1
        STA     L0077
        LDA     L0093
        CLC
        ADC     #$10
        JSR     FMLTU2

        TAX
        LDA     #$00
        STA     L00D1
        LDA     L0093
        ADC     #$0F
        AND     #$3F
        CMP     #$21
        BCC     L3BE1

        TXA
        EOR     #$FF
        ADC     #$00
        TAX
        LDA     #$FF
        ADC     #$00
        STA     L00D1
        CLC
.L3BE1
        JSR     BLINE

        CMP     #$41
        BCS     L3BEB

        JMP     PLL3

.L3BEB
        CLC
        RTS

.WPLS2
        LDY     L0EC0
        BNE     L3C26

.WPL1
        CPY     L006B
        BCS     L3C26

        LDA     L0F0E,Y
        CMP     #$FF
        BEQ     L3C17

        STA     L0037
        LDA     L0EC0,Y
        STA     L0036
        JSR     LOIN

        INY
        LDA     L0090
        BNE     WPL1

        LDA     L0036
        STA     L0034
        LDA     L0037
        STA     L0035
        JMP     WPL1

.L3C17
        INY
        LDA     L0EC0,Y
        STA     L0034
        LDA     L0F0E,Y
        STA     L0035
        INY
        JMP     WPL1

.L3C26
        LDA     #$01
        STA     L006B
        LDA     #$FF
        STA     L0EC0
.L3C2F
        RTS

.WPLS
        LDA     L0E00
        BMI     L3C2F

        LDA     L0028
        STA     L0026
        LDA     L0029
        STA     L0027
        LDY     #$BF
.L3C3F
        LDA     L0E00,Y
        BEQ     L3C47

        JSR     HLOIN2

.L3C47
        DEY
        BNE     L3C3F

        DEY
        STY     L0E00
        RTS

.EDGES
        STA     L00D1
        CLC
        ADC     L0026
        STA     L0036
        LDA     L0027
        ADC     #$00
        BMI     L3C79

        BEQ     L3C62

        LDA     #$FE
        STA     L0036
.L3C62
        LDA     L0026
        SEC
        SBC     L00D1
        STA     L0034
        LDA     L0027
        SBC     #$00
        BNE     L3C71

        CLC
        RTS

.L3C71
        BPL     L3C79

        LDA     #$02
        STA     L0034
        CLC
        RTS

.L3C79
        LDA     #$00
        STA     L0E00,Y
        SEC
        RTS

.CHKON
        LDA     L00D2
        CLC
        ADC     L0040
        LDA     L00D3
        ADC     #$00
        BMI     L3CB8

        LDA     L00D2
        SEC
        SBC     L0040
        LDA     L00D3
        SBC     #$00
        BMI     L3C98

        BNE     L3CB8

.L3C98
        LDA     L00E0
        CLC
        ADC     L0040
        STA     L001C
        LDA     L00E1
        ADC     #$00
        BMI     L3CB8

        STA     L001D
        LDA     L00E0
        SEC
        SBC     L0040
        TAX
        LDA     L00E1
        SBC     #$00
        BMI     L3D1D

        BNE     L3CB8

        CPX     #$BF
        RTS

.L3CB8
        SEC
        RTS

.PLS3
        JSR     PLS1

        STA     L001B
        LDA     #$DE
        STA     L0081
        STX     L0080
        JSR     MULTU

        LDX     L0080
        LDY     L0043
        BPL     L3CD8

        EOR     #$FF
        CLC
        ADC     #$01
        BEQ     L3CD8

        LDY     #$FF
        RTS

.L3CD8
        LDY     #$00
        RTS

.PLS4
        STA     L0081
        JSR     ARCTAN

        LDX     L0054
        BMI     L3CE6

        EOR     #$80
.L3CE6
        LSR     A
        LSR     A
        STA     L0094
        RTS

.PLS5
        JSR     PLS1

        STA     L009D
        STY     L000B
        JSR     PLS1

        STA     L009E
        STY     L000C
        RTS

.PLS6
        JSR     DVID3B2

        LDA     L0043
        AND     #$7F
        ORA     L0042
        BNE     L3CB8

        LDX     L0041
        CPX     #$04
        BCS     L3D1E

        LDA     L0043
        BPL     L3D1E

        LDA     L0040
        EOR     #$FF
        ADC     #$01
        STA     L0040
        TXA
        EOR     #$FF
        ADC     #$00
        TAX
.L3D1D
        CLC
.L3D1E
        RTS

.TT17
        JSR     DOKEY

        LDA     L03CD
        BEQ     TJ1

        LDA     L034C
        EOR     #$FF
        JSR     TJS1

        TYA
        TAX
        LDA     L034D
.TJS1
        TAY
        LDA     #$00
        CPY     #$10
        SBC     #$00
        CPY     #$40
        SBC     #$00
        CPY     #$C0
        ADC     #$00
        CPY     #$E0
        ADC     #$00
        TAY
        LDA     L0300
        RTS

.TJ1
        LDA     L0300
        LDX     #$00
        LDY     #$00
        CMP     #$19
        BNE     L3D58

        DEX
.L3D58
        CMP     #$79
        BNE     L3D5D

        INX
.L3D5D
        CMP     #$39
        BNE     L3D62

        INY
.L3D62
        CMP     #$29
        BNE     L3D67

        DEY
.L3D67
        RTS

.ping
        LDX     #$01
.L3D6A
        LDA     L0359,X
        STA     L03C1,X
        DEX
        BPL     L3D6A

        RTS

.L3D74
        LDA     L001B
        STA     L03B0
        LDA     L001C
        STA     L03B1
        RTS

.L3D7F
        LDX     L0084
        JSR     KILLSHP

        LDX     L0084
        JMP     MAL1

.L3D89
        JSR     ZINF

        JSR     FLFLLS

        STA     L0312
        STA     L0320
        JSR     SPBLB

        LDA     #$06
        STA     L004B
        LDA     #$81
        JMP     NWSHP

.KS2
        LDX     #$FF
.L3DA3
        INX
        LDA     L0311,X
        BEQ     L3D74

        CMP     #$01
        BNE     L3DA3

        TXA
        ASL     A
        TAY
        LDA     L1695,Y
        STA     L0007
        LDA     L1696,Y
        STA     L0008
        LDY     #$20
        LDA     (L0007),Y
        BPL     L3DA3

        AND     #$7F
        LSR     A
        CMP     L0096
        BCC     L3DA3

        BEQ     L3DD2

        SBC     #$01
        ASL     A
        ORA     #$80
        STA     (L0007),Y
        BNE     L3DA3

.L3DD2
        LDA     #$00
        STA     (L0007),Y
        BEQ     L3DA3

.KILLSHP
        STX     L0096
        CPX     L0045
        BNE     L3DE8

        LDY     #$EE
        JSR     ABORT

        LDA     #$C8
        JSR     MESS

.L3DE8
        LDY     L0096
        LDX     L0311,Y
        CPX     #$02
        BEQ     L3D89

        CPX     #$1F
        BNE     L3DFD

        LDA     L0358
        ORA     #$02
        STA     L0358
.L3DFD
        CPX     #$03
        BCC     L3E08

        CPX     #$0B
        BCS     L3E08

        DEC     L033E
.L3E08
        DEC     L031E,X
        LDX     L0096
        LDY     #$05
        LDA     (L001E),Y
        LDY     #$21
        CLC
        ADC     (L0020),Y
        STA     L001B
        INY
        LDA     (L0020),Y
        ADC     #$00
        STA     L001C
.L3E1F
        INX
        LDA     L0311,X
        STA     L0310,X
        BNE     L3E2B

        JMP     KS2

.L3E2B
        ASL     A
        TAY
        LDA     L55FE,Y
        STA     L0007
        LDA     L55FF,Y
        STA     L0008
        LDY     #$05
        LDA     (L0007),Y
        STA     L00D1
        LDA     L001B
        SEC
        SBC     L00D1
        STA     L001B
        LDA     L001C
        SBC     #$00
        STA     L001C
        TXA
        ASL     A
        TAY
        LDA     L1695,Y
        STA     L0007
        LDA     L1696,Y
        STA     L0008
        LDY     #$24
        LDA     (L0007),Y
        STA     (L0020),Y
        DEY
        LDA     (L0007),Y
        STA     (L0020),Y
        DEY
        LDA     (L0007),Y
        STA     L0041
        LDA     L001C
        STA     (L0020),Y
        DEY
        LDA     (L0007),Y
        STA     L0040
        LDA     L001B
        STA     (L0020),Y
        DEY
.L3E75
        LDA     (L0007),Y
        STA     (L0020),Y
        DEY
        BPL     L3E75

        LDA     L0007
        STA     L0020
        LDA     L0008
        STA     L0021
        LDY     L00D1
.L3E86
        DEY
        LDA     (L0040),Y
        STA     (L001B),Y
        TYA
        BNE     L3E86

        BEQ     L3E1F

.L3E90
        EQUB    $12,$01,$00,$10,$12,$02,$2C,$08
        EQUB    $11,$03,$F0,$18,$10,$F1,$07,$1A
        EQUB    $03,$F1,$BC,$01,$13,$F4,$0C,$08
        EQUB    $10,$F1,$06,$0C,$10,$02,$60,$10
        EQUB    $13,$04,$C2,$FF,$13,$00,$00,$00

.THERE
        LDX     L0367
        DEX
        BNE     L3ECC

        LDA     L0359
        CMP     #$90
        BNE     L3ECC

        LDA     L035A
        CMP     #$21
        BEQ     L3ECD

.L3ECC
        CLC
.L3ECD
        RTS

.RESET
        JSR     ZERO

        LDX     #$08
.L3ED3
        STA     L002A,X
        DEX
        BPL     L3ED3

        TXA
        LDX     #$02
.L3EDB
        STA     L03A5,X
        DEX
        BPL     L3EDB

.RES2
        LDA     #$12
        STA     L03C3
        LDX     #$FF
        STX     L0EC0
        STX     L0F0E
        STX     L0045
        LDA     #$80
        STA     L034C
        STA     L034D
        ASL     A
        STA     L008A
        STA     L002F
        LDA     #$03
        STA     L007D
        LDA     L0320
        BEQ     L3F09

        JSR     SPBLB

.L3F09
        LDA     L0030
        BEQ     L3F10

        JSR     ECMOF

.L3F10
        JSR     WPSHPS

        JSR     ZERO

        LDA     #$FF
        STA     L03B0
        LDA     #$0C
        STA     L03B1
        JSR     DIALS

        JSR     Uperc

.ZINF
        LDY     #$24
        LDA     #$00
.L3F2A
        STA     L0046,Y
        DEY
        BPL     L3F2A

        LDA     #$60
        STA     L0058
        STA     L005C
        ORA     #$80
        STA     L0054
        RTS

.msblob
        LDX     #$04
.L3F3D
        CPX     L038B
        BEQ     L3F4B

        LDY     #$00
        JSR     MSBAR

        DEX
        BNE     L3F3D

        RTS

.L3F4B
        LDY     #$EE
        JSR     MSBAR

        DEX
        BNE     L3F4B

        RTS

.L3F54
        LDA     L03A4
        JSR     MESS

        LDA     #$00
        STA     L034A
        JMP     me3

.Ze
        JSR     ZINF

        JSR     DORND

        STA     L0006
        AND     #$80
        STA     L0048
        TXA
        AND     #$80
        STA     L004B
        LDA     #$19
        STA     L0047
        STA     L004A
        STA     L004D
        JSR     DORND

        CMP     #$F5
        ROL     A
        ORA     #$C0
        STA     L0066
.DORND2
        CLC
.DORND
        LDA     L0000
        ROL     A
        TAX
        ADC     L0002
        STA     L0000
        STX     L0002
        LDA     L0001
        TAX
        ADC     L0003
        STA     L0001
        STX     L0003
        RTS

.MTT4
        JSR     DORND

        LSR     A
        STA     L0066
        STA     L0063
        ROL     L0065
        AND     #$0F
        ORA     #$10
        STA     L0061
        JSR     DORND

        BMI     L3FB9

        LDA     L0066
        ORA     #$C0
        STA     L0066
        LDX     #$10
        STX     L006A
.L3FB9
        AND     #$02
        ADC     #$0B
        JSR     NWSHP

.TT100
        JSR     MPERC

        DEC     L034A
        BEQ     L3F54

        BPL     me3

        INC     L034A
.me3
        DEC     L008A
        BEQ     L3FD4

.L3FD1
        JMP     MLOOP

.L3FD4
        LDA     L0341
        BNE     L3FD1

        JSR     DORND

        CMP     #$23
        BCS     L402E

        LDA     L033E
        CMP     #$03
        BCS     L402E

        JSR     ZINF

        LDA     #$26
        STA     L004D
        JSR     DORND

        STA     L0046
        STX     L0049
        AND     #$80
        STA     L0048
        TXA
        AND     #$80
        STA     L004B
        ROL     L0047
        ROL     L0047
        JSR     DORND

        BVS     MTT4

        NOP
        NOP
        NOP
        ORA     #$6F
        STA     L0063
        LDA     L0320
        BNE     L402E

        TXA
        BCS     L401E

        AND     #$1F
        ORA     #$10
        STA     L0061
        BCC     L4022

.L401E
        ORA     #$7F
        STA     L0064
.L4022
        JSR     DORND

        CMP     #$0A
        AND     #$01
        ADC     #$05
        JSR     NWSHP

.L402E
        LDA     L0320
.L4031
        BEQ     L4036

MLOOPS = L4031+1
.L4033
        JMP     MLOOP

.L4036
        JSR     BAD

        ASL     A
        LDX     L032E
        BEQ     L4042

        ORA     L038C
.L4042
        STA     L00D1
        JSR     Ze

        CMP     L00D1
        BCS     L4050

        LDA     #$10
.L404D
        JSR     NWSHP

anycop = L404D+2
.L4050
        LDA     L032E
        BNE     L4033

        DEC     L0349
        BPL     L4033

        INC     L0349
        LDA     L0358
        AND     #$0C
        CMP     #$08
        BNE     L4070

        JSR     DORND

        CMP     #$C8
        BCC     L4070

        JSR     GTHG

.L4070
        JSR     DORND

        LDY     L03AE
        BEQ     L4083

        CMP     #$78
        BCS     L4033

        AND     #$07
        CMP     L03AE
        BCC     L4033

.L4083
        JSR     Ze

        CMP     #$64
        BCS     mt1

        INC     L0349
        AND     #$03
        ADC     #$18
        TAY
        JSR     THERE

        BCC     L40A8

        LDA     #$F9
        STA     L0066
        LDA     L0358
        AND     #$03
        LSR     A
        BCC     L40A8

        ORA     L033D
        BEQ     L40AA

.L40A8
        TYA
.L40A9
        BIT     L1FA9
L40AA = L40A9+1
        JSR     NWSHP

        JMP     MLOOP

.mt1
        AND     #$03
        STA     L0349
        STA     L0089
.L40B9
        JSR     DORND

        STA     L00D1
        JSR     DORND

        AND     L00D1
        AND     #$07
        STA     L0FD2
.L40C8
        LDA     L0FD2
        ADC     #$11
        JSR     NWSHP

        BCS     L40D7

        DEC     L0FD2
        BPL     L40C8

.L40D7
        DEC     L0089
        BPL     L40B9

.MLOOP
        LDX     #$FF
        TXS
        LDX     L0347
        BEQ     L40E6

        DEC     L0347
.L40E6
        JSR     DIALS

        LDA     L0087
        BEQ     L40F8

        AND     L03C9
        LSR     A
        BCS     L40F8

        LDY     #$02
        JSR     DELAY

.L40F8
        JSR     TT17

.FRCE
        JSR     TT102

        JMP     TT100

.TT102
        CMP     #$76
        BNE     L4108

        JMP     STATUS

.L4108
        CMP     #$14
        BNE     L410F

        JMP     TT22

.L410F
        CMP     #$74
        BNE     L4116

        JMP     TT23

.L4116
        CMP     #$75
        BNE     L4120

        JSR     TT111

        JMP     TT25

.L4120
        CMP     #$77
        BNE     L4127

        JMP     TT213

.L4127
        CMP     #$16
        BNE     L412E

        JMP     TT167

.L412E
        CMP     #$20
        BNE     L4135

        JMP     TT110

.L4135
        CMP     #$71
        BCC     L4143

        CMP     #$74
        BCS     L4143

        AND     #$03
        TAX
        JMP     LOOK1

.L4143
        CMP     #$54
        BNE     L414A

        JMP     hyp

.L414A
        CMP     #$32
        BEQ     L418B

        STA     L0006
        LDA     L0087
        AND     #$C0
        BEQ     L416C

        LDA     L002F
        BNE     L416C

        LDA     L0006
        CMP     #$36
        BNE     L4169

        JSR     TT103

        JSR     ping

        JSR     TT103

.L4169
        JSR     TT16

.L416C
        LDA     L002F
        BEQ     L418A

        DEC     L002E
        BNE     L418A

        LDX     L002F
        DEX
        JSR     ee3

        LDA     #$05
        STA     L002E
        LDX     L002F
        JSR     ee3

        DEC     L002F
        BNE     L418A

        JMP     TT18

.L418A
        RTS

.L418B
        LDA     L0087
        AND     #$C0
        BEQ     L418A

        JSR     hm

        STA     L0072
        JSR     cpl

        LDA     #$80
        STA     L0072
        LDA     #$01
        STA     L002C
        INC     L002D
        JMP     TT146

.BAD
        LDA     L0372
        CLC
        ADC     L0375
        ASL     A
        ADC     L0379
        RTS

.FAROF
        LDA     #$E0
.FAROF2
        CMP     L0047
        BCC     L41BE

        CMP     L004A
        BCC     L41BE

        CMP     L004D
.L41BE
        RTS

.MAS4
        ORA     L0047
        ORA     L004A
        ORA     L004D
        RTS

.DEATH
        JSR     EXNO3

        JSR     RES2

        ASL     L007D
        ASL     L007D
        LDX     #$18
        JSR     DET1

        JSR     TT66

        JSR     BOX

        JSR     nWq

        LDA     #$0C
        STA     L002D
        STA     L002C
        LDA     #$92
        JSR     ex

.L41E9
        JSR     Ze

        LSR     A
        LSR     A
        STA     L0046
        LDY     #$00
        STY     L0087
        STY     L0047
        STY     L004A
        STY     L004D
        STY     L0066
        DEY
        STY     L008A
        STY     L0346
        EOR     #$2A
        STA     L0049
        ORA     #$50
        STA     L004C
        TXA
        AND     #$8F
        STA     L0063
        ROR     A
        AND     #$87
        STA     L0064
        LDX     #$05
        LDA     L5607
        BEQ     L421E

        BCC     L421E

        DEX
.L421E
        JSR     fq1

        JSR     DORND

        AND     #$80
        LDY     #$1F
        STA     (L0020),Y
        LDA     L0315
        BEQ     L41E9

        JSR     Uperc

        STA     L007D
.L4234
        JSR     MPERC

        LDA     L0346
        BNE     L4234

        LDX     #$1F
        JSR     DET1

        JMP     DEATH2

.RSHIPS
        JSR     LSHIPS

        JSR     RESET

        LDA     #$FF
        STA     L008E
        STA     L0087
        LDA     #$20
        JMP     FRCE

.LSHIPS
        JSR     THERE

        LDA     #$06
        BCS     SHIPinA

        JSR     DORND

        AND     #$03
        LDX     L03AE
        CPX     #$03
        ROL     A
        LDX     L03AF
        CPX     #$0A
        ROL     A
        TAX
        LDA     L0358
        AND     #$0C
        CMP     #$08
        BNE     L427D

        TXA
        AND     #$01
        ORA     #$02
        TAX
.L427D
        TXA
.SHIPinA
        CLC
        ADC     #$41
        STA     L4294
        JSR     L0D7A

        LDX     #$8E
        LDY     #$42
        JMP     OSCLI

.L428E
        EQUS    "L.D.MO"

.L4294
        EQUS    "0"

        EQUB    $0D

.ZERO
        LDX     #$3A
        LDA     #$00
.L429A
        STA     L0311,X
        DEX
        BPL     L429A

        RTS

.ZES1
        STX     L0008
        LDA     #$00
        STA     L0007
        TAY
.L42A8
        STA     (L0007),Y
        DEY
        BNE     L42A8

        RTS

.SPS1
        LDX     #$00
        JSR     SPS3

        LDX     #$03
        JSR     SPS3

        LDX     #$06
        JSR     SPS3

.TAS2
        LDA     L00D2
        ORA     L00D5
        ORA     L00D8
        ORA     #$01
        STA     L00DB
        LDA     L00D3
.L42C9
        ORA     L00D6
NOISFR = L42C9+1
        ORA     L00D9
.L42CD
        ASL     L00DB
        ROL     A
        BCS     TA2

        ASL     L00D2
        ROL     L00D3
        ASL     L00D5
        ROL     L00D6
        ASL     L00D8
        ROL     L00D9
        BCC     L42CD

.TA2
        LDA     L00D3
        LSR     A
        ORA     L00D4
        STA     L0034
        LDA     L00D6
        LSR     A
        ORA     L00D7
        STA     L0035
        LDA     L00D9
        LSR     A
        ORA     L00DA
        STA     L0036
.NORM
        LDA     L0034
        JSR     SQUA

        STA     L0082
        LDA     L001B
        STA     L0081
        LDA     L0035
        JSR     SQUA

        STA     L00D1
        LDA     L001B
        ADC     L0081
        STA     L0081
        LDA     L00D1
        ADC     L0082
        STA     L0082
        LDA     L0036
        JSR     SQUA

        STA     L00D1
        LDA     L001B
        ADC     L0081
        STA     L0081
        LDA     L00D1
        ADC     L0082
        STA     L0082
        JSR     LL5

        LDA     L0034
        JSR     TIS2

        STA     L0034
        LDA     L0035
        JSR     TIS2

        STA     L0035
        LDA     L0036
        JSR     TIS2

        STA     L0036
        RTS

.RDKEY
        LDX     #$10
.L4341
        JSR     DKS4

        BMI     L434A

        INX
        BPL     L4341

        TXA
.L434A
        EOR     #$80
        TAX
        RTS

.WARP
        LDX     L033E
        LDA     L0313,X
        ORA     L0320
        ORA     L0341
        BNE     L439F

        LDY     L0908
        BMI     L4368

        TAY
        JSR     MAS2

        LSR     A
        BEQ     L439F

.L4368
        LDY     L092D
        BMI     L4375

        LDY     #$25
        JSR     m

        LSR     A
        BEQ     L439F

.L4375
        LDA     #$81
        STA     L0083
        STA     L0082
        STA     L001B
        LDA     L0908
        JSR     ADD

        STA     L0908
        LDA     L092D
        JSR     ADD

        STA     L092D
        LDA     #$01
        STA     L0087
        STA     L008A
        LSR     A
        STA     L0349
        LDX     L0345
        JMP     LOOK1

.L439F
        LDA     #$28
        BNE     NOISE

.ECMOF
        LDA     #$00
        STA     L0030
        STA     L0340
        JSR     ECBLB

        LDA     #$48
        BNE     NOISE

.EXNO3
        LDA     #$10
        JSR     NOISE

        LDA     #$18
        BNE     NOISE

.BEEP
        LDA     #$20
        BNE     NOISE

.SFRMIS
        LDX     #$01
        JSR     L2590

        BCC     L4418

        LDA     #$78
        JSR     MESS

        LDA     #$30
        BNE     NOISE

.EXNO2
        INC     L039F
        BNE     L43DB

        INC     L03A0
        LDA     #$65
        JSR     MESS

.L43DB
        LDX     #$07
.EXNO
        STX     L00D1
        LDA     #$18
        JSR     NOS1

        LDA     L004D
        LSR     A
        LSR     A
        AND     L00D1
        ORA     #$F1
        STA     L000B
        JSR     NO3

        LDA     #$10
.NOISE
        JSR     NOS1

.NO3
        LDX     L03C6
        BNE     L4418

        LDX     #$09
        LDY     #$00
        LDA     #$07
        JMP     OSWORD

.NOS1
        LSR     A
        ADC     #$03
        TAY
        LDX     #$07
.L440A
        LDA     #$00
        STA     L0009,X
        DEX
        LDA     L3E90,Y
        STA     L0009,X
        DEY
        DEX
        BPL     L440A

.L4418
        EQUB    $60,$E8,$E2,$E6,$E7,$C2,$D1,$C1
        EQUB    $60,$70,$23,$35,$65,$22,$45,$52
        EQUB    $37

.DKS1
        LDX     L4418,Y
        JSR     DKS4

        BPL     L4451

        LDA     #$FF
        STA     L0300,Y
        RTS

.CTRL
        LDX     #$01
.DKS4
        LDA     #$03
        SEI
        STA     LFE40
        LDA     #$7F
        STA     LFE43
        STX     LFE4F
        LDX     LFE4F
        LDA     #$0B
        STA     LFE40
        CLI
        TXA
.L4451
        RTS

.DKS2
        LDA     #$80
        JSR     OSBYTE

        TYA
        EOR     L03CC
        RTS

.DKS3
        STY     L00D1
        CPX     L00D1
        BNE     L4472

        LDA     L0387,X
        EOR     #$FF
        STA     L0387,X
        JSR     BELL

        JSR     DELAY

        LDY     L00D1
.L4472
        RTS

.L4473
        LDA     L033F
        BNE     L44C7

        LDY     #$01
        JSR     DKS1

        INY
        JSR     DKS1

        LDA     LFE40
        TAX
        AND     #$10
        EOR     #$10
        STA     L0307
        LDX     #$01
        JSR     DKS2

        ORA     #$01
        STA     L034C
        LDX     #$02
        JSR     DKS2

        EOR     L03CB
        STA     L034D
        JMP     DK4

.Uperc
        LDA     #$00
        LDY     #$10
.L44A8
        STA     L0300,Y
        DEY
        BNE     L44A8

        RTS

.DOKEY
        JSR     Uperc

        LDA     L03CD
        BNE     L4473

        STA     L03CE
        LDY     #$07
.L44BC
        JSR     DKS1

        DEY
        BNE     L44BC

        LDA     L033F
        BEQ     L4526

.L44C7
        JSR     ZINF

        LDA     #$60
        STA     L0054
        ORA     #$80
        STA     L005C
        STA     L008C
        LDA     L007D
        STA     L0061
        JSR     DOCKIT

        LDA     L0061
        CMP     #$16
        BCC     L44E3

        LDA     #$16
.L44E3
        STA     L007D
        LDA     #$FF
        LDX     #$00
        LDY     L0062
        BEQ     L44F3

        BMI     L44F0

        INX
.L44F0
        STA     L0301,X
.L44F3
        LDA     #$80
        LDX     #$00
        ASL     L0063
        BEQ     L450F

        BCC     L44FE

        INX
.L44FE
        BIT     L0063
        BPL     L4509

        LDA     #$40
        STA     L034C
        LDA     #$00
.L4509
        STA     L0303,X
        LDA     L034C
.L450F
        STA     L034C
        LDA     #$80
        LDX     #$00
        ASL     L0064
        BEQ     L4523

        BCS     L451D

        INX
.L451D
        STA     L0305,X
        LDA     L034D
.L4523
        STA     L034D
.L4526
        LDX     L034C
        LDA     #$07
        LDY     L0303
        BEQ     L4533

        JSR     BUMP2

.L4533
        LDY     L0304
        BEQ     L453B

        JSR     REDU2

.L453B
        STX     L034C
        ASL     A
        LDX     L034D
        LDY     L0305
        BEQ     L454A

        JSR     REDU2

.L454A
        LDY     L0306
        BEQ     L4552

        JSR     BUMP2

.L4552
        STX     L034D
.DK4
        JSR     RDKEY

        STX     L0300
        CPX     #$69
        BNE     L459C

.L455F
        JSR     WSCAN

        JSR     RDKEY

        CPX     #$51
        BNE     L456E

        LDA     #$00
        STA     L03C6
.L456E
        LDY     #$40
.L4570
        JSR     DKS3

        INY
        CPY     #$47
        BNE     L4570

        CPX     #$10
        BNE     L457F

        STX     L03C6
.L457F
        CPX     #$70
        BNE     L4586

        JMP     DEATH2

.L4586
        CPX     #$64
        BNE     L4598

        LDA     L03CE
        EOR     #$FF
        STA     L03CE
        STA     L03CD
        STA     L03CC
.L4598
        CPX     #$59
        BNE     L455F

.L459C
        LDA     L0087
        BNE     L45B4

        LDY     #$10
        LDA     #$FF
.L45A4
        LDX     L4418,Y
        CPX     L0300
        BNE     L45AF

        STA     L0300,Y
.L45AF
        DEY
        CPY     #$07
        BNE     L45A4

.L45B4
        RTS

.L45B5
        STX     L034A
        PHA
        LDA     L03A4
        JSR     mes9

        PLA
.L45C0
        BIT     L6CA9
L45C1 = L45C0+1
.L45C3
        BIT     L6FA9
L45C4 = L45C3+1
.MESS
        LDX     #$00
        STX     L0072
        LDY     #$09
        STY     L002C
        LDY     #$16
        STY     L002D
        CPX     L034A
        BNE     L45B5

        STY     L034A
        STA     L03A4
.mes9
        JSR     L339A

        LSR     L034B
        BCC     L45B4

        LDA     #$FD
        JMP     L339A

.OUCH
        JSR     DORND

        BMI     L45B4

        CPX     #$16
        BCS     L45B4

        LDA     L036F,X
        BEQ     L45B4

        LDA     L034A
        BNE     L45B4

        LDY     #$03
        STY     L034B
        STA     L036F,X
        CPX     #$11
        BCS     L460E

        TXA
        ADC     #$D0
        BNE     MESS

.L460E
        BEQ     L45C1

        CPX     #$12
        BEQ     L45C4

        TXA
        ADC     #$5D
        BNE     MESS

.L4619
        EQUB    $13

.L461A
        EQUB    $82

.L461B
        EQUB    $06

.L461C
        EQUB    $01,$14,$81,$0A,$03,$41,$83,$02
        EQUB    $07,$28,$85,$E2,$1F,$53,$85,$FB
        EQUB    $0F,$C4,$08,$36,$03,$EB,$1D,$08
        EQUB    $78,$9A,$0E,$38,$03,$75,$06,$28
        EQUB    $07,$4E,$01,$11,$1F,$7C,$0D,$1D
        EQUB    $07,$B0,$89,$DC,$3F,$20,$81,$35
        EQUB    $03,$61,$A1,$42,$07,$AB,$A2,$37
        EQUB    $1F,$2D,$C1,$FA,$0F,$35,$0F,$C0
        EQUB    $07

.L465D
        TYA
        LDY     #$02
        JSR     TIS3

        STA     L005A
        JMP     TI3

.L4668
        TAX
        LDA     L0035
        AND     #$60
        BEQ     L465D

        LDA     #$02
        JSR     TIS3

        STA     L0058
        JMP     TI3

.TIDY
        LDA     L0050
        STA     L0034
        LDA     L0052
        STA     L0035
        LDA     L0054
        STA     L0036
        JSR     NORM

        LDA     L0034
        STA     L0050
        LDA     L0035
        STA     L0052
        LDA     L0036
        STA     L0054
        LDY     #$04
        LDA     L0034
        AND     #$60
        BEQ     L4668

        LDX     #$02
        LDA     #$00
        JSR     TIS3

        STA     L0056
.TI3
        LDA     L0056
        STA     L0034
        LDA     L0058
        STA     L0035
        LDA     L005A
        STA     L0036
        JSR     NORM

        LDA     L0034
        STA     L0056
        LDA     L0035
        STA     L0058
        LDA     L0036
        STA     L005A
        LDA     L0052
        STA     L0081
        LDA     L005A
        JSR     MULT12

        LDX     L0054
        LDA     L0058
        JSR     TIS1

        EOR     #$80
        STA     L005C
        LDA     L0056
        JSR     MULT12

        LDX     L0050
        LDA     L005A
        JSR     TIS1

        EOR     #$80
        STA     L005E
        LDA     L0058
        JSR     MULT12

        LDX     L0052
        LDA     L0056
        JSR     TIS1

        EOR     #$80
.L46F2
        STA     L0060
LL155 = L46F2+1
        LDA     #$00
        LDX     #$0E
.L46F8
        STA     L004F,X
        DEX
        DEX
        BPL     L46F8

        RTS

.TIS2
        TAY
        AND     #$7F
        CMP     L0081
        BCS     L4726

        LDX     #$FE
        STX     L00D1
.L470A
        ASL     A
        CMP     L0081
        BCC     L4711

        SBC     L0081
.L4711
        ROL     L00D1
        BCS     L470A

        LDA     L00D1
        LSR     A
        LSR     A
        STA     L00D1
        LSR     A
        ADC     L00D1
        STA     L00D1
        TYA
        AND     #$80
        ORA     L00D1
        RTS

.L4726
        TYA
        AND     #$80
        ORA     #$60
        RTS

.TIS3
        STA     L001D
        LDA     L0050,X
        STA     L0081
        LDA     L0056,X
        JSR     MULT12

        LDX     L0050,Y
        STX     L0081
        LDA     L0056,Y
        JSR     MAD

        STX     L001B
        LDY     L001D
        LDX     L0050,Y
        STX     L0081
        EOR     #$80
        STA     L001C
        EOR     L0081
        AND     #$80
        STA     L00D1
        LDA     #$00
        LDX     #$10
        ASL     L001B
        ROL     L001C
        ASL     L0081
        LSR     L0081
.L475F
        ROL     A
        CMP     L0081
        BCC     L4766

        SBC     L0081
.L4766
        ROL     L001B
        ROL     L001C
        DEX
        BNE     L475F

        LDA     L001B
        ORA     L00D1
        RTS

.SHPPT
        JSR     EE51

        JSR     PROJ

        ORA     L00D3
        BNE     L479D

        LDA     L00E0
        CMP     #$BE
        BCS     L479D

        LDY     #$02
        JSR     Shpt

        LDY     #$06
        LDA     L00E0
        ADC     #$01
        JSR     Shpt

        LDA     #$08
        ORA     L0065
        STA     L0065
        LDA     #$08
        JMP     L4F74

.L479B
        PLA
        PLA
.L479D
        LDA     #$F7
        AND     L0065
        STA     L0065
        RTS

.Shpt
        STA     (L0067),Y
        INY
        INY
        STA     (L0067),Y
        LDA     L00D2
        DEY
        STA     (L0067),Y
        ADC     #$03
        BCS     L479B

        DEY
        DEY
        STA     (L0067),Y
        RTS

.LL5
        LDY     L0082
        LDA     L0081
        STA     L0083
        LDX     #$00
        STX     L0081
        LDA     #$08
        STA     L00D1
.L47C6
        CPX     L0081
        BCC     L47D8

        BNE     L47D0

        CPY     #$40
        BCC     L47D8

.L47D0
        TYA
        SBC     #$40
        TAY
        TXA
        SBC     L0081
        TAX
.L47D8
        ROL     L0081
        ASL     L0083
        TYA
        ROL     A
        TAY
        TXA
        ROL     A
        TAX
        ASL     L0083
        TYA
        ROL     A
        TAY
        TXA
        ROL     A
        TAX
        DEC     L00D1
        BNE     L47C6

        RTS

.LL28
        CMP     L0081
        BCS     L480D

.L47F3
        LDX     #$FE
        STX     L0082
.L47F7
        ASL     A
        BCS     L4805

        CMP     L0081
        BCC     L4800

        SBC     L0081
.L4800
        ROL     L0082
        BCS     L47F7

        RTS

.L4805
        SBC     L0081
        SEC
        ROL     L0082
        BCS     L47F7

        RTS

.L480D
        LDA     #$FF
        STA     L0082
        RTS

.LL38
        EOR     L0083
        BMI     L481C

        LDA     L0081
        CLC
        ADC     L0082
        RTS

.L481C
        LDA     L0082
        SEC
        SBC     L0081
        BCC     L4825

        CLC
        RTS

.L4825
        PHA
        LDA     L0083
        EOR     #$80
        STA     L0083
        PLA
        EOR     #$FF
        ADC     #$01
        RTS

.LL51
        LDX     #$00
        LDY     #$00
.L4836
        LDA     L0034
        STA     L0081
        LDA     L0009,X
        JSR     FMLTU

        STA     L00D1
        LDA     L0035
        EOR     L000A,X
        STA     L0083
        LDA     L0036
        STA     L0081
        LDA     L000B,X
        JSR     FMLTU

        STA     L0081
        LDA     L00D1
        STA     L0082
        LDA     L0037
        EOR     L000C,X
        JSR     LL38

        STA     L00D1
        LDA     L0038
        STA     L0081
        LDA     L000D,X
        JSR     FMLTU

        STA     L0081
        LDA     L00D1
        STA     L0082
        LDA     L0039
        EOR     L000E,X
        JSR     LL38

        STA     L003A,Y
        LDA     L0083
        STA     L003B,Y
        INY
        INY
        TXA
        CLC
        ADC     #$06
        TAX
        CMP     #$11
        BCC     L4836

        RTS

.L4889
        JMP     PLANET

.LL9
        LDA     L008C
        BMI     L4889

        LDA     #$1F
        STA     L0096
        LDA     L006A
        BMI     EE51

        LDA     #$20
        BIT     L0065
        BNE     L48CB

        BPL     L48CB

        ORA     L0065
        AND     #$3F
        STA     L0065
        LDA     #$00
        LDY     #$1C
        STA     (L0020),Y
        LDY     #$1E
        STA     (L0020),Y
        JSR     EE51

        LDY     #$01
        LDA     #$12
        STA     (L0067),Y
        LDY     #$07
        LDA     (L001E),Y
        LDY     #$02
        STA     (L0067),Y
.L48C1
        INY
        JSR     DORND

        STA     (L0067),Y
        CPY     #$06
        BNE     L48C1

.L48CB
        LDA     L004E
        BPL     L48EC

.L48CF
        LDA     L0065
        AND     #$20
        BEQ     EE51

        LDA     L0065
        AND     #$F7
        STA     L0065
        JMP     DOEXP

.EE51
        LDA     #$08
        BIT     L0065
        BEQ     L48EB

        EOR     L0065
        STA     L0065
        JMP     L4F78

.L48EB
        RTS

.L48EC
        LDA     L004D
        CMP     #$C0
        BCS     L48CF

        LDA     L0046
        CMP     L004C
        LDA     L0047
        SBC     L004D
        BCS     L48CF

        LDA     L0049
        CMP     L004C
        LDA     L004A
        SBC     L004D
        BCS     L48CF

        LDY     #$06
        LDA     (L001E),Y
        TAX
        LDA     #$FF
        STA     L0100,X
        STA     L0101,X
        LDA     L004C
        STA     L00D1
        LDA     L004D
        LSR     A
        ROR     L00D1
        LSR     A
        ROR     L00D1
        LSR     A
        ROR     L00D1
        LSR     A
        BNE     L492F

        LDA     L00D1
        ROR     A
        LSR     A
        LSR     A
        LSR     A
        STA     L0096
        BPL     L4940

.L492F
        LDY     #$0D
        LDA     (L001E),Y
        CMP     L004D
        BCS     L4940

        LDA     #$20
        AND     L0065
        BNE     L4940

        JMP     SHPPT

.L4940
        LDX     #$05
.L4942
        LDA     L005B,X
        STA     L0009,X
        LDA     L0055,X
        STA     L000F,X
        LDA     L004F,X
        STA     L0015,X
        DEX
        BPL     L4942

        LDA     #$C5
        STA     L0081
        LDY     #$10
.L4957
        LDA     L0009,Y
        ASL     A
        LDA     L000A,Y
        ROL     A
        JSR     LL28

        LDX     L0082
        STX     L0009,Y
        DEY
        DEY
        BPL     L4957

        LDX     #$08
.L496C
        LDA     L0046,X
        STA     L0072,X
        DEX
        BPL     L496C

        LDA     #$FF
        STA     L00E1
        LDY     #$0C
        LDA     L0065
        AND     #$20
        BEQ     L4991

        LDA     (L001E),Y
        LSR     A
        LSR     A
        TAX
        LDA     #$FF
.L4986
        STA     L00D2,X
        DEX
        BPL     L4986

        INX
        STX     L0096
.L498E
        JMP     LL42

.L4991
        LDA     (L001E),Y
        BEQ     L498E

        STA     L0097
        LDY     #$12
        LDA     (L001E),Y
        TAX
        LDA     L0079
        TAY
        BEQ     L49B0

.L49A1
        INX
        LSR     L0076
        ROR     L0075
        LSR     L0073
        ROR     L0072
        LSR     A
        ROR     L0078
        TAY
        BNE     L49A1

.L49B0
        STX     L0086
        LDA     L007A
        STA     L0039
        LDA     L0072
        STA     L0034
        LDA     L0074
        STA     L0035
        LDA     L0075
        STA     L0036
        LDA     L0077
        STA     L0037
        LDA     L0078
        STA     L0038
        JSR     LL51

        LDA     L003A
        STA     L0072
        LDA     L003B
        STA     L0074
        LDA     L003C
        STA     L0075
        LDA     L003D
        STA     L0077
        LDA     L003E
        STA     L0078
        LDA     L003F
        STA     L007A
        LDY     #$04
        LDA     (L001E),Y
        CLC
        ADC     L001E
        STA     L0022
        LDY     #$11
        LDA     (L001E),Y
        ADC     L001F
        STA     L0023
        LDY     #$00
.LL86
        LDA     (L0022),Y
        STA     L003B
        AND     #$1F
        CMP     L0096
        BCS     L4A11

        TYA
        LSR     A
        LSR     A
        TAX
        LDA     #$FF
        STA     L00D2,X
        TYA
        ADC     #$04
        TAY
        JMP     LL88

.L4A11
        LDA     L003B
        ASL     A
        STA     L003D
        ASL     A
        STA     L003F
        INY
        LDA     (L0022),Y
        STA     L003A
        INY
        LDA     (L0022),Y
        STA     L003C
        INY
        LDA     (L0022),Y
        STA     L003E
        LDX     L0086
        CPX     #$04
        BCC     L4A51

        LDA     L0072
        STA     L0034
        LDA     L0074
        STA     L0035
        LDA     L0075
        STA     L0036
        LDA     L0077
        STA     L0037
        LDA     L0078
        STA     L0038
        LDA     L007A
        STA     L0039
        JMP     LL89

.L4A49
        LSR     L0072
        LSR     L0078
        LSR     L0075
        LDX     #$01
.L4A51
        LDA     L003A
        STA     L0034
        LDA     L003C
        STA     L0036
        LDA     L003E
        DEX
        BMI     L4A66

.L4A5E
        LSR     L0034
        LSR     L0036
        LSR     A
        DEX
        BPL     L4A5E

.L4A66
        STA     L0082
        LDA     L003F
        STA     L0083
        LDA     L0078
        STA     L0081
        LDA     L007A
        JSR     LL38

        BCS     L4A49

        STA     L0038
        LDA     L0083
        STA     L0039
        LDA     L0034
        STA     L0082
        LDA     L003B
        STA     L0083
        LDA     L0072
        STA     L0081
        LDA     L0074
        JSR     LL38

        BCS     L4A49

        STA     L0034
        LDA     L0083
        STA     L0035
        LDA     L0036
        STA     L0082
        LDA     L003D
        STA     L0083
        LDA     L0075
        STA     L0081
        LDA     L0077
        JSR     LL38

        BCS     L4A49

        STA     L0036
        LDA     L0083
        STA     L0037
.LL89
        LDA     L003A
        STA     L0081
        LDA     L0034
        JSR     FMLTU

        STA     L00D1
        LDA     L003B
        EOR     L0035
        STA     L0083
        LDA     L003C
        STA     L0081
        LDA     L0036
        JSR     FMLTU

        STA     L0081
        LDA     L00D1
        STA     L0082
        LDA     L003D
        EOR     L0037
        JSR     LL38

        STA     L00D1
        LDA     L003E
        STA     L0081
        LDA     L0038
        JSR     FMLTU

        STA     L0081
        LDA     L00D1
        STA     L0082
        LDA     L0039
        EOR     L003F
        JSR     LL38

        PHA
        TYA
        LSR     A
        LSR     A
        TAX
        PLA
        BIT     L0083
        BMI     L4AFA

        LDA     #$00
.L4AFA
        STA     L00D2,X
        INY
.LL88
        CPY     L0097
        BCS     LL42

        JMP     LL86

.LL42
        LDY     L000B
        LDX     L000C
        LDA     L000F
        STA     L000B
        LDA     L0010
        STA     L000C
        STY     L000F
        STX     L0010
        LDY     L000D
        LDX     L000E
        LDA     L0015
        STA     L000D
        LDA     L0016
        STA     L000E
        STY     L0015
        STX     L0016
        LDY     L0013
        LDX     L0014
        LDA     L0017
        STA     L0013
        LDA     L0018
        STA     L0014
        STY     L0017
        STX     L0018
        LDY     #$08
        LDA     (L001E),Y
        STA     L0097
        LDA     L001E
        CLC
        ADC     #$14
        STA     L0022
        LDA     L001F
        ADC     #$00
        STA     L0023
        LDY     #$00
        STY     L0093
.LL48
        STY     L0086
        LDA     (L0022),Y
        STA     L0034
        INY
        LDA     (L0022),Y
        STA     L0036
        INY
        LDA     (L0022),Y
        STA     L0038
        INY
        LDA     (L0022),Y
        STA     L00D1
        AND     #$1F
        CMP     L0096
        BCC     L4B94

        INY
        LDA     (L0022),Y
        STA     L001B
        AND     #$0F
        TAX
        LDA     L00D2,X
        BNE     L4B97

        LDA     L001B
        LSR     A
        LSR     A
        LSR     A
        LSR     A
        TAX
        LDA     L00D2,X
        BNE     L4B97

        INY
        LDA     (L0022),Y
        STA     L001B
        AND     #$0F
        TAX
        LDA     L00D2,X
        BNE     L4B97

        LDA     L001B
        LSR     A
        LSR     A
        LSR     A
        LSR     A
        TAX
        LDA     L00D2,X
        BNE     L4B97

.L4B94
        JMP     LL50

.L4B97
        LDA     L00D1
        STA     L0035
        ASL     A
        STA     L0037
        ASL     A
        STA     L0039
        JSR     LL51

        LDA     L0048
        STA     L0036
        EOR     L003B
        BMI     L4BBC

        CLC
        LDA     L003A
        ADC     L0046
        STA     L0034
        LDA     L0047
        ADC     #$00
        STA     L0035
        JMP     LL53

.L4BBC
        LDA     L0046
        SEC
        SBC     L003A
        STA     L0034
        LDA     L0047
        SBC     #$00
        STA     L0035
        BCS     LL53

        EOR     #$FF
        STA     L0035
        LDA     #$01
        SBC     L0034
        STA     L0034
        BCC     L4BD9

        INC     L0035
.L4BD9
        LDA     L0036
        EOR     #$80
        STA     L0036
.LL53
        LDA     L004B
        STA     L0039
        EOR     L003D
        BMI     L4BF7

        CLC
        LDA     L003C
        ADC     L0049
        STA     L0037
        LDA     L004A
        ADC     #$00
        STA     L0038
        JMP     LL55

.L4BF7
        LDA     L0049
        SEC
        SBC     L003C
        STA     L0037
        LDA     L004A
        SBC     #$00
        STA     L0038
        BCS     LL55

        EOR     #$FF
        STA     L0038
        LDA     L0037
        EOR     #$FF
        ADC     #$01
        STA     L0037
        LDA     L0039
        EOR     #$80
        STA     L0039
        BCC     LL55

        INC     L0038
.LL55
        LDA     L003F
        BMI     L4C6A

        LDA     L003E
        CLC
        ADC     L004C
        STA     L00D1
        LDA     L004D
        ADC     #$00
        STA     L0080
        JMP     LL57

.LL61
        LDX     L0081
        BEQ     L4C50

        LDX     #$00
.L4C36
        LSR     A
        INX
        CMP     L0081
        BCS     L4C36

        STX     L0083
        JSR     LL28

        LDX     L0083
        LDA     L0082
.L4C45
        ASL     A
        ROL     L0080
        BMI     L4C50

        DEX
        BNE     L4C45

        STA     L0082
        RTS

.L4C50
        LDA     #$32
        STA     L0082
        STA     L0080
        RTS

.L4C57
        LDA     #$80
        SEC
        SBC     L0082
        STA     L0100,X
        INX
        LDA     #$00
        SBC     L0080
        STA     L0100,X
        JMP     LL66

.L4C6A
        LDA     L004C
        SEC
        SBC     L003E
        STA     L00D1
        LDA     L004D
        SBC     #$00
        STA     L0080
        BCC     L4C81

        BNE     LL57

        LDA     L00D1
        CMP     #$04
        BCS     LL57

.L4C81
        LDA     #$00
        STA     L0080
        LDA     #$04
        STA     L00D1
.LL57
        LDA     L0080
        ORA     L0035
        ORA     L0038
        BEQ     L4CA0

        LSR     L0035
        ROR     L0034
        LSR     L0038
        ROR     L0037
        LSR     L0080
        ROR     L00D1
        JMP     LL57

.L4CA0
        LDA     L00D1
        STA     L0081
        LDA     L0034
        CMP     L0081
        BCC     L4CB0

        JSR     LL61

        JMP     LL65

.L4CB0
        JSR     LL28

.LL65
        LDX     L0093
        LDA     L0036
        BMI     L4C57

        LDA     L0082
        CLC
        ADC     #$80
        STA     L0100,X
        INX
        LDA     L0080
        ADC     #$00
        STA     L0100,X
.LL66
        TXA
        PHA
        LDA     #$00
        STA     L0080
        LDA     L00D1
        STA     L0081
        LDA     L0037
        CMP     L0081
        BCC     L4CF2

        JSR     LL61

        JMP     LL68

.L4CDF
        LDA     #$60
        CLC
        ADC     L0082
        STA     L0100,X
        INX
        LDA     #$00
        ADC     L0080
        STA     L0100,X
        JMP     LL50

.L4CF2
        JSR     LL28

.LL68
        PLA
        TAX
        INX
        LDA     L0039
        BMI     L4CDF

        LDA     #$60
        SEC
        SBC     L0082
        STA     L0100,X
        INX
        LDA     #$00
        SBC     L0080
        STA     L0100,X
.LL50
        CLC
        LDA     L0093
        ADC     #$04
        STA     L0093
        LDA     L0086
        ADC     #$06
        TAY
        BCS     L4D21

        CMP     L0097
        BCS     L4D21

        JMP     LL48

.L4D21
        LDA     L0065
        AND     #$20
        BEQ     L4D30

        LDA     L0065
        ORA     #$08
        STA     L0065
        JMP     DOEXP

.L4D30
        LDA     #$08
        BIT     L0065
        BEQ     L4D3B

        JSR     L4F78

        LDA     #$08
.L4D3B
        ORA     L0065
        STA     L0065
        LDY     #$09
        LDA     (L001E),Y
        STA     L0097
        LDY     #$00
        STY     L0080
        STY     L0086
        INC     L0080
        BIT     L0065
        BVC     L4DA5

        LDA     L0065
        AND     #$BF
        STA     L0065
        LDY     #$06
        LDA     (L001E),Y
        TAY
        LDX     L0100,Y
        STX     L0034
        INX
        BEQ     L4DA5

        LDX     L0101,Y
        STX     L0035
        INX
        BEQ     L4DA5

        LDX     L0102,Y
        STX     L0036
        LDX     L0103,Y
        STX     L0037
        LDA     #$00
        STA     L0038
        STA     L0039
        STA     L003B
        LDA     L004C
        STA     L003A
        LDA     L0048
        BPL     L4D88

        DEC     L0038
.L4D88
        JSR     LL145

        BCS     L4DA5

        LDY     L0080
        LDA     L0034
        STA     (L0067),Y
        INY
        LDA     L0035
        STA     (L0067),Y
        INY
        LDA     L0036
        STA     (L0067),Y
        INY
        LDA     L0037
        STA     (L0067),Y
        INY
        STY     L0080
.L4DA5
        LDY     #$03
        CLC
        LDA     (L001E),Y
        ADC     L001E
        STA     L0022
        LDY     #$10
        LDA     (L001E),Y
        ADC     L001F
        STA     L0023
        LDY     #$05
        LDA     (L001E),Y
        STA     L0006
        LDY     L0086
.LL75
        LDA     (L0022),Y
        CMP     L0096
        BCC     L4DDC

        INY
        LDA     (L0022),Y
        INY
        STA     L001B
        AND     #$0F
        TAX
        LDA     L00D2,X
        BNE     L4DDF

        LDA     L001B
        LSR     A
        LSR     A
        LSR     A
        LSR     A
        TAX
        LDA     L00D2,X
        BNE     L4DDF

.L4DDC
        JMP     L4F5B

.L4DDF
        LDA     (L0022),Y
        TAX
        INY
        LDA     (L0022),Y
        STA     L0081
        LDA     L0101,X
        STA     L0035
        LDA     L0100,X
        STA     L0034
        LDA     L0102,X
        STA     L0036
        LDA     L0103,X
        STA     L0037
        LDX     L0081
        LDA     L0100,X
        STA     L0038
        LDA     L0103,X
        STA     L003B
        LDA     L0102,X
        STA     L003A
        LDA     L0101,X
        STA     L0039
        JSR     LL147

        BCS     L4DDC

        JMP     LL80

.LL145
        LDA     #$00
        STA     L0090
        LDA     L0039
.LL147
        LDX     #$BF
        ORA     L003B
        BNE     L4E2B

        CPX     L003A
        BCC     L4E2B

        LDX     #$00
.L4E2B
        STX     L0089
        LDA     L0035
        ORA     L0037
        BNE     L4E4F

        LDA     #$BF
        CMP     L0036
        BCC     L4E4F

        LDA     L0089
        BNE     L4E4D

.LL146
        LDA     L0036
        STA     L0035
        LDA     L0038
        STA     L0036
        LDA     L003A
        STA     L0037
        CLC
        RTS

.L4E4B
        SEC
        RTS

.L4E4D
        LSR     L0089
.L4E4F
        LDA     L0089
        BPL     L4E82

        LDA     L0035
        AND     L0039
        BMI     L4E4B

        LDA     L0037
        AND     L003B
        BMI     L4E4B

        LDX     L0035
        DEX
        TXA
        LDX     L0039
        DEX
        STX     L003C
        ORA     L003C
        BPL     L4E4B

        LDA     L0036
        CMP     #$C0
        LDA     L0037
        SBC     #$00
        STA     L003C
        LDA     L003A
        CMP     #$C0
        LDA     L003B
        SBC     #$00
        ORA     L003C
        BPL     L4E4B

.L4E82
        TYA
        PHA
        LDA     L0038
        SEC
        SBC     L0034
        STA     L003C
        LDA     L0039
        SBC     L0035
        STA     L003D
        LDA     L003A
        SEC
        SBC     L0036
        STA     L003E
        LDA     L003B
        SBC     L0037
        STA     L003F
        EOR     L003D
        STA     L0083
        LDA     L003F
        BPL     L4EB3

        LDA     #$00
        SEC
        SBC     L003E
        STA     L003E
        LDA     #$00
        SBC     L003F
        STA     L003F
.L4EB3
        LDA     L003D
        BPL     LL111

        SEC
        LDA     #$00
        SBC     L003C
        STA     L003C
        LDA     #$00
        SBC     L003D
.LL111
        TAX
        BNE     L4EC9

        LDX     L003F
        BEQ     L4ED3

.L4EC9
        LSR     A
        ROR     L003C
        LSR     L003F
        ROR     L003E
        JMP     LL111

.L4ED3
        STX     L00D1
        LDA     L003C
        CMP     L003E
        BCC     L4EE5

        STA     L0081
        LDA     L003E
        JSR     LL28

        JMP     LL116

.L4EE5
        LDA     L003E
        STA     L0081
        LDA     L003C
        JSR     LL28

        DEC     L00D1
.LL116
        LDA     L0082
        STA     L003C
        LDA     L0083
        STA     L003D
        LDA     L0089
        BEQ     L4EFE

        BPL     L4F11

.L4EFE
        JSR     LL118

        LDA     L0089
        BPL     L4F36

        LDA     L0035
        ORA     L0037
        BNE     L4F3B

        LDA     L0036
        CMP     #$C0
        BCS     L4F3B

.L4F11
        LDX     L0034
        LDA     L0038
        STA     L0034
        STX     L0038
        LDA     L0039
        LDX     L0035
        STX     L0039
        STA     L0035
        LDX     L0036
        LDA     L003A
        STA     L0036
        STX     L003A
        LDA     L003B
        LDX     L0037
        STX     L003B
        STA     L0037
        JSR     LL118

        DEC     L0090
.L4F36
        PLA
        TAY
        JMP     LL146

.L4F3B
        PLA
        TAY
        SEC
        RTS

.LL80
        LDY     L0080
        LDA     L0034
        STA     (L0067),Y
        INY
        LDA     L0035
        STA     (L0067),Y
        INY
        LDA     L0036
        STA     (L0067),Y
        INY
        LDA     L0037
        STA     (L0067),Y
        INY
        STY     L0080
        CPY     L0006
        BCS     LL81

.L4F5B
        INC     L0086
        LDY     L0086
        CPY     L0097
        BCS     LL81

        LDY     #$00
        LDA     L0022
        ADC     #$04
        STA     L0022
        BCC     L4F6F

        INC     L0023
.L4F6F
        JMP     LL75

.LL81
        LDA     L0080
.L4F74
        LDY     #$00
        STA     (L0067),Y
.L4F78
        LDY     #$00
        LDA     (L0067),Y
        STA     L0097
        CMP     #$04
        BCC     L4F9E

        INY
.L4F83
        LDA     (L0067),Y
        STA     L0034
        INY
        LDA     (L0067),Y
        STA     L0035
        INY
        LDA     (L0067),Y
        STA     L0036
        INY
        LDA     (L0067),Y
        STA     L0037
        JSR     LOIN

        INY
        CPY     L0097
        BCC     L4F83

.L4F9E
        RTS

.LL118
        LDA     L0035
        BPL     L4FBA

        STA     L0083
        JSR     LL120

        TXA
        CLC
        ADC     L0036
        STA     L0036
        TYA
        ADC     L0037
        STA     L0037
        LDA     #$00
        STA     L0034
        STA     L0035
        TAX
.L4FBA
        BEQ     L4FD5

        STA     L0083
        DEC     L0083
        JSR     LL120

        TXA
        CLC
        ADC     L0036
        STA     L0036
        TYA
        ADC     L0037
        STA     L0037
        LDX     #$FF
        STX     L0034
        INX
        STX     L0035
.L4FD5
        LDA     L0037
        BPL     L4FF3

        STA     L0083
        LDA     L0036
        STA     L0082
        JSR     LL123

        TXA
        CLC
        ADC     L0034
        STA     L0034
        TYA
        ADC     L0035
        STA     L0035
        LDA     #$00
        STA     L0036
        STA     L0037
.L4FF3
        LDA     L0036
        SEC
        SBC     #$C0
        STA     L0082
        LDA     L0037
        SBC     #$00
        STA     L0083
        BCC     L5018

        JSR     LL123

        TXA
        CLC
        ADC     L0034
        STA     L0034
        TYA
        ADC     L0035
        STA     L0035
        LDA     #$BF
        STA     L0036
        LDA     #$00
        STA     L0037
.L5018
        RTS

.LL120
        LDA     L0034
        STA     L0082
        JSR     LL129

        PHA
        LDX     L00D1
        BNE     L5050

.L5025
        LDA     #$00
        TAX
        TAY
        LSR     L0083
        ROR     L0082
        ASL     L0081
        BCC     L503A

.L5031
        TXA
        CLC
        ADC     L0082
        TAX
        TYA
        ADC     L0083
        TAY
.L503A
        LSR     L0083
        ROR     L0082
        ASL     L0081
        BCS     L5031

        BNE     L503A

        PLA
        BPL     L5077

        RTS

.LL123
        JSR     LL129

        PHA
        LDX     L00D1
        BNE     L5025

.L5050
        LDA     #$FF
        TAY
        ASL     A
        TAX
.L5055
        ASL     L0082
        ROL     L0083
        LDA     L0083
        BCS     L5061

        CMP     L0081
        BCC     L506C

.L5061
        SBC     L0081
        STA     L0083
        LDA     L0082
        SBC     #$00
        STA     L0082
        SEC
.L506C
        TXA
        ROL     A
        TAX
        TYA
        ROL     A
        TAY
        BCS     L5055

        PLA
        BMI     L5083

.L5077
        TXA
        EOR     #$FF
        ADC     #$01
        TAX
        TYA
        EOR     #$FF
        ADC     #$00
        TAY
.L5083
        RTS

.LL129
        LDX     L003C
        STX     L0081
        LDA     L0083
        BPL     L509D

        LDA     #$00
        SEC
        SBC     L0082
        STA     L0082
        LDA     L0083
        PHA
        EOR     #$FF
        ADC     #$00
        STA     L0083
        PLA
.L509D
        EOR     L003D
        RTS

.MVEIT
        LDA     L0065
        AND     #$A0
        BNE     L50CB

        LDA     L008A
        EOR     L0084
        AND     #$0F
        BNE     L50B1

        JSR     TIDY

.L50B1
        LDX     L008C
        BPL     L50B8

        JMP     MV40

.L50B8
        LDA     L0066
        BPL     L50CB

        CPX     #$01
        BEQ     L50C8

        LDA     L008A
        EOR     L0084
        AND     #$07
        BNE     L50CB

.L50C8
        JSR     TACTICS

.L50CB
        JSR     SCAN

        LDA     L0061
        ASL     A
        ASL     A
        STA     L0081
        LDA     L0050
        AND     #$7F
        JSR     FMLTU

        STA     L0082
        LDA     L0050
        LDX     #$00
        JSR     L524A

        LDA     L0052
        AND     #$7F
        JSR     FMLTU

        STA     L0082
        LDA     L0052
        LDX     #$03
        JSR     L524A

        LDA     L0054
        AND     #$7F
        JSR     FMLTU

        STA     L0082
        LDA     L0054
        LDX     #$06
        JSR     L524A

        LDA     L0061
        CLC
        ADC     L0062
        BPL     L510D

        LDA     #$00
.L510D
        LDY     #$0F
        CMP     (L001E),Y
        BCC     L5115

        LDA     (L001E),Y
.L5115
        STA     L0061
        LDA     #$00
        STA     L0062
        LDX     L0031
        LDA     L0046
        EOR     #$FF
        STA     L001B
        LDA     L0047
        JSR     L2877

        STA     L001D
        LDA     L0033
        EOR     L0048
        LDX     #$03
        JSR     MVT6

        STA     L009E
        LDA     L001C
        STA     L009C
        EOR     #$FF
        STA     L001B
        LDA     L001D
        STA     L009D
        LDX     L002B
        JSR     L2877

        STA     L001D
        LDA     L009E
        EOR     L007B
        LDX     #$06
        JSR     MVT6

        STA     L004E
        LDA     L001C
        STA     L004C
        EOR     #$FF
        STA     L001B
        LDA     L001D
        STA     L004D
        JSR     MLTU2

        STA     L001D
        LDA     L009E
        STA     L004B
        EOR     L007B
        EOR     L004E
        BPL     L517D

        LDA     L001C
        ADC     L009C
        STA     L0049
        LDA     L001D
        ADC     L009D
        STA     L004A
        JMP     MV44

.L517D
        LDA     L009C
        SBC     L001C
        STA     L0049
        LDA     L009D
        SBC     L001D
        STA     L004A
        BCS     MV44

        LDA     #$01
        SBC     L0049
        STA     L0049
        LDA     #$00
        SBC     L004A
        STA     L004A
        LDA     L004B
        EOR     #$80
        STA     L004B
.MV44
        LDX     L0031
        LDA     L0049
        EOR     #$FF
        STA     L001B
        LDA     L004A
        JSR     L2877

        STA     L001D
        LDA     L0032
        EOR     L004B
        LDX     #$00
        JSR     MVT6

        STA     L0048
        LDA     L001D
        STA     L0047
        LDA     L001C
        STA     L0046
.MV45
        LDA     L007D
        STA     L0082
        LDA     #$80
        LDX     #$06
        JSR     MVT1

        LDA     L008C
        AND     #$81
        CMP     #$81
        BNE     L51D3

        RTS

.L51D3
        LDY     #$09
        JSR     MVS4

        LDY     #$0F
        JSR     MVS4

        LDY     #$15
        JSR     MVS4

        LDA     L0064
        AND     #$80
        STA     L009A
        LDA     L0064
        AND     #$7F
        BEQ     L520B

        CMP     #$7F
        SBC     #$00
        ORA     L009A
        STA     L0064
        LDX     #$0F
        LDY     #$09
        JSR     MVS5

        LDX     #$11
        LDY     #$0B
        JSR     MVS5

        LDX     #$13
        LDY     #$0D
        JSR     MVS5

.L520B
        LDA     L0063
        AND     #$80
        STA     L009A
        LDA     L0063
        AND     #$7F
        BEQ     L5234

        CMP     #$7F
        SBC     #$00
        ORA     L009A
        STA     L0063
        LDX     #$0F
        LDY     #$15
        JSR     MVS5

        LDX     #$11
        LDY     #$17
        JSR     MVS5

        LDX     #$13
        LDY     #$19
        JSR     MVS5

.L5234
        LDA     L0065
        AND     #$A0
        BNE     L5243

        LDA     L0065
        ORA     #$10
        STA     L0065
        JMP     SCAN

.L5243
        LDA     L0065
        AND     #$EF
        STA     L0065
        RTS

.L524A
        AND     #$80
.MVT1
        ASL     A
        STA     L0083
        LDA     #$00
        ROR     A
        STA     L00D1
        LSR     L0083
        EOR     L0048,X
        BMI     L526F

        LDA     L0082
        ADC     L0046,X
        STA     L0046,X
        LDA     L0083
        ADC     L0047,X
        STA     L0047,X
        LDA     L0048,X
        ADC     #$00
        ORA     L00D1
        STA     L0048,X
        RTS

.L526F
        LDA     L0046,X
        SEC
        SBC     L0082
        STA     L0046,X
        LDA     L0047,X
        SBC     L0083
        STA     L0047,X
        LDA     L0048,X
        AND     #$7F
        SBC     #$00
        ORA     #$80
        EOR     L00D1
        STA     L0048,X
        BCS     L52A0

        LDA     #$01
        SBC     L0046,X
        STA     L0046,X
        LDA     #$00
        SBC     L0047,X
        STA     L0047,X
        LDA     #$00
        SBC     L0048,X
        AND     #$7F
        ORA     L00D1
        STA     L0048,X
.L52A0
        RTS

.MVS4
        LDA     L008D
        STA     L0081
        LDX     L0048,Y
        STX     L0082
        LDX     L0049,Y
        STX     L0083
        LDX     L0046,Y
        STX     L001B
        LDA     L0047,Y
        EOR     #$80
        JSR     MAD

        STA     L0049,Y
        STX     L0048,Y
        STX     L001B
        LDX     L0046,Y
        STX     L0082
        LDX     L0047,Y
        STX     L0083
        LDA     L0049,Y
        JSR     MAD

        STA     L0047,Y
        STX     L0046,Y
        STX     L001B
        LDA     L002A
        STA     L0081
        LDX     L0048,Y
        STX     L0082
        LDX     L0049,Y
        STX     L0083
        LDX     L004A,Y
        STX     L001B
        LDA     L004B,Y
        EOR     #$80
        JSR     MAD

        STA     L0049,Y
        STX     L0048,Y
        STX     L001B
        LDX     L004A,Y
        STX     L0082
        LDX     L004B,Y
        STX     L0083
        LDA     L0049,Y
        JSR     MAD

        STA     L004B,Y
        STX     L004A,Y
        RTS

.MVT6
        TAY
        EOR     L0048,X
        BMI     L531C

        LDA     L001C
        CLC
        ADC     L0046,X
        STA     L001C
        LDA     L001D
        ADC     L0047,X
        STA     L001D
        TYA
        RTS

.L531C
        LDA     L0046,X
        SEC
        SBC     L001C
        STA     L001C
        LDA     L0047,X
        SBC     L001D
        STA     L001D
        BCC     L532F

        TYA
        EOR     #$80
        RTS

.L532F
        LDA     #$01
        SBC     L001C
        STA     L001C
        LDA     #$00
        SBC     L001D
        STA     L001D
        TYA
        RTS

.MV40
        LDA     L008D
        EOR     #$80
        STA     L0081
        LDA     L0046
        STA     L001B
        LDA     L0047
        STA     L001C
        LDA     L0048
        JSR     MULT3

        LDX     #$03
        JSR     MVT3

        LDA     L0041
        STA     L009C
        STA     L001B
        LDA     L0042
        STA     L009D
        STA     L001C
        LDA     L002A
        STA     L0081
        LDA     L0043
        STA     L009E
        JSR     MULT3

        LDX     #$06
        JSR     MVT3

        LDA     L0041
        STA     L001B
        STA     L004C
        LDA     L0042
        STA     L001C
        STA     L004D
        LDA     L0043
        STA     L004E
        EOR     #$80
        JSR     MULT3

        LDA     L0043
        AND     #$80
        STA     L00D1
        EOR     L009E
        BMI     L53A8

        LDA     L0040
        CLC
        ADC     L009B
        LDA     L0041
        ADC     L009C
        STA     L0049
        LDA     L0042
        ADC     L009D
        STA     L004A
        LDA     L0043
        ADC     L009E
        JMP     MV2

.L53A8
        LDA     L0040
        SEC
        SBC     L009B
        LDA     L0041
        SBC     L009C
        STA     L0049
        LDA     L0042
        SBC     L009D
        STA     L004A
        LDA     L009E
        AND     #$7F
        STA     L001B
        LDA     L0043
        AND     #$7F
        SBC     L001B
        STA     L001B
        BCS     MV2

        LDA     #$01
        SBC     L0049
        STA     L0049
        LDA     #$00
        SBC     L004A
        STA     L004A
        LDA     #$00
        SBC     L001B
        ORA     #$80
.MV2
        EOR     L00D1
        STA     L004B
        LDA     L008D
        STA     L0081
        LDA     L0049
        STA     L001B
        LDA     L004A
        STA     L001C
        LDA     L004B
        JSR     MULT3

        LDX     #$00
        JSR     MVT3

        LDA     L0041
        STA     L0046
        LDA     L0042
        STA     L0047
        LDA     L0043
        STA     L0048
        JMP     MV45

.PU1
        DEX
        BNE     L5438

        LDA     L0048
        EOR     #$80
        STA     L0048
        LDA     L004E
        EOR     #$80
        STA     L004E
        LDA     L0050
        EOR     #$80
        STA     L0050
        LDA     L0054
        EOR     #$80
        STA     L0054
        LDA     L0056
        EOR     #$80
        STA     L0056
        LDA     L005A
        EOR     #$80
        STA     L005A
        LDA     L005C
        EOR     #$80
        STA     L005C
        LDA     L0060
        EOR     #$80
        STA     L0060
        RTS

.L5438
        LDA     #$00
        CPX     #$02
        ROR     A
        STA     L009A
        EOR     #$80
        STA     L0099
        LDA     L0046
        LDX     L004C
        STA     L004C
        STX     L0046
        LDA     L0047
        LDX     L004D
        STA     L004D
        STX     L0047
        LDA     L0048
        EOR     L0099
        TAX
        LDA     L004E
        EOR     L009A
        STA     L0048
        STX     L004E
        LDY     #$09
        JSR     PUS1

        LDY     #$0F
        JSR     PUS1

        LDY     #$15
.PUS1
        LDA     L0046,Y
        LDX     L004A,Y
        STA     L004A,Y
        STX     L0046,Y
        LDA     L0047,Y
        EOR     L0099
        TAX
        LDA     L004B,Y
        EOR     L009A
        STA     L0047,Y
        STX     L004B,Y
.L5486
        RTS

.L5487
        STX     L0345
        JSR     TT66

        JSR     SIGHT

        JMP     NWSTARS

.LOOK1
        LDA     #$00
        LDY     L0087
        BNE     L5487

        CPX     L0345
        BEQ     L5486

        STX     L0345
        JSR     TT66

        JSR     FLIP

        JSR     WPSHPS

.SIGHT
        LDY     L0345
        LDA     L0368,Y
        BEQ     L5486

        LDA     #$80
        STA     L0073
        LDA     #$48
        STA     L0074
        LDA     #$14
        STA     L0075
        JSR     TT15

        LDA     #$0A
        STA     L0075
        JMP     TT15

.TT66
        STA     L0087
.TTX66
        LDA     #$80
        STA     L0072
        JSR     FLFLLS

        STA     L0343
        STA     L034A
        STA     L034B
        LDX     #$60
.L54DC
        JSR     ZES1

        INX
        CPX     #$78
        BNE     L54DC

        LDX     L002F
        BEQ     BOX

        JSR     ee3

.BOX
        LDY     #$01
        STY     L002D
        LDA     L0087
        BNE     L5507

        LDY     #$0B
        STY     L002C
        LDA     L0345
        ORA     #$60
        JSR     L339A

        JSR     TT162

        LDA     #$AF
        JSR     L339A

.L5507
        LDX     #$00
        STX     L0034
        STX     L0035
        STX     L0072
        DEX
        STX     L0036
        JSR     HLOIN

        LDA     #$02
        STA     L0034
        STA     L0036
        JSR     BOS2

.BOS2
        JSR     L5521

.L5521
        LDA     #$00
        STA     L0035
        LDA     #$BF
        STA     L0037
        DEC     L0034
        DEC     L0036
        JMP     LOIN

.DELAY
        JSR     WSCAN

        DEY
        BNE     DELAY

        RTS

.CLYNS
        LDA     #$14
        STA     L002D
        LDA     #$75
        STA     L0008
        LDA     #$07
        STA     L0007
        JSR     TT67

        LDA     #$00
        JSR     LYN

        INC     L0008
        INY
        STY     L002C
.LYN
        LDY     #$E9
.L5552
        STA     (L0007),Y
        DEY
        BNE     L5552

.L5557
        RTS

.SCAN
        LDA     L0065
        AND     #$10
        BEQ     L5557

        LDA     L008C
        BMI     L5557

        LDX     #$FF
        CMP     #$01
        BNE     L556A

        LDX     #$F0
.L556A
        STX     L0091
        LDA     L0047
        ORA     L004A
        ORA     L004D
        AND     #$C0
        BNE     L5557

        LDA     L0047
        CLC
        LDX     L0048
        BPL     L5581

        EOR     #$FF
        ADC     #$01
.L5581
        ADC     #$7B
        STA     L0034
        LDA     L004D
        LSR     A
        LSR     A
        CLC
        LDX     L004E
        BPL     L5591

        EOR     #$FF
        SEC
.L5591
        ADC     #$23
        EOR     #$FF
        STA     L0007
        LDA     L004A
        LSR     A
        CLC
        LDX     L004B
        BMI     L55A2

        EOR     #$FF
        SEC
.L55A2
        ADC     L0007
        BPL     L55B0

        CMP     #$C2
        BCS     L55AC

        LDA     #$C2
.L55AC
        CMP     #$F7
        BCC     L55B2

.L55B0
        LDA     #$F6
.L55B2
        STA     L0035
        SEC
        SBC     L0007
        PHP
        PHA
        JSR     L36A7

        LDA     L16C0,X
        AND     L0091
        STA     L0034
        PLA
        PLP
        TAX
        BEQ     L55DA

        BCC     L55DB

.L55CA
        DEY
        BPL     L55D1

        LDY     #$07
        DEC     L0008
.L55D1
        LDA     L0034
        EOR     (L0007),Y
        STA     (L0007),Y
        DEX
        BNE     L55CA

.L55DA
        RTS

.L55DB
        INY
        CPY     #$08
        BNE     L55E4

        LDY     #$00
        INC     L0008
.L55E4
        INY
        CPY     #$08
        BNE     L55ED

        LDY     #$00
        INC     L0008
.L55ED
        LDA     L0034
        EOR     (L0007),Y
        STA     (L0007),Y
        INX
        BNE     L55E4

        RTS

.WSCAN
        LDA     #$00
        STA     L008B
.L55FB
        LDA     L008B
.L55FD
        BEQ     L55FB

L55FE = L55FD+1
.L55FF
        RTS

.BeebDisEndAddr



SAVE "versions/disc/output/D.CODE.unprot.bin",BeebDisStartAddr,BeebDisEndAddr
