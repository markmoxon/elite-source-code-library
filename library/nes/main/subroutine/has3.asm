.HAS3

 STX R
 STY YSAV
 LSR A
 LSR A
 LSR A
 CLC
 ADC LDA18,Y
 STA L00BA
 LDA L00E6
 ADC LDAF8,Y
 STA L00BB
 TYA
 AND #7
 TAY
.CB6BA
 SET_NAMETABLE_0        \ Switch the base nametable address to nametable 0
 LDX #0
 LDA (L00BA,X)
 BEQ CB70B
 LDX L00B9
 STX SC+1
 ASL A
 ROL SC+1
 ASL A
 ROL SC+1
 ASL A
 ROL SC+1
 STA SC
 LDA (SC),Y
 BEQ CB6F8
 LDA #1
.loop_CB6E2
 STA T
 AND (SC),Y
 BNE CB6EF
 LDA T
 SEC
 ROL A
 JMP loop_CB6E2

.CB6EF
 LDA T
 ORA (SC),Y
 STA (SC),Y
.loop_CB6F5
 LDY YSAV
 RTS

.CB6F8
 LDA #&FF
 STA (SC),Y
.loop_CB6FC
 DEC R
 BEQ loop_CB6F5
 LDA L00BA
 BNE CB706
 DEC L00BB
.CB706
 DEC L00BA
 JMP CB6BA

.CB70B
 TYA
 CLC
 ADC #&25
 STA (L00BA,X)
 JMP loop_CB6FC
